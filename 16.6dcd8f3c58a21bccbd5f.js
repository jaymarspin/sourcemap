(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Weqy:function(t,o,e){"use strict";e.r(o),e.d(o,"EditContactPageModule",function(){return P});var c=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),r=e("tyNb"),i=e("quSY"),s=e("Cfvw"),l=e("cp0P"),b=e("5+tZ"),m=e("vkgz"),h=e("v6Tj"),u=e("wdbY"),d=e("nQkn"),g=e("Ghe0"),p=e("HAHl"),N=e("2cgm"),f=e("AytR"),M=e("fXoL"),C=e("sYmb"),F=e("FpxV"),y=e("gE7l");function v(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.yc(t.label)}}function x(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.yc(t.label)}}function E(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.yc(t.label)}}function O(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.yc(t.label)}}function _(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.yc(t.label)}}function w(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.zc(" ",t.label,"")}}function V(t,o){if(1&t&&(M.Nb(0,"ion-col"),M.Nb(1,"ion-item"),M.Nb(2,"ion-select",30),M.ac(3,"translate"),M.vc(4,w,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(5,"app-item-err",10),M.Mb()),2&t){const t=M.Zb();M.xb(2),M.hc("placeholder",M.bc(3,4,"EditContact_City")),M.xb(2),M.gc("ngForOf",t.cityList),M.xb(1),M.gc("control",null==t.contactForm.controls?null:t.contactForm.controls.city)("messages",t.formErrorMessages.city)}}function I(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.zc(" ",t.label,"")}}function J(t,o){if(1&t&&(M.Nb(0,"ion-row"),M.Nb(1,"ion-col"),M.Nb(2,"ion-item"),M.Nb(3,"ion-select",31),M.ac(4,"translate"),M.vc(5,I,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(6,"app-item-err",10),M.Mb(),M.Mb()),2&t){const t=M.Zb();M.xb(3),M.hc("placeholder",M.bc(4,4,"EditContact_State")),M.xb(2),M.gc("ngForOf",t.stateList),M.xb(1),M.gc("control",null==t.contactForm.controls?null:t.contactForm.controls.state)("messages",t.formErrorMessages.state)}}function T(t,o){if(1&t&&(M.Nb(0,"ion-select-option",29),M.xc(1),M.Mb()),2&t){const t=o.$implicit;M.gc("value",t.value),M.xb(1),M.zc(" ",t.label,"")}}const L=[{path:":"+N.a.PARAM_ID,children:[{path:"",component:(()=>{class t{constructor(t,o,e,c,n,a,r,s,l){this.formBuilder=t,this.route=o,this.translate=e,this.router=c,this.contactService=n,this.alertCtrl=a,this.validator=r,this.loadingCtrl=s,this.navCtrl=l,this.subs=new i.a,this.salutationList=this.contactService.getContactSalutation(),this.countryCode=this.contactService.getCountryCodeList(),this.countryList=this.contactService.getCountryList(),this.genderList=this.contactService.getGender(),this.cityList=this.contactService.getCities(),this.stateList=this.contactService.getStates(),this.docList=this.contactService.getContactDocType(),this.raceList=this.contactService.getRace(),this.sysCountryCode=f.a.countryCode}ngOnInit(){this.contactForm=this.initContactForm(),this.subs.add(this.parseURL()),this.setMobileValidator()}parseURL(){return this.contact=new h.a,this.route.paramMap.subscribe(t=>{const o=t.get(N.a.PARAM_ID);if(o===N.a.PARAM_ID?this.translate.get("EditContact_AddContact").subscribe(t=>{this.pageTitle=t,this.contactForm.get("countryCode").setValue(this.contactService.getDefaultCountryCode())}):this.translate.get("EditContact_EditContact").subscribe(t=>{this.pageTitle=t,this.getContactInfo(o)}),this.router.getCurrentNavigation().extras.state){this.states=this.router.getCurrentNavigation().extras.state,console.log(this.states),this.contact=this.states[N.a.STATE_CONTACT],this.contact.Id=o===N.a.PARAM_ID?null:o;const t=this.states[N.a.STATE_VALIDATORS];t&&t.forEach(t=>{const o=this.contactForm.get(t);o.setValidators([...o.validator?[o.validator]:[],n.l.required]),this.formErrorMessages[t]=Object.assign(Object.assign({},this.formErrorMessages[t]?this.formErrorMessages[t]:{}),{required:"Cannot be empty."})}),this.contactForm.get("mobile").setValue(this.contact.MobileNo),this.contactForm.get("fullName").setValue(this.contact.Name)}})}initContactForm(){const t=this.formBuilder.group({id:[""],title:["",[n.l.required]],fullName:["",[n.l.required]],prefName:[""],company:[""],docType:[""],docNum:[""],race:[""],gender:["",[n.l.required]],countryCode:[""],mobile:[""],email:["",[n.l.email]],birthday:[""],line1:[""],line2:[""],postcode:[""],city:[""],state:[""],country:[""],remarks:[""]});return this.initErrorMessages(t),t}setMobileValidator(){const t=this.contactForm.get("mobile");t.setValidators([this.validateMobile(),n.l.required]),t.updateValueAndValidity(),this.formErrorMessages.mobile={mobileError:"Invalid Mobile Number."}}validateMobile(){return t=>{if(!t.value||t.value.length<=0)return null;const o={mobileError:{value:t.value}};if("65"===this.contactForm.get("countryCode").value){if(8!==t.value.length)return o;if(!t.value.startsWith("9")&&!t.value.startsWith("8"))return o}else if(t.value.length<9)return o;return null}}docTypeChanged(){this.contactForm=this.validator.setIDValidator(this.contactForm,this.formErrorMessages)}initErrorMessages(t){if(this.formErrorMessages={group:{}},t)for(const o of Object.keys(t.controls))switch(o){case"email":this.formErrorMessages[o]={email:"Invalid email."}}}done(){this.contactForm.valid?(this.contact.Title=this.contactForm.get("title").value,this.contact.Name=this.contactForm.get("fullName").value,this.contact.PrefName=this.contactForm.get("prefName").value,this.contact.CompanyName=this.contactForm.get("company").value,this.contact.DocType=this.contactForm.get("docType").value,this.contact.DocNum=this.contactForm.get("docNum").value,this.contact.Race=this.contactForm.get("race").value,this.contact.Gender=this.contactForm.get("gender").value,this.contact.MobileNo=this.contactForm.get("mobile").value,this.contact.CountryCode=this.contactForm.get("countryCode").value,this.contact.Email=this.contactForm.get("email").value,this.contact.Birthday=this.contactForm.get("birthday").value,this.contact.Line1=this.contactForm.get("line1").value,this.contact.Line2=this.contactForm.get("line2").value,this.contact.Postcode=this.contactForm.get("postcode").value,this.contact.City=this.contactForm.get("city").value,this.contact.State=this.contactForm.get("state").value,this.contact.Country=this.contactForm.get("country").value,this.contact.Remarks=this.contactForm.get("remarks").value,this.translate.get("Common_Saving").pipe(Object(b.b)(t=>Object(s.a)(this.loadingCtrl.create({message:t})))).subscribe(t=>(t.present(),this.contactService.upsertContact(this.contact).subscribe(o=>{t.dismiss(),o&&this.createOppnConvertLead(o)},o=>{t.dismiss()})),t=>{console.log(t)})):Object.values(this.contactForm.controls).forEach(t=>{t.markAsTouched({onlySelf:!0})})}createOppnConvertLead(t){const o=[];Object(s.a)(this.alertCtrl.create({backdropDismiss:!1})).pipe(Object(b.b)(e=>Object(l.a)([this.translate.get("EditContact_CreateNewOpportunity").pipe(Object(m.a)(t=>{e.header=t})),this.translate.get("Common_No").pipe(Object(m.a)(e=>{o.push({text:e,handler:()=>{this.contact.Id=t.Id,this.navCtrl.back(),setTimeout(t=>{this.navCtrl.navigateForward(p.a.BASE+"/"+this.contact.Id)},1e3)}})})),this.translate.get("Common_Yes").pipe(Object(m.a)(e=>{o.push({text:e,handler:()=>{this.contact.Id=t.Id,this.contact.Name=t.Name,this.addOpp()}})}))]).pipe(Object(m.a)(()=>{e.buttons=o,e.present()})))).subscribe()}getContactInfo(t){this.translate.get("Common_Loading").pipe(Object(b.b)(t=>Object(s.a)(this.loadingCtrl.create({message:t}))),Object(b.b)(o=>(o.present(),this.contactService.getContactById(t).pipe(Object(m.a)(t=>{o.dismiss(),this.contact=t,this.setValues()},t=>{o.dismiss()}))))).subscribe()}setValues(){this.contactForm.get("title").setValue(this.contact.Title),this.contactForm.get("fullName").setValue(this.contact.Name),this.contactForm.get("prefName").setValue(this.contact.PrefName),this.contactForm.get("company").setValue(this.contact.CompanyName),this.contactForm.get("docType").setValue(this.contact.DocType),this.contactForm.get("docNum").setValue(this.contact.DocNum),this.contactForm.get("race").setValue(this.contact.Race),this.contactForm.get("gender").setValue(this.contact.Gender),this.contactForm.get("mobile").setValue(this.contact.MobileNo),this.contactForm.get("countryCode").setValue(this.contact.CountryCode),this.contactForm.get("email").setValue(this.contact.Email),this.contactForm.get("birthday").setValue(this.contact.Birthday),this.contactForm.get("line1").setValue(this.contact.Line1),this.contactForm.get("line2").setValue(this.contact.Line2),this.contactForm.get("postcode").setValue(this.contact.Postcode),this.contactForm.get("city").setValue(this.contact.City),this.contactForm.get("state").setValue(this.contact.State),this.contactForm.get("country").setValue(this.contact.Country),this.contactForm.get("remarks").setValue(this.contact.Remarks)}addOpp(){const t=new Object,o=new u.a;o.ContactId=this.contact.Id,o.ContactName=this.contact.Name,t[g.a.STATE_OPP]=o,t[g.a.PAGE_HISTORY]="new_contact";const e={state:t};console.log(t),this.router.navigate([`${g.a.BASE}/${g.a.PARAM_ID}`],e)}}return t.\u0275fac=function(o){return new(o||t)(M.Ib(n.a),M.Ib(r.a),M.Ib(C.d),M.Ib(r.g),M.Ib(F.a),M.Ib(a.b),M.Ib(d.c),M.Ib(a.mb),M.Ib(a.ob))},t.\u0275cmp=M.Cb({type:t,selectors:[["app-edit-contact"]],decls:116,vars:93,consts:[["color","primary","mode","ios"],["slot","start"],["defaultHref","",3,"text"],["slot","end"],[3,"click"],["scroll","true"],[3,"formGroup"],[1,"ion-no-padding"],["formControlName","title",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"control","messages"],["formControlName","fullName",3,"placeholder"],["formControlName","prefName",3,"placeholder"],["formControlName","company",3,"placeholder"],["formControlName","docType",3,"placeholder","ionChange"],["formControlName","docNum",3,"placeholder"],["formControlName","race",3,"placeholder"],["formControlName","gender",3,"placeholder"],["displayFormat","MM/DD/YYYY","formControlName","birthday",3,"placeholder"],["size","12",1,"ion-no-padding","ion-no-margin","border-gap"],["size","4"],["formControlName","countryCode",3,"ionChange"],["formControlName","mobile",3,"placeholder"],["formControlName","email",3,"placeholder"],["formControlName","line1",3,"placeholder"],["formControlName","line2",3,"placeholder"],["formControlName","postcode",3,"placeholder"],[4,"ngIf"],["formControlName","country","readonly","",3,"placeholder"],[3,"value"],["formControlName","city",3,"placeholder"],["formControlName","state","readonly","",3,"placeholder"]],template:function(t,o){1&t&&(M.Nb(0,"ion-header"),M.Nb(1,"ion-toolbar",0),M.Nb(2,"ion-buttons",1),M.Jb(3,"ion-back-button",2),M.ac(4,"translate"),M.Mb(),M.Nb(5,"ion-buttons",3),M.Nb(6,"ion-button",4),M.Vb("click",function(){return o.done()}),M.xc(7),M.ac(8,"translate"),M.Mb(),M.Mb(),M.Nb(9,"ion-title"),M.xc(10),M.Mb(),M.Mb(),M.Mb(),M.Nb(11,"ion-content",5),M.Nb(12,"form",6),M.Nb(13,"ion-grid",7),M.Nb(14,"ion-row"),M.Nb(15,"ion-col"),M.Nb(16,"ion-item"),M.Nb(17,"ion-select",8),M.ac(18,"translate"),M.vc(19,v,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(20,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(21,"ion-row"),M.Nb(22,"ion-col"),M.Nb(23,"ion-item"),M.Jb(24,"ion-input",11),M.ac(25,"translate"),M.Mb(),M.Jb(26,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(27,"ion-row"),M.Nb(28,"ion-col"),M.Nb(29,"ion-item"),M.Jb(30,"ion-input",12),M.ac(31,"translate"),M.Mb(),M.Jb(32,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(33,"ion-row"),M.Nb(34,"ion-col"),M.Nb(35,"ion-item"),M.Jb(36,"ion-input",13),M.ac(37,"translate"),M.Mb(),M.Jb(38,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(39,"ion-row"),M.Nb(40,"ion-col"),M.Nb(41,"ion-item"),M.Nb(42,"ion-select",14),M.Vb("ionChange",function(){return o.docTypeChanged()}),M.ac(43,"translate"),M.vc(44,x,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(45,"app-item-err",10),M.Mb(),M.Nb(46,"ion-col"),M.Nb(47,"ion-item"),M.Jb(48,"ion-input",15),M.ac(49,"translate"),M.Mb(),M.Jb(50,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(51,"ion-row"),M.Nb(52,"ion-col"),M.Nb(53,"ion-item"),M.Nb(54,"ion-select",16),M.ac(55,"translate"),M.vc(56,E,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(57,"app-item-err",10),M.Mb(),M.Nb(58,"ion-col"),M.Nb(59,"ion-item"),M.Nb(60,"ion-select",17),M.ac(61,"translate"),M.vc(62,O,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(63,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(64,"ion-row"),M.Nb(65,"ion-col"),M.Nb(66,"ion-item"),M.Jb(67,"ion-datetime",18),M.ac(68,"translate"),M.Mb(),M.Jb(69,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(70,"ion-row"),M.Jb(71,"ion-col",19),M.Mb(),M.Nb(72,"ion-row"),M.Nb(73,"ion-col",20),M.Nb(74,"ion-item"),M.Nb(75,"ion-select",21),M.Vb("ionChange",function(){return o.setMobileValidator()}),M.vc(76,_,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(77,"app-item-err",10),M.Mb(),M.Nb(78,"ion-col"),M.Nb(79,"ion-item"),M.Jb(80,"ion-input",22),M.ac(81,"translate"),M.Mb(),M.Jb(82,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(83,"ion-row"),M.Nb(84,"ion-col"),M.Nb(85,"ion-item"),M.Jb(86,"ion-input",23),M.ac(87,"translate"),M.Mb(),M.Jb(88,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(89,"ion-row"),M.Nb(90,"ion-col"),M.Nb(91,"ion-item"),M.Jb(92,"ion-input",24),M.ac(93,"translate"),M.Mb(),M.Jb(94,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(95,"ion-row"),M.Nb(96,"ion-col"),M.Nb(97,"ion-item"),M.Jb(98,"ion-input",25),M.ac(99,"translate"),M.Mb(),M.Jb(100,"app-item-err",10),M.Mb(),M.Mb(),M.Nb(101,"ion-row"),M.Nb(102,"ion-col"),M.Nb(103,"ion-item"),M.Jb(104,"ion-input",26),M.ac(105,"translate"),M.Mb(),M.Jb(106,"app-item-err",10),M.Mb(),M.vc(107,V,6,6,"ion-col",27),M.Mb(),M.vc(108,J,7,6,"ion-row",27),M.Nb(109,"ion-row"),M.Nb(110,"ion-col"),M.Nb(111,"ion-item"),M.Nb(112,"ion-select",28),M.ac(113,"translate"),M.vc(114,T,2,2,"ion-select-option",9),M.Mb(),M.Mb(),M.Jb(115,"app-item-err",10),M.Mb(),M.Mb(),M.Mb(),M.Mb(),M.Mb()),2&t&&(M.xb(3),M.hc("text",M.bc(4,59,"Common_Back")),M.xb(4),M.yc(M.bc(8,61,"Common_Done")),M.xb(3),M.yc(o.pageTitle),M.xb(2),M.gc("formGroup",o.contactForm),M.xb(5),M.hc("placeholder",M.bc(18,63,"EditContact_Salutation")),M.xb(2),M.gc("ngForOf",o.salutationList),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.title)("messages",o.formErrorMessages.title),M.xb(4),M.hc("placeholder",M.bc(25,65,"EditContact_FullName")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.fullName)("messages",o.formErrorMessages.fullName),M.xb(4),M.hc("placeholder",M.bc(31,67,"EditContact_PreferredName")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.prefName)("messages",o.formErrorMessages.prefName),M.xb(4),M.hc("placeholder",M.bc(37,69,"EditContact_Company")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.company)("messages",o.formErrorMessages.company),M.xb(4),M.hc("placeholder",M.bc(43,71,"EditContact_ID")),M.xb(2),M.gc("ngForOf",o.docList),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.docType)("messages",o.formErrorMessages.docType),M.xb(3),M.hc("placeholder",M.bc(49,73,"EditContact_IDNumber")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.docNum)("messages",o.formErrorMessages.docNum),M.xb(4),M.hc("placeholder",M.bc(55,75,"EditContact_Race")),M.xb(2),M.gc("ngForOf",o.raceList),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.race)("messages",o.formErrorMessages.race),M.xb(3),M.hc("placeholder",M.bc(61,77,"EditContact_Gender")),M.xb(2),M.gc("ngForOf",o.genderList),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.gender)("messages",o.formErrorMessages.gender),M.xb(4),M.hc("placeholder",M.bc(68,79,"EditContact_Birthday")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.birthday)("messages",o.formErrorMessages.birthday),M.xb(7),M.gc("ngForOf",o.countryCode),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.countryCode)("messages",o.formErrorMessages.countryCode),M.xb(3),M.hc("placeholder",M.bc(81,81,"EditContact_MobileNumber")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.mobile)("messages",o.formErrorMessages.mobile),M.xb(4),M.hc("placeholder",M.bc(87,83,"EditContact_Email")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.email)("messages",o.formErrorMessages.email),M.xb(4),M.hc("placeholder",M.bc(93,85,"EditContact_AddressLine1")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.line1)("messages",o.formErrorMessages.line1),M.xb(4),M.hc("placeholder",M.bc(99,87,"EditContact_AddressLine2")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.line2)("messages",o.formErrorMessages.line2),M.xb(4),M.hc("placeholder",M.bc(105,89,"EditContact_Postcode")),M.xb(2),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.postcode)("messages",o.formErrorMessages.postcode),M.xb(1),M.gc("ngIf","my"==o.sysCountryCode),M.xb(1),M.gc("ngIf","my"==o.sysCountryCode),M.xb(4),M.hc("placeholder",M.bc(113,91,"EditContact_Country")),M.xb(2),M.gc("ngForOf",o.countryList),M.xb(1),M.gc("control",null==o.contactForm.controls?null:o.contactForm.controls.country)("messages",o.formErrorMessages.country))},directives:[a.w,a.ib,a.i,a.f,a.g,a.h,a.hb,a.q,n.m,n.i,n.d,a.v,a.T,a.p,a.B,a.X,a.sb,n.h,n.c,c.l,y.a,a.A,a.tb,a.r,c.m,a.Y],pipes:[C.c],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-content-color)}.bg-white[_ngcontent-%COMP%], div[_ngcontent-%COMP%]{background:#fff}ion-select[_ngcontent-%COMP%]{width:100%}ion-col[_ngcontent-%COMP%]{position:static!important}form[_ngcontent-%COMP%]{position:relative;display:block}.border-gap[_ngcontent-%COMP%]{height:15px;background-color:#e8eaed}"]}),t})(),pathMatch:"full"}]}];let S=(()=>{class t{}return t.\u0275mod=M.Gb({type:t}),t.\u0275inj=M.Fb({factory:function(o){return new(o||t)},imports:[[r.i.forChild(L)],r.i]}),t})();var A=e("CJCG");let P=(()=>{class t{}return t.\u0275mod=M.Gb({type:t}),t.\u0275inj=M.Fb({factory:function(o){return new(o||t)},imports:[[c.c,n.e,a.kb,n.k,C.b,A.a,S]]}),t})()}}]);
//# sourceMappingURL=16.6dcd8f3c58a21bccbd5f.js.map