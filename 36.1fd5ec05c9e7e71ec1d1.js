(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{KZ26:function(t,n,i){"use strict";i.r(n),i.d(n,"TestdrivesPageModule",function(){return I});var e=i("ofXK"),o=i("3Pt+"),c=i("TEn/"),b=i("tyNb"),r=i("UsUu"),a=i("quSY"),s=i("Cfvw"),l=i("VOuF"),d=i("fXoL"),u=i("sYmb");let p=(()=>{class t{constructor(t){this.modalCtrl=t}ngOnInit(){this.filterObj||this.reset()}getData(){}reset(){this.filterObj={tdStatus:"all"}}apply(){this.modalCtrl.dismiss(this.filterObj)}cancel(){this.modalCtrl.dismiss()}getUpcomingIcon(){return"upcoming"===this.filterObj.tdStatus?"assets/icon/opportunity/upcoming.svg":"assets/icon/opportunity/upcoming-disabled.svg"}updateTdStatus(t){this.filterObj.tdStatus="ongoing"===t?"ongoing":"upcoming"===t?"upcoming":"all"===t?"all":"completed"}}return t.\u0275fac=function(n){return new(n||t)(d.Ib(c.nb))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-filter-testdrive"]],inputs:{filterObj:"filterObj"},decls:45,vars:36,consts:[[1,"ion-no-border"],["color","primary","mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],[1,"ion-padding"],[1,"ion-no-margin","ion-no-padding"],["size","12"],[1,"ion-text-center","ion-padding-top"],[1,"header-btn",3,"click"],["name","apps",3,"color"],[1,"mat-small"],["name","play",3,"color"],["name","checkmark",3,"color"],[3,"src"],["fill","solid","expand","block","color","primary",3,"click"]],template:function(t,n){1&t&&(d.Nb(0,"ion-header",0),d.Nb(1,"ion-toolbar",1),d.Nb(2,"ion-buttons",2),d.Nb(3,"ion-button",3),d.Vb("click",function(){return n.cancel()}),d.Jb(4,"ion-icon",4),d.Mb(),d.Mb(),d.Nb(5,"ion-buttons",5),d.Nb(6,"ion-button",3),d.Vb("click",function(){return n.reset()}),d.xc(7),d.ac(8,"translate"),d.Mb(),d.Mb(),d.Nb(9,"ion-title"),d.xc(10),d.ac(11,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Nb(12,"ion-content"),d.Nb(13,"div",6),d.Nb(14,"ion-grid",7),d.Nb(15,"ion-row"),d.Nb(16,"ion-col",8),d.Nb(17,"ion-label"),d.xc(18),d.ac(19,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Nb(20,"ion-row",9),d.Nb(21,"ion-col",10),d.Vb("click",function(){return n.updateTdStatus("all")}),d.Jb(22,"ion-icon",11),d.Nb(23,"ion-label",12),d.xc(24),d.ac(25,"translate"),d.Mb(),d.Mb(),d.Nb(26,"ion-col",10),d.Vb("click",function(){return n.updateTdStatus("ongoing")}),d.Jb(27,"ion-icon",13),d.Nb(28,"ion-label",12),d.xc(29),d.ac(30,"translate"),d.Mb(),d.Mb(),d.Nb(31,"ion-col",10),d.Vb("click",function(){return n.updateTdStatus("completed")}),d.Jb(32,"ion-icon",14),d.Nb(33,"ion-label",12),d.xc(34),d.ac(35,"translate"),d.Mb(),d.Mb(),d.Nb(36,"ion-col",10),d.Vb("click",function(){return n.updateTdStatus("upcoming")}),d.Jb(37,"ion-icon",15),d.Nb(38,"ion-label",12),d.xc(39),d.ac(40,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(41,"ion-footer",6),d.Nb(42,"ion-button",16),d.Vb("click",function(){return n.apply()}),d.xc(43),d.ac(44,"translate"),d.Mb(),d.Mb()),2&t&&(d.xb(7),d.zc(" ",d.bc(8,20,"TestdriveFilter_Reset")," "),d.xb(3),d.yc(d.bc(11,22,"TestdriveFilter_Filter")),d.xb(8),d.zc(" ",d.bc(19,24,"TestdriveFilter_TestDriveStatus")," "),d.xb(3),d.Ab("activated","all"===n.filterObj.tdStatus),d.xb(1),d.gc("color","all"===n.filterObj.tdStatus?"primary":"medium"),d.xb(2),d.zc(" ",d.bc(25,26,"TestdriveFilter_All")," "),d.xb(2),d.Ab("activated","ongoing"===n.filterObj.tdStatus),d.xb(1),d.gc("color","ongoing"===n.filterObj.tdStatus?"primary":"medium"),d.xb(2),d.zc(" ",d.bc(30,28,"TestdriveFilter_Ongoing")," "),d.xb(2),d.Ab("activated","completed"===n.filterObj.tdStatus),d.xb(1),d.gc("color","completed"===n.filterObj.tdStatus?"primary":"medium"),d.xb(2),d.zc(" ",d.bc(35,30,"TestdriveFilter_Completed")," "),d.xb(2),d.Ab("activated","upcoming"===n.filterObj.tdStatus),d.xb(1),d.hc("src",n.getUpcomingIcon()),d.xb(2),d.zc(" ",d.bc(40,32,"TestdriveFilter_Upcoming")," "),d.xb(4),d.zc(" ",d.bc(44,34,"Common_Apply")," "))},directives:[c.w,c.ib,c.i,c.h,c.x,c.hb,c.q,c.v,c.T,c.p,c.H,c.u],pipes:[u.c],styles:[".activated[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}.header-btn[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px;padding-top:5px;padding-bottom:5px;border-radius:10px}.header-btn[_ngcontent-%COMP%], .header-btn[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#eff8f8}.header-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:block;margin:auto;clear:both}ion-icon[_ngcontent-%COMP%]{font-size:25px}"]}),t})();var g=i("TFsF"),m=i("5+tZ"),f=i("vkgz"),h=i("AytR"),M=i("6GcI");function x(t,n){if(1&t&&(d.Nb(0,"ion-text",11),d.xc(1),d.ac(2,"translate"),d.Mb()),2&t){const t=d.Zb();d.xb(1),d.Ac(" ",d.bc(2,2,"TestdrivePage_OpportunityID"),": ",t.oppId," ")}}function v(t,n){if(1&t){const t=d.Ob();d.Nb(0,"ion-toolbar",12),d.Nb(1,"div",13),d.Vb("click",function(){return d.qc(t),d.Zb().add()}),d.Jb(2,"ion-icon",14),d.Nb(3,"ion-label",15),d.xc(4),d.ac(5,"translate"),d.Mb(),d.Mb(),d.Mb()}2&t&&(d.xb(4),d.zc(" ",d.bc(5,1,"Testdrive_AddTestDrive")," "))}function N(t,n){if(1&t&&(d.Nb(0,"ion-label"),d.xc(1),d.Mb()),2&t){const t=d.Zb().$implicit;d.xb(1),d.yc(null==t?null:t.DrivingLicense)}}function O(t,n){if(1&t){const t=d.Ob();d.Nb(0,"div",16),d.Nb(1,"ion-grid",17),d.Nb(2,"ion-row"),d.Nb(3,"ion-col"),d.Nb(4,"ion-label",18),d.Nb(5,"b"),d.xc(6),d.Mb(),d.Mb(),d.Jb(7,"br"),d.Nb(8,"ion-label",18),d.Nb(9,"b"),d.xc(10),d.Mb(),d.Mb(),d.Nb(11,"div",19),d.Jb(12,"ion-icon",20),d.Mb(),d.Mb(),d.Nb(13,"ion-col",21),d.Nb(14,"ion-label"),d.xc(15),d.Mb(),d.Jb(16,"br"),d.Nb(17,"ion-label"),d.xc(18),d.Mb(),d.Jb(19,"br"),d.vc(20,N,2,1,"ion-label",22),d.Jb(21,"br"),d.Nb(22,"ion-label"),d.xc(23),d.ac(24,"date"),d.Mb(),d.Jb(25,"br"),d.Nb(26,"ion-label"),d.xc(27),d.ac(28,"date"),d.Mb(),d.Jb(29,"br"),d.Nb(30,"ion-label"),d.Nb(31,"a",5),d.Vb("click",function(){d.qc(t);const i=n.$implicit;return d.Zb().goToTestdrive(i)}),d.xc(32),d.ac(33,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()}if(2&t){const t=n.$implicit,i=d.Zb();d.xb(4),d.hc("color",i.getColor(null==t?null:t.Vehicle)),d.xb(2),d.yc(null==t||null==t.Vehicle?null:t.Vehicle.Status),d.xb(2),d.hc("color",i.getColor(null==t?null:t.Vehicle)),d.xb(2),d.yc(null==t?null:t.ContactName),d.xb(2),d.hc("src",i.getIcon(null==t?null:t.Vehicle)),d.xb(3),d.yc(null==t?null:t.DocNum),d.xb(3),d.yc(null==t||null==t.Vehicle?null:t.Vehicle.Name),d.xb(2),d.gc("nfIf","my"==i.countryCode),d.xb(3),d.yc(d.cc(24,11,null==t?null:t.ExpiryDate,"dd MMM y")),d.xb(4),d.zc(" ",d.cc(28,14,null==t?null:t.PlannedStartDate,"dd MMM y hh:mm a")," "),d.xb(5),d.zc(" ",d.bc(33,17,"OpportunityTab_ViewDetails")," ")}}const y=[{path:":"+g.a.PARAM_ID,children:[{path:"",component:(()=>{class t{constructor(t,n,i,e,o,c){this.route=t,this.router=n,this.testdriveSrvc=i,this.modalCtrl=e,this.translate=o,this.loadingCtrl=c,this.subs=new a.a,this.countryCode=h.a.countryCode}ngOnInit(){this.subs.add(this.parseURL())}parseURL(){return this.route.paramMap.subscribe(t=>{this.oppId=t.get(g.a.PARAM_ID),this.oppId===g.a.PARAM_ID&&(this.oppId=""),this.getTestdrives(null,this.oppId)})}getTestdrives(t,n){return this.translate.get("Common_Loading").pipe(Object(m.b)(t=>Object(s.a)(this.loadingCtrl.create({message:t}))),Object(m.b)(i=>(i.present(),this.testdriveSrvc.getTestdrives(t,n).pipe(Object(f.a)(t=>{this.testdrives=t,console.log(this.testdrives),i.dismiss()},t=>{i.dismiss()}))))).subscribe()}goToTestdrive(t){this.router.navigate([`${l.a.BASE}/${t.Id}`])}getColor(t){if(t&&this.checkStatus(t.Status))return"primary"}getIcon(t){return t&&this.checkStatus(t.Status)?"assets/icon/testdrive/active-td.svg":"assets/icon/testdrive/inactive-td.svg"}checkStatus(t){return"VEHICLE OUT"===t||"SCHEDULED"===t}add(){const t=new Object;t[r.a.STATE_OPPID]=this.oppId,this.router.navigate([`${r.a.BASE}/${r.a.PARAM_ID}`],{state:t})}showFilter(){Object(s.a)(this.modalCtrl.create({component:p,backdropDismiss:!1,animated:!0,cssClass:"full-screen",componentProps:{filterObj:this.filterObj?Object.assign({},this.filterObj):null}})).subscribe(t=>{Object(s.a)(t.onDidDismiss()).subscribe(t=>{t&&t.data&&(this.filterObj=t.data,this.getTestdrives(this.filterObj,this.oppId))}),t.present()})}}return t.\u0275fac=function(n){return new(n||t)(d.Ib(b.a),d.Ib(b.g),d.Ib(M.a),d.Ib(c.nb),d.Ib(u.d),d.Ib(c.mb))},t.\u0275cmp=d.Cb({type:t,selectors:[["app-testdrives"]],decls:16,vars:9,consts:[[1,"ion-no-border"],["color","primary","mode","ios"],["slot","start"],["defaultHref","",3,"text"],["slot","end"],[3,"click"],["slot","icon-only","name","funnel"],["class","sub-header",4,"ngIf"],["class","bg",4,"ngIf"],[1,"ion-padding-start","ion-padding-end","ion-padding-bottom"],["class","ion-margin-top ion-margin-bottom border-radius",4,"ngFor","ngForOf"],[1,"sub-header"],[1,"bg"],[1,"border","ion-margin-start","ion-margin-end","ion-margin-top","ion-padding","ion-text-center",3,"click"],["name","add-circle","color","primary",1,"add-icon"],["color","primary"],[1,"ion-margin-top","ion-margin-bottom","border-radius"],[1,"ion-no-margin"],[3,"color"],[1,"bottom-icon"],[3,"src"],[1,"ion-text-start"],[4,"nfIf"]],template:function(t,n){1&t&&(d.Nb(0,"ion-header",0),d.Nb(1,"ion-toolbar",1),d.Nb(2,"ion-buttons",2),d.Jb(3,"ion-back-button",3),d.ac(4,"translate"),d.Mb(),d.Nb(5,"ion-buttons",4),d.Nb(6,"ion-button",5),d.Vb("click",function(){return n.showFilter()}),d.Jb(7,"ion-icon",6),d.Mb(),d.Mb(),d.Nb(8,"ion-title"),d.xc(9),d.ac(10,"translate"),d.Jb(11,"br"),d.vc(12,x,3,4,"ion-text",7),d.Mb(),d.Mb(),d.vc(13,v,6,3,"ion-toolbar",8),d.Mb(),d.Nb(14,"ion-content",9),d.vc(15,O,34,19,"div",10),d.Mb()),2&t&&(d.xb(3),d.hc("text",d.bc(4,5,"Common_Back")),d.xb(6),d.zc(" ",d.bc(10,7,"TestdrivePage_Testdrives"),""),d.xb(3),d.gc("ngIf",n.oppId&&"my"===n.countryCode),d.xb(1),d.gc("ngIf",n.oppId),d.xb(2),d.gc("ngForOf",n.testdrives))},directives:[c.w,c.ib,c.i,c.f,c.g,c.h,c.x,c.hb,e.m,c.q,e.l,c.fb,c.H,c.v,c.T,c.p],pipes:[u.c,e.f],styles:[".bg[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-content-color)}.sub-header[_ngcontent-%COMP%]{font-size:12px}.add-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;vertical-align:middle;margin-top:-3px}.bottom-icon[_ngcontent-%COMP%]{bottom:0;position:absolute;font-size:20px}.border[_ngcontent-%COMP%]{border:3px dashed #cacaca}div[_ngcontent-%COMP%]{background:#fff}"]}),t})(),pathMatch:"full"}]}];let C=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(n){return new(n||t)},imports:[[b.i.forChild(y)],b.i]}),t})(),I=(()=>{class t{}return t.\u0275mod=d.Gb({type:t}),t.\u0275inj=d.Fb({factory:function(n){return new(n||t)},imports:[[e.c,o.e,u.b,c.kb,C]]}),t})()}}]);
//# sourceMappingURL=36.1fd5ec05c9e7e71ec1d1.js.map