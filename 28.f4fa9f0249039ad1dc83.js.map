{"version":3,"sources":["./src/app/pages/opportunity/opp-list/component/filter-opportunity/filter-opportunity.component.html","./src/app/pages/opportunity/opp-list/component/filter-opportunity/filter-opportunity.component.ts","./src/app/pages/opportunity/opp-list/opp-list.page.html","./src/app/pages/opportunity/opp-list/opp-list-routing.module.ts","./src/app/pages/opportunity/opp-list/opp-list.page.ts","./src/app/pages/opportunity/opp-list/opp-list.module.ts"],"names":["FilterOpportunityComponent","modalCtrl","opportunitySrvc","formBuilder","translate","starred","this","getStarredFilterOptions","filterForm","initFilterForm","filterObj","updateForm","reset","group","source","startDate","endDate","withOpenBookings","withPendingTasks","withAppointment","tdStatus","oppStatus","leadStatus","oppSource","starredOpp","emitEvent","dismiss","type","cancel","updateTdStatus","updateOppStatus","updateLeadStatus","apply","routes","path","component","OppListPage","opportunityService","router","loadingCtrl","countryCode","environment","isLoadingRecent","getOpportunities","filter","getOppInfinite","pipe","tap","e","infOpp","next","opp","result","err","subscribe","searchInput","trim","get","mergeMap","lang","from","create","message","loading","present","console","log","warmth","navigate","BASE","Id","Flag","backdropDismiss","animated","cssClass","componentProps","Object","assign","modal","onDidDismiss","res","data","event","concat","target","complete","disabled","showFilter","search","doInfinite","OppListPageRoutingModule","forChild","OppListPageModule"],"mappings":"gUA0Jc,+BAAmE,QAAe,Q,yBAA/D,sBAAgD,uB,yBAOnE,+BAAmE,QAAe,Q,yBAA/D,sBAAgD,uBCnJ1E,Y,MAAMA,EAMX,YACUC,EACAC,EACAC,EACAC,GAHA,KAAAH,YACA,KAAAC,kBACA,KAAAC,cACA,KAAAC,YANV,KAAAC,QAAUC,KAAKJ,gBAAgBK,0BAQ7BD,KAAKE,WAAaF,KAAKG,iBAGzB,WACOH,KAAKI,UAGRJ,KAAKK,aAFLL,KAAKM,QAMD,iBAUN,OATgBN,KAAKH,YAAYU,MAAM,CACrCC,OAAQ,CAAC,IACTT,QAAS,CAAC,IACVU,UAAW,CAAC,IACZC,QAAS,CAAC,IACVC,iBAAkB,EAAC,GACnBC,iBAAkB,EAAC,GACnBC,gBAAiB,EAAC,KAKtB,WAEA,QACEb,KAAKI,UAAY,CACfU,SAAU,MACVC,UAAW,MACXC,WAAY,MACZC,UAAW,GACXC,WAAY,MACZT,UAAW,GACXC,QAAS,GACTC,kBAAkB,EAClBE,iBAAiB,EACjBD,kBAAkB,GAEpBZ,KAAKK,aAGP,aACML,KAAKE,YACPF,KAAKE,WAAWI,MACd,CACEE,OAAQR,KAAKI,UAAUa,UACvBlB,QAASC,KAAKI,UAAUc,WACxBT,UAAWT,KAAKI,UAAUK,UAC1BC,QAASV,KAAKI,UAAUM,QACxBC,iBAAkBX,KAAKI,UAAUO,iBACjCC,iBAAkBZ,KAAKI,UAAUQ,iBACjCC,gBAAiBb,KAAKI,UAAUS,iBAElC,CAAEM,WAAW,IAKnB,QACEnB,KAAKL,UAAUyB,QAAQpB,KAAKI,WAG9B,SACEJ,KAAKL,UAAUyB,UAGjB,cACE,MAAiC,SAA7BpB,KAAKI,UAAUW,UACV,qCAEA,8CAIX,kBACE,MAAgC,aAA5Bf,KAAKI,UAAUU,SACV,uCAEA,gDAIX,gBAAgBO,GAEZrB,KAAKI,UAAUW,UADJ,SAATM,EACyB,OACT,aAATA,EACkB,WACT,QAATA,EACkB,MAEA,MAI/B,iBAAiBA,GAEbrB,KAAKI,UAAUY,WADJ,SAATK,EAC0B,OACV,QAATA,EACmB,MACV,QAATA,EACmB,MAEA,OAIhC,eAAeA,GAEXrB,KAAKI,UAAUU,SADJ,YAATO,EACwB,UACR,aAATA,EACiB,WACR,QAATA,EACiB,MAEA,a,6CA/HnB3B,GAA0B,2C,uBAA1BA,EAA0B,gvCDdvC,uBACE,wBACE,wBACE,uBAAY,+BAAS,EAAA4B,WACnB,qBACF,OACF,OACA,wBACE,uBAAY,+BAAS,EAAAhB,UACnB,Q,oBACF,OACF,OACA,oBAAW,S,qBAA4C,OACzD,OACF,OACA,uBACE,WACE,sBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAiB,eAAe,SAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,aAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,eAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,cAClD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAC,gBAAgB,SACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,UACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,SACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,cACnD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAC,iBAAiB,SACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,SACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,UACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,UACpD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,sBACE,qBACE,S,sBACF,OACF,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","file":"28.f4fa9f0249039ad1dc83.js","sourcesContent":["<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\">\r\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"reset()\">\r\n        {{ 'OpportunityFilter_Reset' | translate }}\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{ 'OpportunityFilter_Filter' | translate }}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <ng-container [formGroup]=\"filterForm\">\r\n    <ion-grid class=\"ion-no-margin bg-white ion-padding\">\r\n      <ion-row>\r\n        <ion-col size=\"12\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_TestDriveStatus' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row class=\"ion-text-center ion-padding-top\">\r\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('all')\" [class.activated]=\"filterObj.tdStatus === 'all'\">\r\n          <ion-icon name=\"apps\" [color]=\"filterObj.tdStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_All' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('ongoing')\" [class.activated]=\"filterObj.tdStatus === 'ongoing'\">\r\n          <ion-icon name=\"play\" [color]=\"filterObj.tdStatus === 'ongoing' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Ongoing' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('completed')\" [class.activated]=\"filterObj.tdStatus === 'completed'\">\r\n          <ion-icon name=\"checkmark\" [color]=\"filterObj.tdStatus === 'completed' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Completed' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('upcoming')\" [class.activated]=\"filterObj.tdStatus === 'upcoming'\">\r\n          <ion-icon src=\"{{ getUpcomingIcon() }}\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Upcoming' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n\r\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\r\n      <ion-row>\r\n        <ion-col size=\"12\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_OpportunityStatus' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row class=\"ion-text-center ion-padding-top\">\r\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('all')\" [class.activated]=\"filterObj.oppStatus === 'all'\">\r\n          <ion-icon name=\"apps\" [color]=\"filterObj.oppStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_All' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('open')\" [class.activated]=\"filterObj.oppStatus === 'open'\">\r\n          <ion-icon src=\"{{ getOpenIcon() }}\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Open' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('won')\" [class.activated]=\"filterObj.oppStatus === 'won'\">\r\n          <ion-icon name=\"trophy\" [color]=\"filterObj.oppStatus === 'won' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Won' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('deferred')\" [class.activated]=\"filterObj.oppStatus === 'deferred'\">\r\n          <ion-icon name=\"timer\" [color]=\"filterObj.oppStatus === 'deferred' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Deferred' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n\r\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\r\n      <ion-row>\r\n        <ion-col size=\"12\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_LeadStatus' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row class=\"ion-text-center ion-padding-top\">\r\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('all')\" [class.activated]=\"filterObj.leadStatus === 'all'\">\r\n          <ion-icon name=\"apps\" [color]=\"filterObj.leadStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_All' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('hot')\" [class.activated]=\"filterObj.leadStatus === 'hot'\">\r\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'hot' ? 'danger' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Hot' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('warm')\" [class.activated]=\"filterObj.leadStatus === 'warm'\">\r\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'warm' ? 'warning' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Warm' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('cold')\" [class.activated]=\"filterObj.leadStatus === 'cold'\">\r\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'cold' ? 'secondary' : 'medium'\"></ion-icon>\r\n\r\n          <ion-label class=\"mat-small\">\r\n            {{ 'OpportunityFilter_Cold' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n\r\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\r\n      <ion-row>\r\n        <ion-col size=\"6\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_OpportunitySource' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col size=\"6\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_StarredOpportunity' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row>\r\n        <ion-col size=\"6\">\r\n          <ion-item lines=\"none\">\r\n            <ion-select formControlName=\"source\">\r\n              <ion-select-option [value]=\"opt.value\" *ngFor=\"let opt of sources\">{{ opt.label }}</ion-select-option>\r\n            </ion-select>\r\n          </ion-item>\r\n        </ion-col>\r\n        <ion-col size=\"6\">\r\n          <ion-item lines=\"none\">\r\n            <ion-select formControlName=\"starred\">\r\n              <ion-select-option [value]=\"opt.value\" *ngFor=\"let opt of starred\">{{ opt.label }}</ion-select-option>\r\n            </ion-select>\r\n          </ion-item>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n\r\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\r\n      <ion-row>\r\n        <ion-col size=\"6\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_StartDate' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n        <ion-col size=\"6\">\r\n          <ion-label>\r\n            {{ 'OpportunityFilter_EndDate' | translate }}\r\n          </ion-label>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row>\r\n        <ion-col size=\"6\">\r\n          <ion-item lines=\"none\">\r\n            <ion-datetime displayFormat=\"MMM DD YYYY\" formControlName=\"startDate\"></ion-datetime>\r\n          </ion-item>\r\n        </ion-col>\r\n        <ion-col size=\"6\">\r\n          <ion-item lines=\"none\">\r\n            <ion-datetime displayFormat=\"MMM DD YYYY\" formControlName=\"endDate\"></ion-datetime>\r\n          </ion-item>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n\r\n    <ion-list class=\"ion-margin-top\">\r\n      <ion-item button class=\"ion-padding-start\">\r\n        <ion-label>\r\n          {{ 'OpportunityFilter_WithOpenBookings' | translate }}\r\n        </ion-label>\r\n        <ion-checkbox slot=\"start\" formControlName=\"withOpenBookings\"></ion-checkbox>\r\n      </ion-item>\r\n      <ion-item button class=\"ion-padding-start\">\r\n        <ion-label>\r\n          {{ 'OpportunityFilter_WithPendingTasks' | translate }}\r\n        </ion-label>\r\n        <ion-checkbox slot=\"start\" formControlName=\"withPendingTasks\"></ion-checkbox>\r\n      </ion-item>\r\n      <ion-item button lines=\"none\" class=\"ion-padding-start\">\r\n        <ion-label>\r\n          {{ 'OpportunityFilter_WithScheduledAppointments' | translate }}\r\n        </ion-label>\r\n        <ion-checkbox slot=\"start\" formControlName=\"withAppointment\"></ion-checkbox>\r\n      </ion-item>\r\n    </ion-list>\r\n  </ng-container>\r\n</ion-content>\r\n<ion-footer class=\"ion-padding\">\r\n  <ion-button fill=\"solid\" expand=\"block\" color=\"primary\" (click)=\"apply()\">\r\n    {{ 'Common_Apply' | translate }}\r\n  </ion-button>\r\n</ion-footer>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { SelectOption } from 'src/app/models/common/select-option.model';\r\nimport { CommonOpportunityService } from 'src/app/services/common/opportunity/opportunity.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { OppFilterModel } from 'src/app/models/common/filter.model';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\r\n\r\n@Component({\r\n  selector: 'app-filter-opportunity',\r\n  templateUrl: './filter-opportunity.component.html',\r\n  styleUrls: ['./filter-opportunity.component.scss'],\r\n})\r\nexport class FilterOpportunityComponent implements OnInit {\r\n  filterForm: FormGroup;\r\n  @Input() filterObj: OppFilterModel;\r\n  sources: SelectOption[];\r\n  starred = this.opportunitySrvc.getStarredFilterOptions();\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private opportunitySrvc: CommonOpportunityService,\r\n    private formBuilder: FormBuilder,\r\n    private translate: TranslateService\r\n  ) {\r\n    this.filterForm = this.initFilterForm();\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (!this.filterObj) {\r\n      this.reset();\r\n    } else {\r\n      this.updateForm();\r\n    }\r\n  }\r\n\r\n  private initFilterForm(): FormGroup {\r\n    const oppForm = this.formBuilder.group({\r\n      source: [''],\r\n      starred: [''],\r\n      startDate: [''],\r\n      endDate: [''],\r\n      withOpenBookings: [false],\r\n      withPendingTasks: [false],\r\n      withAppointment: [false],\r\n    });\r\n    return oppForm;\r\n  }\r\n\r\n  getData() {}\r\n\r\n  reset() {\r\n    this.filterObj = {\r\n      tdStatus: 'all',\r\n      oppStatus: 'all',\r\n      leadStatus: 'all',\r\n      oppSource: '',\r\n      starredOpp: 'All',\r\n      startDate: '',\r\n      endDate: '',\r\n      withOpenBookings: false,\r\n      withAppointment: false,\r\n      withPendingTasks: false,\r\n    };\r\n    this.updateForm();\r\n  }\r\n\r\n  updateForm() {\r\n    if (this.filterForm) {\r\n      this.filterForm.reset(\r\n        {\r\n          source: this.filterObj.oppSource,\r\n          starred: this.filterObj.starredOpp,\r\n          startDate: this.filterObj.startDate,\r\n          endDate: this.filterObj.endDate,\r\n          withOpenBookings: this.filterObj.withOpenBookings,\r\n          withPendingTasks: this.filterObj.withPendingTasks,\r\n          withAppointment: this.filterObj.withAppointment,\r\n        },\r\n        { emitEvent: true }\r\n      );\r\n    }\r\n  }\r\n\r\n  apply() {\r\n    this.modalCtrl.dismiss(this.filterObj);\r\n  }\r\n\r\n  cancel() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n  getOpenIcon() {\r\n    if (this.filterObj.oppStatus === 'open') {\r\n      return 'assets/icon/opportunity/unlock.svg';\r\n    } else {\r\n      return 'assets/icon/opportunity/unlock-disabled.svg';\r\n    }\r\n  }\r\n\r\n  getUpcomingIcon() {\r\n    if (this.filterObj.tdStatus === 'upcoming') {\r\n      return 'assets/icon/opportunity/upcoming.svg';\r\n    } else {\r\n      return 'assets/icon/opportunity/upcoming-disabled.svg';\r\n    }\r\n  }\r\n\r\n  updateOppStatus(type: string) {\r\n    if (type === 'open') {\r\n      this.filterObj.oppStatus = 'open';\r\n    } else if (type === 'deferred') {\r\n      this.filterObj.oppStatus = 'deferred';\r\n    } else if (type === 'all') {\r\n      this.filterObj.oppStatus = 'all';\r\n    } else {\r\n      this.filterObj.oppStatus = 'won';\r\n    }\r\n  }\r\n\r\n  updateLeadStatus(type: string) {\r\n    if (type === 'cold') {\r\n      this.filterObj.leadStatus = 'cold';\r\n    } else if (type === 'hot') {\r\n      this.filterObj.leadStatus = 'hot';\r\n    } else if (type === 'all') {\r\n      this.filterObj.leadStatus = 'all';\r\n    } else {\r\n      this.filterObj.leadStatus = 'warm';\r\n    }\r\n  }\r\n\r\n  updateTdStatus(type: string) {\r\n    if (type === 'ongoing') {\r\n      this.filterObj.tdStatus = 'ongoing';\r\n    } else if (type === 'upcoming') {\r\n      this.filterObj.tdStatus = 'upcoming';\r\n    } else if (type === 'all') {\r\n      this.filterObj.tdStatus = 'all';\r\n    } else {\r\n      this.filterObj.tdStatus = 'completed';\r\n    }\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"showFilter()\">\r\n        <ion-icon slot=\"icon-only\" name=\"funnel\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{\"OpportunityTab_Opportunity\"|translate}}</ion-title>\r\n  </ion-toolbar>\r\n  <ion-toolbar>\r\n    <ion-searchbar\r\n      class=\"ion-margin-top\"\r\n      search-icon=\"\"\r\n      debounce=\"500\"\r\n      [(ngModel)]=\"searchInput\"\r\n      placeholder=\"{{'OpportunityTab_Search'|translate}}\"\r\n      (ionChange)=\"search()\"\r\n    >\r\n    </ion-searchbar>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <ion-item *ngIf=\"isLoadingRecent\" class=\"ion-text-center\" lines=\"none\">\r\n    <ion-label class=\"ion-text-center\">\r\n      <ion-spinner></ion-spinner>\r\n    </ion-label>\r\n  </ion-item>\r\n  <ion-grid class=\"ion-margin border-radius\" *ngIf=\"opp\">\r\n    <ion-row class=\"ion-margin-bottom\" *ngFor=\"let item of opp\" (click)=\"goToOpportunity(item)\">\r\n      <ion-col>\r\n        <ion-text class=\"ion-margin-bottom\">\r\n          <ion-label color=\"primary\"><b>{{ item?.Type }}</b></ion-label\r\n          ><br />\r\n          <ion-label color=\"primary\">{{ item?.ContactName }}</ion-label>\r\n        </ion-text>\r\n        <div class=\"bottom-icon\">\r\n          <ion-icon name=\"flame\" color=\"{{ getColor(item?.Warmth) }}\" *ngIf=\"item?.Type === 'OPEN' && countryCode === 'my'\"></ion-icon>\r\n          <ion-icon class=\"big-icon\" name=\"{{ getFavIcon(item) }}\" color=\"primary\" *ngIf=\"countryCode === 'my'\"></ion-icon>\r\n        </div>\r\n      </ion-col>\r\n      <ion-col class=\"ion-text-start\">\r\n        <!-- <div *ngFor=\"let model of item?.ModelInterest\">\r\n            <ion-label> {{ model?.label }} </ion-label>\r\n            <br />\r\n          </div> -->\r\n        <ion-label>{{ item?.Source }}</ion-label><br />\r\n        <ion-label> {{ item?.CreatedDate | date: \"dd MMM y h:mm a\" }} </ion-label>\r\n        <br />\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n\r\n  <ion-infinite-scroll (ionInfinite)=\"doInfinite($event)\">\r\n    <ion-infinite-scroll-content loadingSpinner=\"bubbles\" loadingText=\"Loading more data...\"></ion-infinite-scroll-content>\r\n  </ion-infinite-scroll>\r\n</ion-content>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OppListPage } from './opp-list.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OppListPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OppListPageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, ModalController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { from, Observable } from 'rxjs';\r\nimport { mergeMap, tap } from 'rxjs/operators';\r\nimport { OppFilterModel } from 'src/app/models/common/filter.model';\r\nimport { InfiniteScrollModel } from 'src/app/models/common/infinite-scroll.model';\r\nimport { Opportunity } from 'src/app/models/common/opportunity.model';\r\nimport { CommonOpportunityService } from 'src/app/services/common/opportunity/opportunity.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { OpportunityDetailsPageRoutingKeys } from '../../opportunity/opportunity-details/opportunity-details-routing.keys';\r\nimport { FilterOpportunityComponent } from './component/filter-opportunity/filter-opportunity.component';\r\n\r\n@Component({\r\n  selector: 'app-opp-list',\r\n  templateUrl: './opp-list.page.html',\r\n  styleUrls: ['./opp-list.page.scss'],\r\n})\r\nexport class OppListPage implements OnInit {\r\n  infOpp: Observable<InfiniteScrollModel<Opportunity[]>>;\r\n  searchInput: string;\r\n  opp: Opportunity[];\r\n  filterObj: OppFilterModel;\r\n  countryCode = environment.countryCode;\r\n  isLoadingRecent = false;\r\n\r\n  constructor(\r\n    private opportunityService: CommonOpportunityService,\r\n    private router: Router,\r\n    private modalCtrl: ModalController,\r\n    private translate: TranslateService,\r\n    private loadingCtrl: LoadingController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.getOpportunities(null);\r\n  }\r\n\r\n  getOpportunities(filter: OppFilterModel) {\r\n    this.isLoadingRecent = true;\r\n    this.opportunityService\r\n      .getOppInfinite()\r\n      .pipe(\r\n        tap(\r\n          (e) => {\r\n            this.infOpp = e.next;\r\n            this.opp = e.result;\r\n            this.isLoadingRecent = false;\r\n          },\r\n          (err) => {\r\n            this.isLoadingRecent = false;\r\n          }\r\n        )\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  search() {\r\n    if (this.searchInput && this.searchInput.trim()) {\r\n      this.translate\r\n        .get('Common_Loading')\r\n        .pipe(\r\n          mergeMap((lang) => {\r\n            return from(\r\n              this.loadingCtrl.create({\r\n                message: lang,\r\n              })\r\n            );\r\n          }),\r\n          mergeMap((loading) => {\r\n            loading.present();\r\n            return this.opportunityService.getOppInfinite(this.searchInput).pipe(\r\n              tap(\r\n                (e) => {\r\n                  this.infOpp = e.next;\r\n                  this.opp = e.result;\r\n                  console.log(this.opp);\r\n                  loading.dismiss();\r\n                },\r\n                (err) => {\r\n                  loading.dismiss();\r\n                }\r\n              )\r\n            );\r\n          })\r\n        )\r\n        .subscribe();\r\n    } else {\r\n      this.getOpportunities(null);\r\n    }\r\n  }\r\n\r\n  getColor(warmth: number) {\r\n    if (warmth === 100) {\r\n      return 'danger';\r\n    } else if (warmth < 1) {\r\n      return 'secondary';\r\n    } else {\r\n      return 'warning';\r\n    }\r\n  }\r\n\r\n  goToOpportunity(opp: Opportunity) {\r\n    this.router.navigate([`${OpportunityDetailsPageRoutingKeys.BASE}/` + opp.Id]);\r\n  }\r\n\r\n  getFavIcon(opp: Opportunity) {\r\n    if (opp.Flag) {\r\n      return 'star';\r\n    } else {\r\n      return 'star-outline';\r\n    }\r\n  }\r\n\r\n  showFilter() {\r\n    from(\r\n      this.modalCtrl.create({\r\n        component: FilterOpportunityComponent,\r\n        backdropDismiss: false,\r\n        animated: true,\r\n        cssClass: 'full-screen',\r\n        componentProps: {\r\n          filterObj: this.filterObj ? Object.assign({}, this.filterObj) : null,\r\n        },\r\n      })\r\n    ).subscribe((modal) => {\r\n      from(modal.onDidDismiss()).subscribe((res: any) => {\r\n        if (res && res.data) {\r\n          this.filterObj = res.data;\r\n          this.getOpportunities(this.filterObj);\r\n        }\r\n      });\r\n      modal.present();\r\n    });\r\n  }\r\n\r\n  doInfinite(event) {\r\n    if (!this.infOpp) {\r\n      event.target.disabled = true;\r\n      return;\r\n    }\r\n    this.infOpp.subscribe(\r\n      (res) => {\r\n        this.opp = this.opp.concat(res.result);\r\n        this.infOpp = res.next;\r\n        event.target.complete();\r\n      },\r\n      (err) => {\r\n        // this.errService.logError(err);\r\n        // this.errService.presentServerErr(err);\r\n      }\r\n    );\r\n    // this.infOpp.next.pipe(\r\n    //   tap((res) => {\r\n    //     if (res.result) {\r\n    //       this.opp.push(...res.result);\r\n    //       this.infOpp = res;\r\n    //     } else {\r\n    //       event.target.disabled = true;\r\n    //     }\r\n    //   })\r\n    // ).subscribe();\r\n    // event.target.complete();\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FilterOpportunityComponent } from './component/filter-opportunity/filter-opportunity.component';\r\nimport { OppListPageRoutingModule } from './opp-list-routing.module';\r\nimport { OppListPage } from './opp-list.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, IonicModule, OppListPageRoutingModule, TranslateModule],\r\n  declarations: [OppListPage, FilterOpportunityComponent],\r\n})\r\nexport class OppListPageModule {}\r\n"],"sourceRoot":"webpack:///"}