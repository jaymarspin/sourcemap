{"version":3,"sources":["./src/app/services/common/document/document.service.ts","./src/app/pages/contact/view-contact/components/common/info-segment/info-segment.component.html","./src/app/pages/contact/view-contact/components/common/info-segment/info-segment.component.ts","./src/app/components/common/doc-upload-modal/doc-upload-modal.component.html","./src/app/components/common/doc-upload-modal/doc-upload-modal.component.ts","./src/app/pages/contact/view-contact/components/common/document-segment/document-segment.component.html","./src/app/pages/contact/view-contact/components/common/document-segment/document-segment.component.ts","./src/app/pages/contact/view-contact/components/common/opportunity-segment/opportunity-segment.component.html","./src/app/pages/contact/view-contact/components/common/opportunity-segment/opportunity-segment.component.ts","./src/app/pages/contact/view-contact/view-contact.page.html","./src/app/pages/contact/view-contact/view-contact.page.ts","./src/app/pages/contact/view-contact/view-contact-routing.module.ts","./src/app/components/common/doc-upload-modal/doc-upload-modal.module.ts","./src/app/pages/contact/view-contact/view-contact.module.ts"],"names":["CommonDocumentService","documentAPI","errorSrvc","contactId","this","getDocList","e","presentServerErr","getDocTypes","InfoSegmentComponent","showMoreInfo","DocUploadModalComponent","modalCtrl","documentService","documentTypes","dismiss","DocumentSegmentComponent","translate","from","create","component","cssClass","backdropDismiss","subscribe","modal","present","uploadFile","OpportunitySegmentComponent","router","countryCode","environment","warmth","opp","Flag","state","Object","ContactId","contact","Id","ContactName","Name","STATE_OPP","navigate","BASE","PARAM_ID","id","addOpp","ViewContactPage","navCtrl","route","contactService","opportunityService","opportunityServiceSG","loadingCtrl","platform","taskService","subs","Subscription","segment","task","ready","then","pause","resume","window","contactBtn","getTaskRT","res","insertTask","unsubscribe","medium","recordTypeid","TaskName","Status","DueDate","Date","toString","PersonContactId","RecordTypeId","get","pipe","mergeMap","lang","message","loading","upsertTask","tap","err","add","parseURL","paramMap","params","getContactInfo","navigateForward","forkJoin","getContactById","console","log","getContactVehicleById","vehOwnership","documents","getOpportunities","opportunities","editContact","contactMedium","routes","path","children","pathMatch","ViewContactPageRoutingModule","forChild","DocUploadModalComponentModule","ViewContactPageModule"],"mappings":"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","file":"18.6d4ba534b81568d0fe8b.js","sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { IDocumentsApi } from 'src/app/interfaces/document-api.interface';\r\nimport { DOCUMENT_SERVICE_KEY } from 'src/app/service-providers/dynamic-key.provider';\r\nimport { Observable } from 'rxjs';\r\nimport { Document } from 'src/app/models/common/document.model';\r\nimport { ErrorService } from '../error/error.service';\r\nimport { SelectOption } from 'src/app/models/common/select-option.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CommonDocumentService implements IDocumentsApi {\r\n  constructor(@Inject(DOCUMENT_SERVICE_KEY) private documentAPI: IDocumentsApi, private errorSrvc: ErrorService) {}\r\n\r\n  getDocList(contactId: string): Observable<Document[]> {\r\n    try {\r\n      return this.documentAPI.getDocList(contactId);\r\n    } catch (e) {\r\n      this.errorSrvc.presentServerErr(e);\r\n    }\r\n  }\r\n\r\n  getDocTypes(): SelectOption[] {\r\n    return this.documentAPI.getDocTypes();\r\n  }\r\n}\r\n","<ion-grid class=\"ion-margin ion-no-padding ion-margin-top\">\r\n  <ion-row>\r\n    <ion-col>\r\n      <ion-item lines=\"none\" class=\"border-top\">\r\n        <ion-label position=\"stacked\">{{ 'ViewContactPage_Mobile' | translate }}</ion-label>\r\n        <ion-input type=\"text\" readonly value=\"{{ contact?.MobileNo }}\"></ion-input>\r\n      </ion-item>\r\n    </ion-col>\r\n  </ion-row>\r\n  <ion-row>\r\n    <ion-col>\r\n      <ion-item lines=\"none\" class=\"border-bottom\">\r\n        <ion-label position=\"stacked\">\r\n          {{ 'ViewContactPage_Address' | translate }}\r\n        </ion-label>\r\n        <ion-input type=\"text\" readonly value=\"{{ contact?.Line1 }}\"></ion-input>\r\n        <ion-input type=\"text\" readonly value=\"{{ contact?.Line2 }}\"></ion-input>\r\n      </ion-item>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-grid>\r\n<ion-grid class=\"ion-margin ion-no-padding ion-margin-top\">\r\n  <ng-container *ngIf=\"showMoreInfo\">\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-item lines=\"none\" class=\"border-top\">\r\n          <ion-label position=\"stacked\">\r\n            {{ 'ViewContactPage_IDNumber' | translate }}\r\n          </ion-label>\r\n          <ion-icon slot=\"end\" name=\"close\" (click)=\"showMore()\"></ion-icon>\r\n          <ion-input type=\"text\" readonly value=\"{{ contact.DocNum }}\"></ion-input>\r\n        </ion-item>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-item lines=\"none\">\r\n          <ion-label position=\"stacked\">\r\n            {{ 'ViewContactPage_Race' | translate }}\r\n          </ion-label>\r\n          <ion-input type=\"text\" readonly value=\"{{ contact.Race }}\"></ion-input>\r\n        </ion-item>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-item lines=\"none\" class=\"border-bottom\">\r\n          <ion-label position=\"stacked\">\r\n            {{ 'ViewContactPage_Gender' | translate }}\r\n          </ion-label>\r\n          <ion-input type=\"text\" readonly value=\"{{ contact.Gender }}\"></ion-input>\r\n        </ion-item>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ng-container>\r\n  <ion-row>\r\n    <ion-col size=\"12\">\r\n      <ion-button expand=\"block\" fill=\"outline\" (click)=\"showMore()\" *ngIf=\"!showMoreInfo\">\r\n        {{ 'ViewContactPage_ViewMore' | translate }}\r\n      </ion-button>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <hr />\r\n  <ion-grid>\r\n    <ion-row class=\"ion-margin-bottom ion-padding bg-white\" *ngFor=\"let veh of vehicles\">\r\n      <ion-col>\r\n        <ion-label color=\"primary\"\r\n          ><b>{{ veh?.PlateNumber }}</b></ion-label\r\n        >\r\n      </ion-col>\r\n      <ion-col class=\"ion-text-end\" size=\"8\">\r\n        <ion-label class=\"right-details\">{{ veh?.Vehicle }}</ion-label>\r\n        <ion-label class=\"right-details\">{{ veh?.PurchasedDate | date: 'dd MMM y' }}</ion-label>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n\r\n  <!-- <div class=\"ion-margin-top ion-padding ion-margin ion-text-center border\">\r\n  <ion-icon name=\"add-circle\" color=\"primary\" class=\"add-icon\"></ion-icon>\r\n  <ion-label color=\"primary\">\r\n    {{ \"ViewContactPage_VehicleOwnership\" | translate }}\r\n  </ion-label>\r\n</div>\r\n<ion-button class=\"ion-margin\" expand=\"block\" fill=\"outline\" disabled>\r\n  {{ \"ViewContactPage_ViewMore\" | translate }}\r\n</ion-button> -->\r\n</ion-grid>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { ContactModel } from 'src/app/models/common/contact.model';\r\nimport { VehicleOwnership } from 'src/app/models/common/vehicle-ownership.model';\r\n\r\n@Component({\r\n  selector: 'app-info-segment',\r\n  templateUrl: './info-segment.component.html',\r\n  styleUrls: ['./info-segment.component.scss'],\r\n})\r\nexport class InfoSegmentComponent implements OnInit {\r\n  showMoreInfo = false;\r\n  @Input() contact: ContactModel;\r\n  @Input() vehicles: VehicleOwnership[];\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit() {}\r\n\r\n  showMore() {\r\n    this.showMoreInfo = !this.showMoreInfo;\r\n  }\r\n}\r\n","<ion-content class=\"ion-padding\">\r\n  <div class=\"ion-text-center\">\r\n    <ion-label>\r\n      <h3>{{ 'ViewContactPage_AddFile' | translate }}</h3>\r\n    </ion-label>\r\n  </div>\r\n  <ion-grid class=\"ion-no-margin ion-no-padding ion-margin-top\">\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-item lines=\"none\">\r\n          <ion-select placeholder=\"{{ 'ViewContactPage_SelectFileType' | translate }}\">\r\n            <ion-select-option [value]=\"opt.value\" *ngFor=\"let opt of documentTypes\">\r\n              {{ opt.label }}\r\n            </ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-item lines=\"none\" class=\"ion-margin-top\">\r\n          <ion-input placeholder=\"{{ 'ViewContactPage_FileName' | translate }}\"></ion-input>\r\n        </ion-item>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-content>\r\n<ion-footer class=\"ion-no-border\">\r\n  <ion-grid class=\"ion-no-margin ion-no-padding\">\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-button expand=\"block\" class=\"ion-no-padding ion-no-margin\" (click)=\"dismiss()\">\r\n          {{ 'Common_Cancel' | translate }}\r\n        </ion-button>\r\n      </ion-col>\r\n      <ion-col>\r\n        <ion-button expand=\"block\" class=\"ion-no-padding ion-no-margin\">\r\n          {{ 'Common_OK' | translate }}\r\n        </ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-footer>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { CommonDocumentService } from 'src/app/services/common/document/document.service';\r\n\r\n@Component({\r\n  selector: 'app-doc-upload-modal',\r\n  templateUrl: './doc-upload-modal.component.html',\r\n  styleUrls: ['./doc-upload-modal.component.scss'],\r\n})\r\nexport class DocUploadModalComponent implements OnInit {\r\n  documentTypes = this.documentService.getDocTypes();\r\n\r\n  constructor(private modalCtrl: ModalController, private documentService: CommonDocumentService) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  dismiss() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n}\r\n","<div class=\"ion-margin-top ion-padding ion-margin ion-text-center border\" (click)=\"uploadFile()\">\r\n  <ion-icon name=\"add-circle\" color=\"primary\" class=\"add-icon\"></ion-icon>\r\n  <ion-label color=\"primary\">\r\n    {{ 'ViewContactPage_AddFiles' | translate }}\r\n  </ion-label>\r\n</div>\r\n<div class=\"ion-margin border-radius\" *ngFor=\"let doc of documents\">\r\n  <ion-grid class=\"ion-no-margin\">\r\n    <ion-row>\r\n      <ion-col>\r\n        <ion-label color=\"primary\"\r\n          ><b>{{ doc?.Type }}</b></ion-label\r\n        >\r\n      </ion-col>\r\n      <ion-col class=\"ion-text-end\" size=\"7\">\r\n        <ion-label>{{ doc?.Name }}</ion-label\r\n        ><br />\r\n        <ion-label>{{ doc?.Number }}</ion-label\r\n        ><br />\r\n        <ion-label>{{ doc?.UploadedDate | date: 'dd MMM y h:mm a' }}</ion-label>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</div>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Document } from 'src/app/models/common/document.model';\r\nimport { from } from 'rxjs';\r\nimport { DocUploadModalComponent } from 'src/app/components/common/doc-upload-modal/doc-upload-modal.component';\r\n\r\n@Component({\r\n  selector: 'app-document-segment',\r\n  templateUrl: './document-segment.component.html',\r\n  styleUrls: ['./document-segment.component.scss'],\r\n})\r\nexport class DocumentSegmentComponent implements OnInit {\r\n  @Input() documents: Document[];\r\n\r\n  constructor(private modalCtrl: ModalController, private translate: TranslateService) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  uploadFile() {\r\n    from(\r\n      this.modalCtrl.create({\r\n        component: DocUploadModalComponent,\r\n        cssClass: 'document-upload-modal',\r\n        backdropDismiss: true,\r\n      })\r\n    ).subscribe((modal) => {\r\n      modal.present();\r\n    });\r\n  }\r\n}\r\n","<ion-grid>\r\n  <ion-row class=\"border ion-margin-top ion-padding ion-margin ion-text-center bg-white\" (click)=\"addOpp()\">\r\n    <ion-col size=\"12\">\r\n      <ion-icon name=\"add-circle\" color=\"primary\" class=\"add-icon\"></ion-icon>\r\n      <ion-label color=\"primary\">\r\n        {{ 'ViewContactPage_AddOpportunity' | translate }}\r\n      </ion-label>\r\n    </ion-col>\r\n  </ion-row>\r\n\r\n  <ion-row class=\"ion-margin ion-padding border-radius bg-white\" *ngFor=\"let item of opp\" (click)=\"viewOpp(item.Id)\">\r\n    <ion-col>\r\n      <ion-label color=\"primary\" class=\"clear-parameters\">\r\n        <b>{{ item?.Type }}</b>\r\n      </ion-label>\r\n      <ion-label>{{ item?.Stage }}</ion-label>\r\n      <ion-icon name=\"flame\" color=\"{{ getColor(item?.Warmth) }}\" *ngIf=\"item?.Type === 'OPEN' && countryCode == 'my'\" class=\"bottom-icon\"></ion-icon>\r\n      <ion-icon name=\"{{ getFavIcon(item) }}\" color=\"primary\" *ngIf=\"countryCode == 'my'\"></ion-icon>\r\n    </ion-col>\r\n    <ion-col class=\"ion-text-end\">\r\n      <ng-container *ngFor=\"let model of item?.ModelInterest\">\r\n        <ion-label class=\"clear-parameters\"> {{ model }} </ion-label>\r\n      </ng-container>\r\n      <ion-label>{{ 'ViewContactPage_CreatedOn' | translate }}{{ item?.CreatedDate | date: 'dd MMM y':'+0800' }} </ion-label>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-grid>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Opportunity } from 'src/app/models/common/opportunity.model';\r\nimport { ContactModel } from 'src/app/models/common/contact.model';\r\nimport { EditOpportunityPageRoutingKeys } from 'src/app/pages/opportunity/edit-opportunity/edit-opportunity.keys';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\nimport { OpportunityDetailsPageRoutingKeys } from 'src/app/pages/opportunity/opportunity-details/opportunity-details-routing.keys';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-opportunity-segment',\r\n  templateUrl: './opportunity-segment.component.html',\r\n  styleUrls: ['./opportunity-segment.component.scss'],\r\n})\r\nexport class OpportunitySegmentComponent implements OnInit {\r\n  @Input() opp: Opportunity[];\r\n  @Input() contact: ContactModel;\r\n  countryCode = environment.countryCode;\r\n\r\n  constructor(private router: Router) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  getColor(warmth: number) {\r\n    if (warmth === 100) {\r\n      return 'danger';\r\n    } else if (warmth < 1) {\r\n      return 'secondary';\r\n    } else {\r\n      return 'warning';\r\n    }\r\n  }\r\n\r\n  getFavIcon(opp: Opportunity) {\r\n    if (opp.Flag) {\r\n      return 'star';\r\n    } else {\r\n      return 'star-outline';\r\n    }\r\n  }\r\n\r\n  addOpp() {\r\n    const state = new Object();\r\n    const opp = new Opportunity();\r\n    opp.ContactId = this.contact.Id;\r\n    opp.ContactName = this.contact.Name;\r\n    state[EditOpportunityPageRoutingKeys.STATE_OPP] = opp;\r\n    const navigationExtras: NavigationExtras = {\r\n      state,\r\n    };\r\n    this.router.navigate([`${EditOpportunityPageRoutingKeys.BASE}/${EditOpportunityPageRoutingKeys.PARAM_ID}`], navigationExtras);\r\n  }\r\n\r\n  viewOpp(id: string) {\r\n    this.router.navigate([`${OpportunityDetailsPageRoutingKeys.BASE}/` + id]);\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"\" text=\"{{'Common_Back'|translate}}\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-buttons slot=\"end\" (click)=\"editContact()\">\r\n      <ion-button>{{'Common_Edit'|translate}}</ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{\"ViewContactPage_Contact\"|translate}}</ion-title>\r\n  </ion-toolbar>\r\n  <ion-toolbar mode=\"md\" class=\"ion-text-center\">\r\n    <ion-grid class=\"ion-margin-bottom ion-margin-top\">\r\n      <ion-row>\r\n        <ion-col size=\"12\">\r\n          <ion-text>\r\n            <h2>{{contact?.Name}}</h2>\r\n          </ion-text>\r\n          <ion-icon name=\"heart\" color=\"primary\" class=\"heart\" *ngIf=\"contact?.Flag\"></ion-icon>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-text>{{contact?.CompanyName}}</ion-text>\r\n \r\n        \r\n          <ion-row class=\"ion-no-margin ion-no-padding\">\r\n            <ion-col class=\"header-btn\">\r\n  \r\n                <a href=\"sms:{{contact?.MobileNo}}\" (click)=\"contactMedium('SMS')\">\r\n                  <span>\r\n                    <ion-icon name=\"chatbubbles\" color=\"primary\"></ion-icon>\r\n                  </span>\r\n                 \r\n                    <ion-label class=\"mat-small\">\r\n                      {{\"ViewContactPage_Message\"|translate}}\r\n                    </ion-label>\r\n               \r\n                </a>\r\n           \r\n            </ion-col>\r\n            <ion-col class=\"header-btn\">\r\n        \r\n                <a href=\"tel:{{contact?.MobileNo}}\" (click)=\"contactMedium('Phone Call')\">\r\n                  <span>\r\n                    <ion-icon name=\"call\" color=\"primary\"></ion-icon>\r\n                  </span>\r\n            \r\n                    <ion-label class=\"mat-small\">\r\n                      {{\"ViewContactPage_Call\"|translate}}\r\n                    </ion-label>\r\n          \r\n                </a>\r\n \r\n            </ion-col>\r\n            <ion-col class=\"header-btn\">\r\n         \r\n                <a href=\"http://wa.me/{{contact?.CountryCode + contact?.MobileNo}}\" (click)=\"contactMedium('Whatsapp')\">\r\n                  <span>\r\n                    <ion-icon name=\"logo-whatsapp\" color=\"primary\"></ion-icon>\r\n                  </span>\r\n                \r\n                    <ion-label class=\"mat-small\">\r\n                      {{\"ViewContactPage_Whatsapp\"|translate}}\r\n                    </ion-label>\r\n               \r\n                </a>\r\n       \r\n            </ion-col>\r\n            <ion-col class=\"header-btn\">\r\n              \r\n                <a href=\"mailto:{{contact?.Email}}\" (click)=\"contactMedium('Email')\">\r\n                  <span>\r\n                    <ion-icon name=\"mail\" color=\"primary\"></ion-icon>\r\n                  </span>\r\n               \r\n                    <ion-label class=\"mat-small\">\r\n                      {{\"ViewContactPage_Email\"|translate}}\r\n                    </ion-label>\r\n               \r\n                </a>\r\n         \r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n   \r\n    \r\n  </ion-toolbar>\r\n  <ion-toolbar mode=\"ios\">\r\n    <ion-segment mode=\"ios\" [(ngModel)]=\"segment\" class=\"ion-no-margin\">\r\n      <ion-segment-button value=\"info\">\r\n        <ion-label> {{\"ViewContactPage_Info\"|translate}} </ion-label>\r\n      </ion-segment-button>\r\n      <!-- <ion-segment-button value=\"document\">\r\n        <ion-label> {{\"ViewContactPage_Document\"|translate}} </ion-label>\r\n      </ion-segment-button> -->\r\n      <ion-segment-button value=\"opportunity\">\r\n        <ion-label>\r\n          {{\"ViewContactPage_Opportunity\"|translate}}\r\n          <!-- <span class=\"dot\"></span> -->\r\n        </ion-label>\r\n      </ion-segment-button>\r\n    </ion-segment>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <!-- INFO -->\r\n  <ng-container *ngIf=\"segment === 'info'\">\r\n    <app-info-segment [contact]=\"contact\" [vehicles]=\"vehOwnership\"></app-info-segment>\r\n  </ng-container>\r\n  <!-- DOCUMENT -->\r\n  <ng-container *ngIf=\"segment === 'document'\">\r\n    <app-document-segment [documents]=\"documents\"></app-document-segment>\r\n  </ng-container>\r\n  <!-- OPPORTUNITY -->\r\n  <ng-container *ngIf=\"segment === 'opportunity'\">\r\n    <app-opportunity-segment [opp]=\"opportunities\" [contact]=\"contact\"></app-opportunity-segment>\r\n  </ng-container>\r\n</ion-content>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { LoadingController, NavController, Platform } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { forkJoin, from, Subscription } from 'rxjs';\r\nimport { mergeMap, tap } from 'rxjs/operators';\r\nimport { ContactModel } from 'src/app/models/common/contact.model';\r\nimport { Document } from 'src/app/models/common/document.model';\r\nimport { Opportunity } from 'src/app/models/common/opportunity.model';\r\nimport { Task } from 'src/app/models/common/task.model';\r\nimport { VehicleOwnership } from 'src/app/models/common/vehicle-ownership.model';\r\nimport { CommonContactService } from 'src/app/services/common/contact/contact.service';\r\nimport { CommonDocumentService } from 'src/app/services/common/document/document.service';\r\nimport { CommonOpportunityService } from 'src/app/services/common/opportunity/opportunity.service';\r\nimport { CommonTaskService } from 'src/app/services/common/task/task.service';\r\nimport { OpportunityServiceSG } from 'src/app/services/sg/opportunity/opportunity-sg.service';\r\nimport { EditContactPageRoutingKeys } from '../edit-contact/edit-contact-routing.keys';\r\n@Component({\r\n  selector: 'app-view-contact',\r\n  templateUrl: './view-contact.page.html',\r\n  styleUrls: ['./view-contact.page.scss'],\r\n})\r\nexport class ViewContactPage implements OnInit {\r\n  private subs = new Subscription();\r\n  contact: ContactModel;\r\n  vehOwnership: VehicleOwnership[];\r\n  documents: Document[];\r\n  opportunities: Opportunity[];\r\n  segment = 'info';\r\n\r\n  pause: any;\r\n  resume: any;\r\n  task = new Task();\r\n  contactBtn: string;\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private route: ActivatedRoute,\r\n    private contactService: CommonContactService,\r\n    private documentService: CommonDocumentService,\r\n    private opportunityService: CommonOpportunityService,\r\n    private opportunityServiceSG: OpportunityServiceSG,\r\n    private loadingCtrl: LoadingController,\r\n    private translate: TranslateService,\r\n    public platform: Platform,\r\n    private taskService: CommonTaskService\r\n  ) {\r\n\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n\r\n    this.platform.ready().then(() => {\r\n\r\n      this.pause = this.platform.pause.subscribe(() => {\r\n\r\n      });\r\n      this.resume = this.platform.resume.subscribe(() => {\r\n        window['paused'] = 0;\r\n        if (this.contactBtn) {\r\n          this.opportunityServiceSG.getTaskRT().subscribe(res => {\r\n\r\n            this.insertTask(res)\r\n          })\r\n        }\r\n\r\n\r\n      });\r\n\r\n    });\r\n  }\r\n  ionViewWillLeave() {\r\n\r\n    this.pause.unsubscribe();\r\n\r\n\r\n    this.resume.unsubscribe();\r\n  }\r\n  contactMedium(medium: string) {\r\n    this.contactBtn = medium\r\n  }\r\n\r\n  insertTask(recordTypeid) {\r\n\r\n    this.task.TaskName = `Contacted Customer Via ${this.contactBtn} in Moby Sales 2.0`\r\n    this.task.Status = `Completed`\r\n    this.task.DueDate = new Date().toString();\r\n    this.task.Id = null\r\n    this.task.ContactId = this.contact.PersonContactId\r\n    this.task.RecordTypeId = recordTypeid\r\n    this.translate\r\n      .get('Common_Saving')\r\n      .pipe(\r\n        mergeMap((lang) => {\r\n          return from(\r\n            this.loadingCtrl.create({\r\n              message: lang,\r\n            })\r\n          );\r\n        }),\r\n        mergeMap((loading) => {\r\n          loading.present();\r\n          return this.taskService.upsertTask(this.task).pipe(\r\n            tap(\r\n              (e) => {\r\n                delete (this.contactBtn)\r\n                loading.dismiss();\r\n\r\n              },\r\n              (err) => {\r\n                loading.dismiss();\r\n              }\r\n            )\r\n          );\r\n        })\r\n      )\r\n      .subscribe((e) => {\r\n\r\n      });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subs.add(this.parseURL());\r\n  }\r\n\r\n  parseURL() {\r\n    this.contact = new ContactModel();\r\n    return this.route.paramMap.subscribe((params) => {\r\n      this.contact.Id = params.get(EditContactPageRoutingKeys.PARAM_ID);\r\n      this.getContactInfo(this.contact.Id);\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n  editContact() {\r\n    this.navCtrl.navigateForward(EditContactPageRoutingKeys.BASE + '/' + this.contact.Id);\r\n  }\r\n\r\n  getContactInfo(id: string) {\r\n    this.translate\r\n      .get('Common_Loading')\r\n      .pipe(\r\n        mergeMap((lang) => {\r\n          return from(\r\n            this.loadingCtrl.create({\r\n              message: lang,\r\n            })\r\n          );\r\n        }),\r\n        mergeMap((loading) => {\r\n          loading.present();\r\n          return forkJoin([\r\n            this.contactService.getContactById(id).pipe(\r\n              tap((e) => {\r\n                console.log(e);\r\n                this.contact = e;\r\n              })\r\n            ),\r\n            this.contactService.getContactVehicleById(id).pipe(\r\n              tap((e) => {\r\n                this.vehOwnership = e;\r\n              })\r\n            ),\r\n            this.documentService.getDocList(id).pipe(\r\n              tap((e) => {\r\n                this.documents = e;\r\n              })\r\n            ),\r\n            this.opportunityService.getOpportunities(null, id).pipe(\r\n              tap((e) => {\r\n                this.opportunities = e;\r\n              })\r\n            ),\r\n          ]).pipe(\r\n            tap(\r\n              (e) => {\r\n                loading.dismiss();\r\n              },\r\n              (err) => {\r\n                loading.dismiss();\r\n              }\r\n            )\r\n          );\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ViewContactPage } from './view-contact.page';\r\nimport { ViewContactPageRoutingKeys } from './view-contact-routing.keys';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: `:${ViewContactPageRoutingKeys.PARAM_ID}`,\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: ViewContactPage,\r\n        pathMatch: 'full',\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ViewContactPageRoutingModule {}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { ItemErrComponentModule } from '../item-err/item-err.module';\r\nimport { DocUploadModalComponent } from './doc-upload-modal.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, IonicModule, TranslateModule, FormsModule, ReactiveFormsModule, ItemErrComponentModule],\r\n  declarations: [DocUploadModalComponent],\r\n  exports: [DocUploadModalComponent],\r\n  entryComponents: [DocUploadModalComponent],\r\n})\r\nexport class DocUploadModalComponentModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ViewContactPageRoutingModule } from './view-contact-routing.module';\r\n\r\nimport { ViewContactPage } from './view-contact.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { DocumentSegmentComponent } from './components/common/document-segment/document-segment.component';\r\nimport { InfoSegmentComponent } from './components/common/info-segment/info-segment.component';\r\nimport { OpportunitySegmentComponent } from './components/common/opportunity-segment/opportunity-segment.component';\r\nimport { DocUploadModalComponentModule } from 'src/app/components/common/doc-upload-modal/doc-upload-modal.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, TranslateModule, ViewContactPageRoutingModule, DocUploadModalComponentModule],\r\n  declarations: [ViewContactPage, DocumentSegmentComponent, InfoSegmentComponent, OpportunitySegmentComponent],\r\n})\r\nexport class ViewContactPageModule {}\r\n"],"sourceRoot":"webpack:///"}