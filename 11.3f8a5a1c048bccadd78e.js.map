{"version":3,"sources":["./node_modules/rxjs/internal/util/isIterable.js","./node_modules/rxjs/internal/scheduled/scheduleObservable.js","./node_modules/rxjs/internal/scheduled/scheduleArray.js","./node_modules/rxjs/internal/util/subscribeTo.js","./node_modules/rxjs/_esm2015/internal/operators/delay.js","./src/app/models/common/key-scan.model.ts","./src/app/components/common/key-scanner/key-scanner.component.ts","./src/app/components/common/key-scanner/key-scanner.component.html","./src/app/pages/testdrive/view-testdrive/scan-testdrive/scan-testdrive.component.ts","./src/app/pages/testdrive/view-testdrive/scan-testdrive/scan-testdrive.component.html","./node_modules/signature_pad/dist/signature_pad.js","./src/app/components/common/signature/signature.component.html","./src/app/components/common/signature/signature.component.ts","./src/app/components/common/test-drive-indemnity/test-drive-indemnity.component.html","./src/app/components/common/test-drive-indemnity/test-drive-indemnity.component.ts","./src/app/pages/testdrive/view-testdrive/view-testdrive.page.html","./src/app/pages/testdrive/view-testdrive/view-testdrive-routing.module.ts","./src/app/pages/testdrive/view-testdrive/view-testdrive.page.ts","./src/app/components/common/signature/signature.module.ts","./src/app/components/common/test-drive-indemnity/test-drive-indemnity.module.ts","./src/app/components/common/key-scanner/key-scanner.module.ts","./src/app/pages/testdrive/view-testdrive/view-testdrive.module.ts","./node_modules/rxjs/internal/util/isPromise.js","./node_modules/rxjs/internal/util/pipe.js","./node_modules/rxjs/internal/scheduled/scheduled.js","./node_modules/rxjs/internal/Subscriber.js","./node_modules/rxjs/internal/util/isObject.js","./node_modules/rxjs/internal/Observer.js","./node_modules/rxjs/internal/util/isInteropObservable.js","./node_modules/rxjs/internal/util/UnsubscriptionError.js","./node_modules/rxjs/internal/scheduled/scheduleIterable.js","./node_modules/rxjs/internal/util/hostReportError.js","./node_modules/rxjs/internal/util/subscribeToArray.js","./node_modules/rxjs/internal/Observable.js","./node_modules/rxjs/internal/operators/mergeMap.js","./node_modules/rxjs/internal/symbol/iterator.js","./node_modules/rxjs/internal/util/toSubscriber.js","./node_modules/rxjs/internal/util/subscribeToPromise.js","./node_modules/rxjs/internal/observable/from.js","./node_modules/rxjs/internal/util/isArray.js","./node_modules/rxjs/internal/config.js","./node_modules/rxjs/internal/scheduled/schedulePromise.js","./node_modules/rxjs/internal/util/subscribeToObservable.js","./node_modules/rxjs/internal/symbol/rxSubscriber.js","./node_modules/rxjs/internal/util/subscribeToIterable.js","./node_modules/rxjs/internal/util/isFunction.js","./node_modules/rxjs/internal/operators/map.js","./node_modules/rxjs/internal/innerSubscribe.js","./node_modules/rxjs/internal/util/isArrayLike.js","./node_modules/rxjs/internal/util/identity.js","./node_modules/rxjs/internal/util/canReportError.js","./node_modules/rxjs/internal/Subscription.js","./node_modules/rxjs/internal/symbol/observable.js"],"names":["iterator_1","exports","isIterable","input","iterator","Observable_1","Subscription_1","observable_1","scheduleObservable","scheduler","Observable","subscriber","sub","Subscription","add","schedule","observable","subscribe","next","value","error","err","complete","scheduleArray","i","length","closed","this","subscribeToArray_1","subscribeToPromise_1","subscribeToIterable_1","subscribeToObservable_1","isArrayLike_1","isPromise_1","isObject_1","subscribeTo","result","subscribeToObservable","isArrayLike","subscribeToArray","isPromise","subscribeToPromise","subscribeToIterable","isObject","TypeError","DelayOperator","delay","source","Subscriber","destination","super","queue","active","errored","state","time","now","shift","notification","observe","Math","max","unsubscribe","dispatch","message","DelayMessage","push","_schedule","scheduleNotification","Notification","createNext","createComplete","keyscanDT","moment","KeyScannerComponent","qr","el","pop","orientation","scan","subs","lockScreenIfPopover","logError","setTimeout","showCamera","destroy","qrSub","environment","emulator","of","pipe","tap","_","hideBackground","delayFor","isDate","abs","lift","from","show","switchMap","status","showing","Error","distinctUntilChanged","map","res","data","JSON","parse","Object","assign","model","chassis","showBackground","hide","dismissPopover","presentServerErr","pausePreview","getStatus","scanning","useCamera","currentCamera","canEnableLight","lightEnabled","disableLight","enableLight","modelSelection","popover","getTop","dismiss","unlock","document","querySelectorAll","forEach","x","classList","querySelector","origBg","style","getPropertyValue","setProperty","popoverBg","popoverParent","nativeElement","offsetParent","offsetTop","offsetBottom","offsetHeight","backdropBg","background","backdropOpacity","opacity","remove","lock","type","close","toggleLight","reverseCamera","ScanTestdriveComponent","modalCtrl","alertCtrl","translate","formBuilder","tdService","loadingCtrl","tdForm","initTdForm","group","regNo","required","variantName","mileageStart","initErrorMessages","form","get","lang","formErrorMessages","key","keys","controls","create","loading","present","testdrive","Vehicle","MileageStart","startTestdrive","e","component","showBackdrop","cssClass","backdropDismiss","animated","onDidDismiss","popoverData","getVehByRegNo","regNum","setValue","RegNum","ShortDesc","btns","inputs","name","alert","forkJoin","header","text","role","handler","buttons","cancel","qrScanner","search","apply","Point","y","Date","start","sqrt","pow","other","distanceTo","Bezier","startPoint","control2","control1","endPoint","startWidth","endWidth","points","widths","c2","calculateControlPoints","c3","c1","end","s1","s2","s3","dx1","dy1","dx2","dy2","m1","m2","l1","l2","k","tx","ty","px","py","t","cx","point","cy","xdiff","ydiff","SignaturePad","canvas","options","_handleMouseDown","event","which","_mouseButtonDown","_strokeBegin","_handleMouseMove","_strokeMoveUpdate","_handleMouseUp","_strokeEnd","_handleTouchStart","preventDefault","targetTouches","changedTouches","_handleTouchMove","_handleTouchEnd","target","velocityFilterWeight","minWidth","maxWidth","throttle","minDistance","dotSize","penColor","backgroundColor","onBegin","onEnd","fn","wait","storedContext","storedArgs","previous","timeout","later","args","remaining","clearTimeout","window","prototype","_strokeUpdate","_ctx","getContext","clear","on","ctx","fillStyle","clearRect","width","height","fillRect","_data","_reset","_isEmpty","dataUrl","callback","image","Image","ratio","devicePixelRatio","onload","drawImage","onerror","src","encoderOptions","_toSVG","toDataURL","touchAction","msTouchAction","PointerEvent","_handlePointerEvents","_handleMouseEvents","_handleTouchEvents","removeEventListener","pointGroups","_fromData","color","curve","_drawCurve","_drawDot","newPointGroup","_createPoint","clientX","clientY","lastPointGroup","lastPoints","lastPoint","isLastPointTooClose","_addPoint","addEventListener","_lastPoints","_lastVelocity","_lastWidth","rect","getBoundingClientRect","left","top","getTime","unshift","_calculateCurveWidths","fromPoints","velocity","velocityFrom","newWidth","_strokeWidth","moveTo","arc","PI","widthDelta","drawSteps","floor","beginPath","tt","ttt","u","uu","uuu","min","_drawCurveSegment","closePath","fill","drawCurve","drawDot","j","basicPoint","maxX","maxY","svg","createElementNS","setAttribute","toString","path","createElement","isNaN","attr","toFixed","appendChild","circle","body","innerHTML","undefined","dummy","nodes","childNodes","cloneNode","btoa","SignatureComponent","sigBlob","sigTitle","signature","b","getSigBlob","emit","base64ImgData","convertBase64ToBlob","split","formatType","byteString","atob","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","sigElem","TestDriveIndemnityComponent","fb","pdfSign","modal","isSaving","pdpaForm","dataConsent","marketingConsent","needsPDPA","setValidators","requiredTrue","evt","getPDFBlob","pdfBlob","console","log","signPDF","signedPDF","saveSignedPDF","td","valid","values","ctrl","markAsTouched","onlySelf","showSign","getBlankTDPDF","routes","PARAM_ID","children","ViewTestdrivePage","route","router","testdriveSrvc","navCtrl","opener","toastCtrl","errorSrvc","parseURL","mileageEnd","notes","paramMap","params","Id","getData","back","testdriveId","mergeMap","getTestdrivesById","updateForm","MileageEnd","Notes","navigate","BASE","getTNCTerms","terms","componentProps","pdpaTerms","tdTerms","getSignedTDPDF","fileEntry","open","toURL","placeholder","endMileage","loadLang","remarks","endTestdrive","Status","toLocaleLowerCase","invalid","printTD","signTD","pathMatch","ViewTestdrivePageRoutingModule","forChild","SignatureComponentModule","TestDriveIndemnityComponentModule","KeyScannerComponentModule","ViewTestdrivePageModule","then","identity_1","pipeFromArray","fns","identity","reduce","prev","_i","arguments","scheduleObservable_1","schedulePromise_1","scheduleArray_1","scheduleIterable_1","isInteropObservable_1","isIterable_1","scheduled","isInteropObservable","schedulePromise","scheduleIterable","__extends","extendStatics","d","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","isFunction_1","Observer_1","rxSubscriber_1","config_1","hostReportError_1","_super","destinationOrNext","_this","call","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","empty","SafeSubscriber","rxSubscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentOrParents","_parentSubscriber","observerOrNext","context","isFunction","bind","_context","config","useDeprecatedSynchronousErrorHandling","__tryOrSetError","__tryOrUnsub","hostReportError","wrappedComplete","parent","_unsubscribe","UnsubscriptionError","UnsubscriptionErrorImpl","errors","join","return","done","array","len","canReportError_1","toSubscriber_1","pipe_1","getPromiseCtor","promiseCtor","Promise","_isScalar","_subscribe","operator","sink","toSubscriber","_trySubscribe","canReportError","warn","resolve","reject","subscription","operations","toPromise","map_1","from_1","innerSubscribe_1","project","resultSelector","concurrent","Number","POSITIVE_INFINITY","a","ii","MergeMapOperator","observer","MergeMapSubscriber","hasCompleted","buffer","index","_tryNext","_innerSub","ish","innerSubscriber","SimpleInnerSubscriber","innerSubscription","innerSubscribe","notifyNext","innerValue","notifyComplete","SimpleOuterSubscriber","flatMap","getSymbolIterator","Symbol","$$iterator","Subscriber_1","nextOrObserver","promise","subscribeTo_1","scheduled_1","isArray","_enable_super_gross_mode_that_will_cause_bad_things","stack","obj","obs","random","$$rxSubscriber","iterable","item","thisArg","MapOperator","MapSubscriber","count","notifyError","ComplexInnerSubscriber","outerValue","outerIndex","ComplexOuterSubscriber","_outerValue","_outerIndex","isArray_1","UnsubscriptionError_1","flattenUnsubscriptionErrors","errs","concat","_subscriptions","_ctorUnsubscribe","_a","teardown","EMPTY","tmp","indexOf","subscriptions","subscriptionIndex","splice"],"mappings":"8FAEA,IAAIA,EAAa,EAAQ,QAIzBC,EAAQC,WAHR,SAAoBC,GAChB,OAAOA,GAA+C,mBAA/BA,EAAMH,EAAWI,Y,oCCF5C,IAAIC,EAAe,EAAQ,QACvBC,EAAiB,EAAQ,QACzBC,EAAe,EAAQ,QAe3BN,EAAQO,mBAdR,SAA4BL,EAAOM,GAC/B,OAAO,IAAIJ,EAAaK,WAAW,SAAUC,GACzC,IAAIC,EAAM,IAAIN,EAAeO,aAS7B,OARAD,EAAIE,IAAIL,EAAUM,SAAS,WACvB,IAAIC,EAAab,EAAMI,EAAaS,cACpCJ,EAAIE,IAAIE,EAAWC,UAAU,CACzBC,KAAM,SAAUC,GAASP,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOJ,EAAWO,KAAKC,OACzFC,MAAO,SAAUC,GAAOT,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOJ,EAAWS,MAAMC,OACzFC,SAAU,WAAcV,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOJ,EAAWW,qBAGpFV,M,oCCdf,IAAIP,EAAe,EAAQ,QACvBC,EAAiB,EAAQ,QAkB7BL,EAAQsB,cAjBR,SAAuBpB,EAAOM,GAC1B,OAAO,IAAIJ,EAAaK,WAAW,SAAUC,GACzC,IAAIC,EAAM,IAAIN,EAAeO,aACzBW,EAAI,EAWR,OAVAZ,EAAIE,IAAIL,EAAUM,SAAS,WACnBS,IAAMrB,EAAMsB,QAIhBd,EAAWO,KAAKf,EAAMqB,MACjBb,EAAWe,QACZd,EAAIE,IAAIa,KAAKZ,aALbJ,EAAWW,cAQZV,M,oCChBf,IAAIgB,EAAqB,EAAQ,QAC7BC,EAAuB,EAAQ,QAC/BC,EAAwB,EAAQ,QAChCC,EAA0B,EAAQ,QAClCC,EAAgB,EAAQ,QACxBC,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBlC,EAAa,EAAQ,QACrBO,EAAe,EAAQ,QAC3BN,EAAQkC,YAAc,SAAUC,GAC5B,GAAMA,GAAqD,mBAApCA,EAAO7B,EAAaS,YACvC,OAAOe,EAAwBM,sBAAsBD,GAEpD,GAAIJ,EAAcM,YAAYF,GAC/B,OAAOR,EAAmBW,iBAAiBH,GAE1C,GAAIH,EAAYO,UAAUJ,GAC3B,OAAOP,EAAqBY,mBAAmBL,GAE9C,GAAMA,GAAiD,mBAAhCA,EAAOpC,EAAWI,UAC1C,OAAO0B,EAAsBY,oBAAoBN,GAGjD,IAAIjB,EAAQe,EAAWS,SAASP,GAAU,oBAAsB,IAAMA,EAAS,IAG/E,MAAM,IAAIQ,UAFA,gBAAkBzB,EAAlB,+F,kWCjBlB,MAAM0B,EACF,YAAYC,EAAOrC,GACfkB,KAAKmB,MAAQA,EACbnB,KAAKlB,UAAYA,EAErB,KAAKE,EAAYoC,GACb,OAAOA,EAAO9B,UAAU,IAAI,EAAgBN,EAAYgB,KAAKmB,MAAOnB,KAAKlB,aAGjF,MAAM,UAAwBuC,EAAA,EAC1B,YAAYC,EAAaH,EAAOrC,GAC5ByC,MAAMD,GACNtB,KAAKmB,MAAQA,EACbnB,KAAKlB,UAAYA,EACjBkB,KAAKwB,MAAQ,GACbxB,KAAKyB,QAAS,EACdzB,KAAK0B,SAAU,EAEnB,gBAAgBC,GACZ,MAAMP,EAASO,EAAMP,OACfI,EAAQJ,EAAOI,MACf1C,EAAY6C,EAAM7C,UAClBwC,EAAcK,EAAML,YAC1B,KAAOE,EAAM1B,OAAS,GAAM0B,EAAM,GAAGI,KAAO9C,EAAU+C,OAAU,GAC5DL,EAAMM,QAAQC,aAAaC,QAAQV,GAEvC,GAAIE,EAAM1B,OAAS,EAAG,CAClB,MAAMqB,EAAQc,KAAKC,IAAI,EAAGV,EAAM,GAAGI,KAAO9C,EAAU+C,OACpD7B,KAAKZ,SAASuC,EAAOR,QAGrBnB,KAAKmC,cACLf,EAAOK,QAAS,EAGxB,UAAU3C,GACNkB,KAAKyB,QAAS,EACMzB,KAAKsB,YACbnC,IAAIL,EAAUM,SAAS,EAAgBgD,SAAUpC,KAAKmB,MAAO,CACrEC,OAAQpB,KAAMsB,YAAatB,KAAKsB,YAAaxC,UAAWA,KAGhE,qBAAqBiD,GACjB,IAAqB,IAAjB/B,KAAK0B,QACL,OAEJ,MAAM5C,EAAYkB,KAAKlB,UACjBuD,EAAU,IAAIC,EAAaxD,EAAU+C,MAAQ7B,KAAKmB,MAAOY,GAC/D/B,KAAKwB,MAAMe,KAAKF,IACI,IAAhBrC,KAAKyB,QACLzB,KAAKwC,UAAU1D,GAGvB,MAAMU,GACFQ,KAAKyC,qBAAqBC,EAAA,EAAaC,WAAWnD,IAEtD,OAAOE,GACHM,KAAK0B,SAAU,EACf1B,KAAKwB,MAAQ,GACbxB,KAAKsB,YAAY7B,MAAMC,GACvBM,KAAKmC,cAET,YACInC,KAAKyC,qBAAqBC,EAAA,EAAaE,kBACvC5C,KAAKmC,eAGb,MAAMG,EACF,YAAYV,EAAMG,GACd/B,KAAK4B,KAAOA,EACZ5B,KAAK+B,aAAeA,G,wCC3ErB,MAAM,EAAb,cAGE,KAAAc,UAAYC,K,oDCQP,Y,MAAMC,EACX,YACUC,EACAC,EACAC,EACAxD,EACAyD,GAJA,KAAAH,KACA,KAAAC,KACA,KAAAC,MACA,KAAAxD,MACA,KAAAyD,cAGA,KAAAC,KAAO,IAAI,IACb,KAAAC,KAAO,IAAInE,EAAA,EAKnB,WACE,IACEc,KAAKsD,sBACL,MAAO5D,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,kBACE,IACE8D,WAAW,IAAMxD,KAAKyD,aAAc,KACpC,MAAO/D,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,cACE,IACEM,KAAKqD,KAAKlB,cACVnC,KAAKgD,GAAGU,UACR,MAAOhE,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,aACE,IACE,MAgBMiE,GAhBSC,EAAA,EAAYC,SACvB,OAAAC,EAAA,GAAG,gFAAgFC,KAEjF,OAAAC,EAAA,GAAKC,GAAMjE,KAAKkE,kBFxDrB,SAAe/C,EAAOrC,EAAY,KACrC,MACMqF,EADgB,OAAAC,EAAA,GAAOjD,IACMA,EAAQrC,EAAU+C,MAASI,KAAKoC,IAAIlD,GACvE,OAAQC,GAAWA,EAAOkD,KAAK,IAAIpD,EAAciD,EAAUrF,IEsDnD,CAAM,MAER,OAAAyF,EAAA,GAAKvE,KAAKgD,GAAGwB,QAAQT,KACnB,OAAAU,EAAA,GAAWC,IACT,GAAIA,EAAOC,QAET,OADA3E,KAAKkE,iBACElE,KAAKgD,GAAGI,OAEf,MAAM,IAAIwB,MAAM,4BAKvBb,KACC,OAAAc,EAAA,KACA,OAAAC,EAAA,GAAKC,IACH,MAAMC,EAAOC,KAAKC,MAAMH,GAClB3B,EAAgB+B,OAAOC,OAAO,IAAI,EAAWJ,GACnD,IAAK5B,EAAKiC,QAAUjC,EAAKkC,QACvB,MAAM,IAAIV,MAAM,mBAMlB,OAJAjB,EAAMxB,cACNnC,KAAKuF,iBACLvF,KAAKgD,GAAGwC,OACRxF,KAAKyF,eAAerC,GACbA,KAGV9D,UACC,OACCI,IACCiE,EAAMxB,cACNnC,KAAKuF,iBACLvF,KAAKgD,GAAGwC,OACRxF,KAAKyF,eAAe,MACpBzF,KAAKN,IAAI6D,SAAS7D,GACXM,KAAKN,IAAIgG,iBAAiBhG,KAGvC,MAAOA,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,QACE,IACE,OAAA6E,EAAA,GAAKvE,KAAKgD,GAAG2C,gBAAgB5B,KAC3B,YAASE,GACAjE,KAAKgD,GAAGwC,SAGnBxF,KAAKuF,iBACLvF,KAAKyF,eAAe,MACpB,MAAO/F,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,gBACE,IACE,OAAA6E,EAAA,GAAKvE,KAAKgD,GAAG4C,aACV7B,KACC,YAASW,GACFA,EAAOmB,SAKH7F,KAAKgD,GAAG8C,UADK,IADApB,EAAOqB,cAEF,EAEA,GANlB,OAAAjC,EAAA,GAAG,QAUfxE,UACE2E,MACAvE,IACCM,KAAKN,IAAI6D,SAAS7D,GACXM,KAAKN,IAAIgG,iBAAiBhG,KAGvC,MAAOA,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,cACE,IACE,OAAA6E,EAAA,GAAKvE,KAAKgD,GAAG4C,aACV7B,KACC,YAASW,GACFA,EAAOmB,UAAanB,EAAOsB,eAG5BtB,EAAOuB,aACFjG,KAAKgD,GAAGkD,eAERlG,KAAKgD,GAAGmD,cALR,OAAArC,EAAA,GAAG,QASfxE,UACE2E,MACAvE,IACCM,KAAKN,IAAI6D,SAAS7D,GACXM,KAAKN,IAAIgG,iBAAiBhG,KAGvC,MAAOA,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAIhB,eAAe0G,G,kDAC3B,MAAMC,QAAgBrG,KAAKkD,IAAIoD,SAC3BD,UACIA,EAAQE,QAAQH,GACtBpG,KAAKmD,YAAYqD,YAKb,iBACNC,SAASC,iBAAiB,+BAA+BC,QAASC,IAChEA,EAAEC,UAAU1H,IAAI,YAElB,MAAMkH,EAAUI,SAASK,cAAc,eACvC,GAAIT,EAAS,CACXrG,KAAK+G,OAASV,EAAQW,MAAMC,iBAAiB,gBAC7CZ,EAAQW,MAAME,YAAY,eAAgB,eAC1C,MAAMC,EAAYd,EAAQS,cAAc,gBAClCM,EAAgBpH,KAAKiD,GAAGoE,cAAcC,aACtCC,EAAYH,EAAcG,UAC1BC,EAAeD,EAAYH,EAAcK,aAC/CzH,KAAK0H,WAAaP,EAAUH,MAAMW,WAClC3H,KAAK4H,gBAAkBT,EAAUH,MAAMa,QAEvCV,EAAUH,MAAMW,WAAa,mFAAmFJ,mBAA2BA,oBAA4BC,iCAA4CA,wSACnNL,EAAUH,MAAMa,QAAU,KAItB,iBACNpB,SAASC,iBAAiB,+BAA+BC,QAASC,IAChEA,EAAEC,UAAUiB,OAAO,YAErB,MAAMzB,EAAUI,SAASK,cAAc,eACvC,GAAIT,EAAS,CACPrG,KAAK+G,QACPV,EAAQW,MAAME,YAAY,eAAgBlH,KAAK+G,QAEjD,MAAMI,EAAYd,EAAQS,cAAc,gBACpCK,IACFA,EAAUH,MAAMW,WAAa3H,KAAK0H,WAClCP,EAAUH,MAAMa,QAAU7H,KAAK4H,kBAKvB,sB,yDACU5H,KAAKkD,IAAIoD,WAE7BtG,KAAKmD,YAAY4E,KAAK/H,KAAKmD,YAAY6E,S,6CApNhCjF,GAAmB,qD,uBAAnBA,EAAmB,kbCfhC,qBACE,oBACE,oBACE,2BAA2C,+BAAS,EAAAkF,UAClD,qBACF,OACF,OACF,OACA,oBACE,oBACE,2BAA+C,+BAAS,EAAAC,gBACtD,qBACF,OACF,OACA,oBACE,4BAA+C,+BAAS,EAAAC,kBACtD,sBACF,OACF,OACF,OACF,S,0dDLO,G,wCECA,Y,MAAMC,EAKX,YACUC,EACAC,EACAC,EACAC,EACAnC,EACAoC,EACAC,GANA,KAAAL,YACA,KAAAC,YACA,KAAAC,YACA,KAAAC,cACA,KAAAnC,UACA,KAAAoC,YACA,KAAAC,cAGV,WACE1I,KAAK2I,OAAS3I,KAAK4I,aAGb,aACN,MAAMD,EAAS3I,KAAKwI,YAAYK,MAAM,CACpCC,MAAO,CAAC,GAAI,CAAC,IAAWC,WACxBC,YAAa,CAAC,GAAI,CAAC,IAAWD,WAC9BE,aAAc,CAAC,GAAI,CAAC,IAAWF,aAGjC,OADA/I,KAAKkJ,kBAAkBP,GAChBA,EAGD,kBAAkBQ,GACxBnJ,KAAKuI,UAAUa,IAAI,uBAAuB9J,UAAW+J,IAInD,GAHArJ,KAAKsJ,kBAAoB,CACvBT,MAAO,IAEJM,EAGL,IAAK,MAAMI,KAAOpE,OAAOqE,KAAKL,EAAKM,UACjC,OAAQF,GACN,IAAK,QACL,IAAK,cACL,IAAK,eACHvJ,KAAKsJ,kBAAkBC,GAAO,CAC5BR,SAAUM,MAUtB,QACErJ,KAAKuI,UACFa,IAAI,kBACJrF,KACC,YAAUsF,GACD,OAAA9E,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAASgH,MAIf,YAAUM,IACRA,EAAQC,UACR5J,KAAK6J,UAAUC,QAAQC,aAAe/J,KAAK2I,OAAOS,IAAI,gBAAgB5J,MAC/DQ,KAAKyI,UACTuB,eAAehK,KAAK6J,WACpB9F,KACC,OAAAC,EAAA,GAAKiG,IACHjK,KAAK6J,UAAYI,KAGpBlG,KACC,OAAAC,EAAA,GACGiG,IACCN,EAAQpD,UACRvG,KAAKqI,UAAU9B,QAAQvG,KAAK6J,YAE7BnK,IACCiK,EAAQpD,gBAMnBjH,YAGL,SACEU,KAAKqI,UAAU9B,UAGjB,YACE,OAAAhC,EAAA,GACEvE,KAAKqG,QAAQqD,OAAO,CAClBQ,UAAW,EACXC,cAAc,EACdC,SAAU,eACVC,iBAAiB,EACjBC,UAAU,KAGXvG,KACC,OAAAC,EAAA,GAAKqC,GAAYA,EAAQuD,WACzB,YAAUvD,GAAYA,EAAQkE,gBAC9B,OAAAzF,EAAA,GAAK0F,IACEA,GAAgBA,EAAYxF,MAGjChF,KAAKuI,UACFa,IAAI,kBACJrF,KACC,YAAUsF,GACD,OAAA9E,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAASgH,MAIf,YAAUM,IACRA,EAAQC,UACD5J,KAAKyI,UAAUgC,cAAcD,EAAYxF,KAAK0F,QAAQ3G,KAC3D,OAAAC,EAAA,GAAKe,IACH/E,KAAK6J,UAAUC,QAAU/E,EACzB/E,KAAK2I,OAAOS,IAAI,SAASuB,SAAS5F,EAAI6F,QACtC5K,KAAK2I,OAAOS,IAAI,eAAeuB,SAAS5F,EAAI8F,WAC5C7K,KAAK2I,OAAOS,IAAI,gBAAgBuB,SAAS5F,EAAIgF,cAC7C/J,KAAK0I,YAAYnC,gBAKxBjH,eAGNA,YAGL,SACE,MAAMwL,EAAO,GACb,OAAAvG,EAAA,GACEvE,KAAKsI,UAAUoB,OAAO,CACpBW,iBAAiB,EACjBU,OAAQ,CACN,CACEC,KAAM,QACNhD,KAAM,YAKXjE,KACC,YAAUkH,GACD,OAAAC,EAAA,GAAS,CACdlL,KAAKuI,UAAUa,IAAI,6CAA6CrF,KAC9D,OAAAC,EAAA,GAAKqF,IACH4B,EAAME,OAAS9B,KAGnBrJ,KAAKuI,UAAUa,IAAI,iBAAiBrF,KAClC,OAAAC,EAAA,GAAKqF,IACHyB,EAAKvI,KAAK,CACR6I,KAAM/B,EACNgC,KAAM,SACNC,QAAS,YAIftL,KAAKuI,UAAUa,IAAI,iBAAiBrF,KAClC,OAAAC,EAAA,GAAKqF,IACHyB,EAAKvI,KAAK,CACR6I,KAAM/B,EACNiC,QAAUtG,IACRhF,KAAKuI,UACFa,IAAI,kBACJrF,KACC,YAAUsF,GACD,OAAA9E,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAASgH,MAIf,YAAUM,IACRA,EAAQC,UACD5J,KAAKyI,UAAUgC,cAAczF,EAAK8D,OAAO/E,KAC9C,OAAAC,EAAA,GAAKe,IACH/E,KAAK6J,UAAUC,QAAU/E,EACzB/E,KAAK2I,OAAOS,IAAI,SAASuB,SAAS5F,EAAI6F,QACtC5K,KAAK2I,OAAOS,IAAI,eAAeuB,SAAS5F,EAAI8F,WAC5C7K,KAAK2I,OAAOS,IAAI,gBAAgBuB,SAAS5F,EAAIgF,cAC7C/J,KAAK0I,YAAYnC,gBAKxBjH,oBAKVyE,KACD,OAAAC,EAAA,GAAI,KACFiH,EAAMM,QAAUT,EAChBG,EAAMrB,eAKbtK,a,6CAnNM8I,GAAsB,2E,uBAAtBA,EAAsB,s3BChBnC,uBACE,wBACE,wBACE,uBAAY,+BAAS,EAAAoD,WACnB,qBACF,OACF,OACA,oBACE,Q,oBAA+C,aAC/C,qBACE,S,qBAEF,OACF,OACF,OACF,OACA,yBACE,qBACE,wBAAoF,+BAAS,EAAAC,cAC3F,S,qBACF,OACA,uBACE,aAAG,S,qBAAwC,OAC7C,OACA,yBAAiF,+BAAS,EAAAC,WACxF,S,qBACF,OACF,OACA,sBACE,YACE,uBACE,wB,qBACF,OACA,2BACA,uBACE,wB,qBACF,OACA,2BACA,uBACE,wB,qBACF,OACA,2BACF,OACF,OACF,OACA,wBACE,yBAAoF,+BAAS,EAAAC,UAC3F,S,qBACF,OACF,Q,MAzCM,8DAEE,sHASF,2DAGG,iDAGH,2EAIY,mCAE2C,+EAA1C,oBAEC,6EAAkC,sCAEa,+EAAhD,oBAEC,mFAAwC,4CAEV,gFAE9B,oFAAyC,6CAKH,0CACtD,8D,ibD/BG,GEXP,MAAMC,EACF,YAAYhF,EAAGiF,EAAGjK,GACd5B,KAAK4G,EAAIA,EACT5G,KAAK6L,EAAIA,EACT7L,KAAK4B,KAAOA,GAAQkK,KAAKjK,MAE7B,WAAWkK,GACP,OAAO9J,KAAK+J,KAAK/J,KAAKgK,IAAIjM,KAAK4G,EAAImF,EAAMnF,EAAG,GAAK3E,KAAKgK,IAAIjM,KAAK6L,EAAIE,EAAMF,EAAG,IAEhF,OAAOK,GACH,OAAOlM,KAAK4G,IAAMsF,EAAMtF,GAAK5G,KAAK6L,IAAMK,EAAML,GAAK7L,KAAK4B,OAASsK,EAAMtK,KAE3E,aAAamK,GACT,OAAO/L,KAAK4B,OAASmK,EAAMnK,KACrB5B,KAAKmM,WAAWJ,IAAU/L,KAAK4B,KAAOmK,EAAMnK,MAC5C,GAId,MAAMwK,EACF,YAAYC,EAAYC,EAAUC,EAAUC,EAAUC,EAAYC,GAC9D1M,KAAKqM,WAAaA,EAClBrM,KAAKsM,SAAWA,EAChBtM,KAAKuM,SAAWA,EAChBvM,KAAKwM,SAAWA,EAChBxM,KAAKyM,WAAaA,EAClBzM,KAAK0M,SAAWA,EAEpB,kBAAkBC,EAAQC,GACtB,MAAMC,EAAK7M,KAAK8M,uBAAuBH,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAAIE,GAClEE,EAAK/M,KAAK8M,uBAAuBH,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAAIK,GACxE,OAAO,IAAIZ,EAAOO,EAAO,GAAIE,EAAIE,EAAIJ,EAAO,GAAIC,EAAOb,MAAOa,EAAOK,KAEzE,8BAA8BC,EAAIC,EAAIC,GAClC,MAAMC,EAAMH,EAAGtG,EAAIuG,EAAGvG,EAChB0G,EAAMJ,EAAGrB,EAAIsB,EAAGtB,EAChB0B,EAAMJ,EAAGvG,EAAIwG,EAAGxG,EAChB4G,EAAML,EAAGtB,EAAIuB,EAAGvB,EAChB4B,GAAWP,EAAGtG,EAAIuG,EAAGvG,GAAK,EAA1B6G,GAAmCP,EAAGrB,EAAIsB,EAAGtB,GAAK,EAClD6B,GAAWP,EAAGvG,EAAIwG,EAAGxG,GAAK,EAA1B8G,GAAmCP,EAAGtB,EAAIuB,EAAGvB,GAAK,EAClD8B,EAAK1L,KAAK+J,KAAKqB,EAAMA,EAAMC,EAAMA,GACjCM,EAAK3L,KAAK+J,KAAKuB,EAAMA,EAAMC,EAAMA,GAGjCK,EAAID,GAAMD,EAAKC,GAEfE,EAAKX,EAAGvG,GADE8G,GAHJD,EAAOC,GAGUG,GAEvBE,EAAKZ,EAAGtB,GAFqB6B,GAFvBD,EAAOC,GAE6BG,GAGhD,MAAO,CACHb,GAAI,IAAIpB,EAAM6B,EAAOK,EAAIL,EAAOM,GAChClB,GAAI,IAAIjB,EAAM8B,EAAOI,EAAIJ,EAAOK,IAGxC,SAEI,IACIC,EACAC,EAFAnO,EAAS,EAGb,IAAK,IAAID,EAAI,EAAGA,GAJF,GAIcA,GAAK,EAAG,CAChC,MAAMqO,EAAIrO,EALA,GAMJsO,EAAKnO,KAAKoO,MAAMF,EAAGlO,KAAKqM,WAAWzF,EAAG5G,KAAKuM,SAAS3F,EAAG5G,KAAKsM,SAAS1F,EAAG5G,KAAKwM,SAAS5F,GACtFyH,EAAKrO,KAAKoO,MAAMF,EAAGlO,KAAKqM,WAAWR,EAAG7L,KAAKuM,SAASV,EAAG7L,KAAKsM,SAAST,EAAG7L,KAAKwM,SAASX,GAC5F,GAAIhM,EAAI,EAAG,CACP,MAAMyO,EAAQH,EAAKH,EACbO,EAAQF,EAAKJ,EACnBnO,GAAUmC,KAAK+J,KAAKsC,EAAQA,EAAQC,EAAQA,GAEhDP,EAAKG,EACLF,EAAKI,EAET,OAAOvO,EAEX,MAAMoO,EAAGnC,EAAOiB,EAAIH,EAAII,GACpB,OAAQlB,GAAS,EAAMmC,IAAM,EAAMA,IAAM,EAAMA,GACxC,EAAMlB,GAAM,EAAMkB,IAAM,EAAMA,GAAKA,EACnC,EAAMrB,GAAM,EAAMqB,GAAKA,EAAIA,EAC3BjB,EAAMiB,EAAIA,EAAIA,GA2C7B,MAAMM,EACF,YAAYC,EAAQC,EAAU,IAC1B1O,KAAKyO,OAASA,EACdzO,KAAK0O,QAAUA,EACf1O,KAAK2O,iBAAoBC,IACD,IAAhBA,EAAMC,QACN7O,KAAK8O,kBAAmB,EACxB9O,KAAK+O,aAAaH,KAG1B5O,KAAKgP,iBAAoBJ,IACjB5O,KAAK8O,kBACL9O,KAAKiP,kBAAkBL,IAG/B5O,KAAKkP,eAAkBN,IACC,IAAhBA,EAAMC,OAAe7O,KAAK8O,mBAC1B9O,KAAK8O,kBAAmB,EACxB9O,KAAKmP,WAAWP,KAGxB5O,KAAKoP,kBAAqBR,IACtBA,EAAMS,iBAC6B,IAA/BT,EAAMU,cAAcxP,QAEpBE,KAAK+O,aADSH,EAAMW,eAAe,KAI3CvP,KAAKwP,iBAAoBZ,IACrBA,EAAMS,iBAENrP,KAAKiP,kBADSL,EAAMU,cAAc,KAGtCtP,KAAKyP,gBAAmBb,IACKA,EAAMc,SAAW1P,KAAKyO,SAE3CG,EAAMS,iBAENrP,KAAKmP,WADSP,EAAMW,eAAe,MAI3CvP,KAAK2P,qBAAuBjB,EAAQiB,sBAAwB,GAC5D3P,KAAK4P,SAAWlB,EAAQkB,UAAY,GACpC5P,KAAK6P,SAAWnB,EAAQmB,UAAY,IACpC7P,KAAK8P,SAAY,aAAcpB,EAAUA,EAAQoB,SAAW,GAC5D9P,KAAK+P,YAAe,gBAAiBrB,EAC/BA,EAAQqB,YACR,EACN/P,KAAKgQ,QACDtB,EAAQsB,SACJ,WACI,OAAQhQ,KAAK4P,SAAW5P,KAAK6P,UAAY,GAErD7P,KAAKiQ,SAAWvB,EAAQuB,UAAY,QACpCjQ,KAAKkQ,gBAAkBxB,EAAQwB,iBAAmB,gBAClDlQ,KAAKmQ,QAAUzB,EAAQyB,QACvBnQ,KAAKoQ,MAAQ1B,EAAQ0B,MACrBpQ,KAAKiP,kBAAoBjP,KAAK8P,SAhGtC,SAAkBO,EAAIC,EAAO,KACzB,IAEI7P,EACA8P,EACAC,EAJAC,EAAW,EACXC,EAAU,KAId,MAAMC,EAAQ,KACVF,EAAW3E,KAAKjK,MAChB6O,EAAU,KACVjQ,EAAS4P,EAAG1E,MAAM4E,EAAeC,GAC5BE,IACDH,EAAgB,KAChBC,EAAa,KAGrB,OAAO,YAAoBI,GACvB,MAAM/O,EAAMiK,KAAKjK,MACXgP,EAAYP,GAAQzO,EAAM4O,GAkBhC,OAjBAF,EAAgBvQ,KAChBwQ,EAAaI,EACTC,GAAa,GAAKA,EAAYP,GAC1BI,IACAI,aAAaJ,GACbA,EAAU,MAEdD,EAAW5O,EACXpB,EAAS4P,EAAG1E,MAAM4E,EAAeC,GAC5BE,IACDH,EAAgB,KAChBC,EAAa,KAGXE,IACNA,EAAUK,OAAOvN,WAAWmN,EAAOE,IAEhCpQ,GA8DDqP,CAAStB,EAAawC,UAAUC,cAAejR,KAAK8P,UACpDtB,EAAawC,UAAUC,cAC7BjR,KAAKkR,KAAOzC,EAAO0C,WAAW,MAC9BnR,KAAKoR,QACLpR,KAAKqR,KAET,QACI,MAAQH,KAAMI,EAAG,OAAE7C,GAAWzO,KAC9BsR,EAAIC,UAAYvR,KAAKkQ,gBACrBoB,EAAIE,UAAU,EAAG,EAAG/C,EAAOgD,MAAOhD,EAAOiD,QACzCJ,EAAIK,SAAS,EAAG,EAAGlD,EAAOgD,MAAOhD,EAAOiD,QACxC1R,KAAK4R,MAAQ,GACb5R,KAAK6R,SACL7R,KAAK8R,UAAW,EAEpB,YAAYC,EAASrD,EAAU,GAAIsD,GAC/B,MAAMC,EAAQ,IAAIC,MACZC,EAAQzD,EAAQyD,OAASpB,OAAOqB,kBAAoB,EACpDX,EAAQ/C,EAAQ+C,OAASzR,KAAKyO,OAAOgD,MAAQU,EAC7CT,EAAShD,EAAQgD,QAAU1R,KAAKyO,OAAOiD,OAASS,EACtDnS,KAAK6R,SACLI,EAAMI,OAAS,KACXrS,KAAKkR,KAAKoB,UAAUL,EAAO,EAAG,EAAGR,EAAOC,GACpCM,GACAA,KAGRC,EAAMM,QAAW9S,IACTuS,GACAA,EAASvS,IAGjBwS,EAAMO,IAAMT,EACZ/R,KAAK8R,UAAW,EAEpB,UAAU9J,EAAO,YAAayK,GAC1B,OAAQzK,GACJ,IAAK,gBACD,OAAOhI,KAAK0S,SAChB,QACI,OAAO1S,KAAKyO,OAAOkE,UAAU3K,EAAMyK,IAG/C,KACIzS,KAAKyO,OAAOzH,MAAM4L,YAAc,OAChC5S,KAAKyO,OAAOzH,MAAM6L,cAAgB,OAC9B9B,OAAO+B,aACP9S,KAAK+S,wBAGL/S,KAAKgT,qBACD,iBAAkBjC,QAClB/Q,KAAKiT,sBAIjB,MACIjT,KAAKyO,OAAOzH,MAAM4L,YAAc,OAChC5S,KAAKyO,OAAOzH,MAAM6L,cAAgB,OAClC7S,KAAKyO,OAAOyE,oBAAoB,cAAelT,KAAK2O,kBACpD3O,KAAKyO,OAAOyE,oBAAoB,cAAelT,KAAKgP,kBACpDvI,SAASyM,oBAAoB,YAAalT,KAAKkP,gBAC/ClP,KAAKyO,OAAOyE,oBAAoB,YAAalT,KAAK2O,kBAClD3O,KAAKyO,OAAOyE,oBAAoB,YAAalT,KAAKgP,kBAClDvI,SAASyM,oBAAoB,UAAWlT,KAAKkP,gBAC7ClP,KAAKyO,OAAOyE,oBAAoB,aAAclT,KAAKoP,mBACnDpP,KAAKyO,OAAOyE,oBAAoB,YAAalT,KAAKwP,kBAClDxP,KAAKyO,OAAOyE,oBAAoB,WAAYlT,KAAKyP,iBAErD,UACI,OAAOzP,KAAK8R,SAEhB,SAASqB,GACLnT,KAAKoR,QACLpR,KAAKoT,UAAUD,EAAa,EAAGE,QAAOC,WAAYtT,KAAKuT,WAAW,CAAEF,QAAOC,UAAU,EAAGD,QAAOjF,WAAYpO,KAAKwT,SAAS,CAAEH,QAAOjF,WAClIpO,KAAK4R,MAAQuB,EAEjB,SACI,OAAOnT,KAAK4R,MAEhB,aAAahD,GACT,MAAM6E,EAAgB,CAClBJ,MAAOrT,KAAKiQ,SACZtD,OAAQ,IAEgB,mBAAjB3M,KAAKmQ,SACZnQ,KAAKmQ,QAAQvB,GAEjB5O,KAAK4R,MAAMrP,KAAKkR,GAChBzT,KAAK6R,SACL7R,KAAKiR,cAAcrC,GAEvB,cAAcA,GACV,GAA0B,IAAtB5O,KAAK4R,MAAM9R,OAEX,YADAE,KAAK+O,aAAaH,GAGtB,MAEMR,EAAQpO,KAAK0T,aAFT9E,EAAM+E,QACN/E,EAAMgF,SAEVC,EAAiB7T,KAAK4R,MAAM5R,KAAK4R,MAAM9R,OAAS,GAChDgU,EAAaD,EAAelH,OAC5BoH,EAAYD,EAAWhU,OAAS,GAAKgU,EAAWA,EAAWhU,OAAS,GACpEkU,IAAsBD,GACtB3F,EAAMjC,WAAW4H,IAAc/T,KAAK+P,YAEpCsD,EAAQQ,EAAeR,MAC7B,IAAKU,IAAeA,IAAaC,EAAsB,CACnD,MAAMV,EAAQtT,KAAKiU,UAAU7F,GACxB2F,EAGIT,GACLtT,KAAKuT,WAAW,CAAEF,QAAOC,UAHzBtT,KAAKwT,SAAS,CAAEH,QAAOjF,UAK3B0F,EAAWvR,KAAK,CACZX,KAAMwM,EAAMxM,KACZgF,EAAGwH,EAAMxH,EACTiF,EAAGuC,EAAMvC,KAIrB,WAAW+C,GACP5O,KAAKiR,cAAcrC,GACO,mBAAf5O,KAAKoQ,OACZpQ,KAAKoQ,MAAMxB,GAGnB,uBACI5O,KAAK8O,kBAAmB,EACxB9O,KAAKyO,OAAOyF,iBAAiB,cAAelU,KAAK2O,kBACjD3O,KAAKyO,OAAOyF,iBAAiB,cAAelU,KAAKgP,kBACjDvI,SAASyN,iBAAiB,YAAalU,KAAKkP,gBAEhD,qBACIlP,KAAK8O,kBAAmB,EACxB9O,KAAKyO,OAAOyF,iBAAiB,YAAalU,KAAK2O,kBAC/C3O,KAAKyO,OAAOyF,iBAAiB,YAAalU,KAAKgP,kBAC/CvI,SAASyN,iBAAiB,UAAWlU,KAAKkP,gBAE9C,qBACIlP,KAAKyO,OAAOyF,iBAAiB,aAAclU,KAAKoP,mBAChDpP,KAAKyO,OAAOyF,iBAAiB,YAAalU,KAAKwP,kBAC/CxP,KAAKyO,OAAOyF,iBAAiB,WAAYlU,KAAKyP,iBAElD,SACIzP,KAAKmU,YAAc,GACnBnU,KAAKoU,cAAgB,EACrBpU,KAAKqU,YAAcrU,KAAK4P,SAAW5P,KAAK6P,UAAY,EACpD7P,KAAKkR,KAAKK,UAAYvR,KAAKiQ,SAE/B,aAAarJ,EAAGiF,GACZ,MAAMyI,EAAOtU,KAAKyO,OAAO8F,wBACzB,OAAO,IAAI3I,EAAMhF,EAAI0N,EAAKE,KAAM3I,EAAIyI,EAAKG,KAAK,IAAI3I,MAAO4I,WAE7D,UAAUtG,GACN,MAAM,YAAE+F,GAAgBnU,KAExB,GADAmU,EAAY5R,KAAK6L,GACb+F,EAAYrU,OAAS,EAAG,CACG,IAAvBqU,EAAYrU,QACZqU,EAAYQ,QAAQR,EAAY,IAEpC,MAAMvH,EAAS5M,KAAK4U,sBAAsBT,EAAY,GAAIA,EAAY,IAChEb,EAAQlH,EAAOyI,WAAWV,EAAavH,GAE7C,OADAuH,EAAYrS,QACLwR,EAEX,OAAO,KAEX,sBAAsBjH,EAAYG,GAC9B,MAAMsI,EAAW9U,KAAK2P,qBAAuBnD,EAASuI,aAAa1I,IAC9D,EAAIrM,KAAK2P,sBAAwB3P,KAAKoU,cACrCY,EAAWhV,KAAKiV,aAAaH,GAC7BlI,EAAS,CACXK,IAAK+H,EACLjJ,MAAO/L,KAAKqU,YAIhB,OAFArU,KAAKoU,cAAgBU,EACrB9U,KAAKqU,WAAaW,EACXpI,EAEX,aAAakI,GACT,OAAO7S,KAAKC,IAAIlC,KAAK6P,UAAYiF,EAAW,GAAI9U,KAAK4P,UAEzD,kBAAkBhJ,EAAGiF,EAAG4F,GACpB,MAAMH,EAAMtR,KAAKkR,KACjBI,EAAI4D,OAAOtO,EAAGiF,GACdyF,EAAI6D,IAAIvO,EAAGiF,EAAG4F,EAAO,EAAG,EAAIxP,KAAKmT,IAAI,GACrCpV,KAAK8R,UAAW,EAEpB,YAAW,MAAEuB,EAAK,MAAEC,IAChB,MAAMhC,EAAMtR,KAAKkR,KACXmE,EAAa/B,EAAM5G,SAAW4G,EAAM7G,WACpC6I,EAAyC,EAA7BrT,KAAKsT,MAAMjC,EAAMxT,UACnCwR,EAAIkE,YACJlE,EAAIC,UAAY8B,EAChB,IAAK,IAAIxT,EAAI,EAAGA,EAAIyV,EAAWzV,GAAK,EAAG,CACnC,MAAMqO,EAAIrO,EAAIyV,EACRG,EAAKvH,EAAIA,EACTwH,EAAMD,EAAKvH,EACXyH,EAAI,EAAIzH,EACR0H,EAAKD,EAAIA,EACTE,EAAMD,EAAKD,EACjB,IAAI/O,EAAIiP,EAAMvC,EAAMjH,WAAWzF,EAC/BA,GAAK,EAAIgP,EAAK1H,EAAIoF,EAAM/G,SAAS3F,EACjCA,GAAK,EAAI+O,EAAIF,EAAKnC,EAAMhH,SAAS1F,EACjCA,GAAK8O,EAAMpC,EAAM9G,SAAS5F,EAC1B,IAAIiF,EAAIgK,EAAMvC,EAAMjH,WAAWR,EAC/BA,GAAK,EAAI+J,EAAK1H,EAAIoF,EAAM/G,SAASV,EACjCA,GAAK,EAAI8J,EAAIF,EAAKnC,EAAMhH,SAAST,EACjCA,GAAK6J,EAAMpC,EAAM9G,SAASX,EAC1B,MAAM4F,EAAQxP,KAAK6T,IAAIxC,EAAM7G,WAAaiJ,EAAML,EAAYrV,KAAK6P,UACjE7P,KAAK+V,kBAAkBnP,EAAGiF,EAAG4F,GAEjCH,EAAI0E,YACJ1E,EAAI2E,OAER,UAAS,MAAE5C,EAAK,MAAEjF,IACd,MAAMkD,EAAMtR,KAAKkR,KACXO,EAAgC,mBAAjBzR,KAAKgQ,QAAyBhQ,KAAKgQ,UAAYhQ,KAAKgQ,QACzEsB,EAAIkE,YACJxV,KAAK+V,kBAAkB3H,EAAMxH,EAAGwH,EAAMvC,EAAG4F,GACzCH,EAAI0E,YACJ1E,EAAIC,UAAY8B,EAChB/B,EAAI2E,OAER,UAAU9C,EAAa+C,EAAWC,GAC9B,IAAK,MAAMtN,KAASsK,EAAa,CAC7B,MAAM,MAAEE,EAAK,OAAE1G,GAAW9D,EAC1B,GAAI8D,EAAO7M,OAAS,EAChB,IAAK,IAAIsW,EAAI,EAAGA,EAAIzJ,EAAO7M,OAAQsW,GAAK,EAAG,CACvC,MAAMC,EAAa1J,EAAOyJ,GACpBhI,EAAQ,IAAIxC,EAAMyK,EAAWzP,EAAGyP,EAAWxK,EAAGwK,EAAWzU,MAC/D5B,KAAKiQ,SAAWoD,EACN,IAAN+C,GACApW,KAAK6R,SAET,MAAMyB,EAAQtT,KAAKiU,UAAU7F,GACzBkF,GACA4C,EAAU,CAAE7C,QAAOC,eAK3BtT,KAAK6R,SACLsE,EAAQ,CACJ9C,QACAjF,MAAOzB,EAAO,MAK9B,SACI,MAAMwG,EAAcnT,KAAK4R,MACnBO,EAAQlQ,KAAKC,IAAI6O,OAAOqB,kBAAoB,EAAG,GAG/CkE,EAAOtW,KAAKyO,OAAOgD,MAAQU,EAC3BoE,EAAOvW,KAAKyO,OAAOiD,OAASS,EAC5BqE,EAAM/P,SAASgQ,gBAAgB,6BAA8B,OACnED,EAAIE,aAAa,QAAS1W,KAAKyO,OAAOgD,MAAMkF,YAC5CH,EAAIE,aAAa,SAAU1W,KAAKyO,OAAOiD,OAAOiF,YAC9C3W,KAAKoT,UAAUD,EAAa,EAAGE,QAAOC,YAClC,MAAMsD,EAAOnQ,SAASoQ,cAAc,QACpC,KAAKC,MAAMxD,EAAM/G,SAAS3F,IACrBkQ,MAAMxD,EAAM/G,SAASV,IACrBiL,MAAMxD,EAAMhH,SAAS1F,IACrBkQ,MAAMxD,EAAMhH,SAAST,IAAI,CAC1B,MAAMkL,EAAO,KAAKzD,EAAMjH,WAAWzF,EAAEoQ,QAAQ,MAAM1D,EAAMjH,WAAWR,EAAEmL,QAAQ,QACrE1D,EAAM/G,SAAS3F,EAAEoQ,QAAQ,MAAM1D,EAAM/G,SAASV,EAAEmL,QAAQ,MAC1D1D,EAAMhH,SAAS1F,EAAEoQ,QAAQ,MAAM1D,EAAMhH,SAAST,EAAEmL,QAAQ,MACxD1D,EAAM9G,SAAS5F,EAAEoQ,QAAQ,MAAM1D,EAAM9G,SAASX,EAAEmL,QAAQ,KAC/DJ,EAAKF,aAAa,IAAKK,GACvBH,EAAKF,aAAa,gBAAkC,KAAjBpD,EAAM5G,UAAiBsK,QAAQ,IAClEJ,EAAKF,aAAa,SAAUrD,GAC5BuD,EAAKF,aAAa,OAAQ,QAC1BE,EAAKF,aAAa,iBAAkB,SACpCF,EAAIS,YAAYL,KAErB,EAAGvD,QAAOjF,YACT,MAAM8I,EAASzQ,SAASoQ,cAAc,UAChC7G,EAAkC,mBAAjBhQ,KAAKgQ,QAAyBhQ,KAAKgQ,UAAYhQ,KAAKgQ,QAC3EkH,EAAOR,aAAa,IAAK1G,EAAQ2G,YACjCO,EAAOR,aAAa,KAAMtI,EAAMxH,EAAE+P,YAClCO,EAAOR,aAAa,KAAMtI,EAAMvC,EAAE8K,YAClCO,EAAOR,aAAa,OAAQrD,GAC5BmD,EAAIS,YAAYC,KAEpB,MACM/L,EAGF,mGAA6BmL,KAAQC,aAC1BD,cACCC,MAEhB,IAAIY,EAAOX,EAAIY,UACf,QAAaC,IAATF,EAAoB,CACpB,MAAMG,EAAQ7Q,SAASoQ,cAAc,SAC/BU,EAAQf,EAAIgB,WAClBF,EAAMF,UAAY,GAClB,IAAK,IAAIvX,EAAI,EAAGA,EAAI0X,EAAMzX,OAAQD,GAAK,EACnCyX,EAAML,YAAYM,EAAM1X,GAAG4X,WAAU,IAEzCN,EAAOG,EAAMF,UAIjB,MApBe,6BAoBCM,KADHvM,EAASgM,EADP,WAMR,Q,uCCjeH,oBACE,uBAAsD,wDAAkB,gBAAK,OAC/E,Q,uCACA,oBACE,uBAAwE,uDAAiB,mBAAQ,OACnG,QCPL,Y,MAAMQ,EAgBX,YAAoB1U,EAAwBC,EAAgCxD,GAAxD,KAAAuD,KAAwB,KAAAC,MAAgC,KAAAxD,MAZ5E,KAAAkY,QAAU,IAAI,IAWN,KAAA3Y,IAAM,IAAIC,EAAA,EAGlB,WACE,IACEc,KAAK6X,SAAW7X,KAAK6X,SAAW7X,KAAK6X,SAAW,YAChD,MAAOnY,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,cACE,IACEM,KAAKf,IAAIkD,cACT,MAAOzC,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,kBACE,IACEM,KAAK8X,UAAY,IAAI,EAAa9X,KAAKiD,GAAGoE,cAAcP,cAAc,WACtE,MAAOpH,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,QACE,IACEM,KAAK8X,UAAU1G,QACf,MAAO1R,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,OACE,IACE,MAAMqY,EAAI/X,KAAKgY,aACfhY,KAAK4X,QAAQK,KAAKF,GAClB/X,KAAKyF,eAAesS,GACpB,MAAOrY,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAItB,aACN,MAAMwY,EAAgBlY,KAAK8X,UAAUnF,YACrC,OAAO3S,KAAKmY,oBAAoBD,EAAcE,MAAM,KAAK,GAAI,aAGjD,eAAeL,G,kDAC3B,MAAM1R,QAAgBrG,KAAKkD,IAAIoD,SAC3BD,UACIA,EAAQE,QAAQwR,MAKlB,oBAAoB/S,EAAcqT,GACxC,MAAMC,EAAaC,KAAKvT,GAClBwT,EAAK,IAAIC,YAAYH,EAAWxY,QAChC4Y,EAAK,IAAIC,WAAWH,GAC1B,IAAK,IAAI3Y,EAAI,EAAGA,EAAIyY,EAAWxY,OAAQD,IACrC6Y,EAAG7Y,GAAKyY,EAAWM,WAAW/Y,GAEhC,OAAO,IAAIgZ,KAAK,CAACL,GAAK,CAAExQ,KAAMqQ,K,6CAlFrBV,GAAkB,iC,uBAAlBA,EAAkB,8XDX/B,qBACE,kBACE,kBACE,mBACE,0BACE,yBAAgB,QAAc,OAC9B,4BAAmB,2CAAgC,OACrD,OACA,2BACE,kBACF,OACA,oBACE,mBACE,2BAGA,2BAGF,OACF,OACF,OACF,OACF,OACF,Q,MAnB0B,yBAQJ,iCAGA,qC,8WCLf,G,yCCYH,cACE,mBACE,0BACE,4BAAmB,eAAI,OACzB,OACA,2BACE,gBACF,OACF,OACF,Q,qBAHgC,4C,yBAjBlC,gBACE,cACE,mBACE,0BACE,4BAAmB,yBAAc,OACnC,OACA,2BACE,gBACF,OACF,OACF,OACA,sBAUF,Q,oBAda,yCAIL,kC,uCAuBR,mBACE,kBACE,kBACE,0BAA+C,oEAAqD,OACtG,OACF,OACF,O,MAHuF,8B,yBASnF,kBACE,kBACE,iBACE,qBACE,kBACE,qBACE,0BACF,OACA,qBACE,oBAAW,QAAiB,OAC9B,OACF,OACA,mBACE,sBACE,2BACF,OACA,sBACE,qBAAW,SAAsB,OACnC,OACF,OACF,OACF,OACF,OACF,Q,oBArBU,qCAOa,4BAQA,kC,uCAQrB,kBACE,wBAA0F,6DAAuB,iBAAM,OACzH,O,uBADc,qC,uCAGZ,wBAAwG,4EAAS,EAAAmB,QAAA,SAAiB,kBAAO,Q,uBACzI,wBACE,sBACF,Q,0BAJF,kBACE,8BACA,+BAGF,Q,oBAJ6B,iCACA,iC,wCAI7B,kBACE,wBAAwE,uDAAiB,eAAI,OAC/F,QC9ED,a,MAAMC,EAeX,YACUC,EACAvQ,EACApC,EACA4S,EACAC,EACAxZ,GALA,KAAAsZ,KACA,KAAAvQ,YACA,KAAApC,UACA,KAAA4S,UACA,KAAAC,QACA,KAAAxZ,MAVV,KAAAyZ,UAAW,EAYT,IACEnZ,KAAKoZ,SAAWpZ,KAAKgZ,GAAGnQ,MAAM,CAC5BwQ,YAAa,EAAC,GACdC,iBAAkB,EAAC,KAErB,MAAO5Z,GACPM,KAAKN,IAAI6D,SAAS7D,IAItB,WACMM,KAAKuZ,WACPvZ,KAAKoZ,SAAS3P,SAAsB,YAAE+P,cAAc,CAAC,IAAWC,eAIpE,cAAcC,GACZ,IAAKA,EACH,OAEF1Z,KAAKmZ,UAAW,EAChB,MAAMzH,EAAS1R,KAAKuZ,UAAY,IAAM,IACtCvZ,KAAK2Z,aACF5V,KACC,YAAU6V,IACRC,QAAQC,IAAIF,GACL5Z,KAAKiZ,QAAQc,QAAQ,GAAIrI,EAAQ,EAAG,IAAK,GAAIkI,EAASF,KAE/D,YAAUM,IACRH,QAAQC,IAAIE,GACLha,KAAKyI,UAAUwR,cACpBja,KAAKka,GACLF,GACCha,KAAKuZ,WAAavZ,KAAKoZ,SAAShQ,IAAI,eAAe5J,OACnDQ,KAAKuZ,WAAavZ,KAAKoZ,SAAShQ,IAAI,oBAAoB5J,UAI9DF,UAAWyF,IACV/E,KAAKka,GAAKnV,EACV/E,KAAKmZ,UAAW,EAChBnZ,KAAKkZ,MAAM3S,QAAQxB,KAIzB,OACE,IACE,IAAK/E,KAAKoZ,SAASe,MAIjB,YAHAhV,OAAOiV,OAAOpa,KAAKoZ,SAAS3P,UAAU9C,QAAS0T,IAC7CA,EAAKC,cAAc,CAAEC,UAAU,MAInCva,KAAKwa,UAAW,EAChB,MAAO9a,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,aACE,IACEM,KAAKwa,UAAW,EAChB,MAAO9a,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAI9B,SACE,IACEM,KAAKkZ,MAAM3S,UACX,MAAO7G,GACPM,KAAKN,IAAI6D,SAAS7D,GAClBM,KAAKN,IAAIgG,iBAAiBhG,IAItB,aACN,OAAOM,KAAKyI,UAAUgS,cACpBza,KAAKka,IACJla,KAAKuZ,WAAavZ,KAAKoZ,SAAShQ,IAAI,oBAAoB5J,OACxDQ,KAAKuZ,WAAavZ,KAAKoZ,SAAShQ,IAAI,eAAe5J,Q,6CAzG7CuZ,GAA2B,gE,uBAA3BA,EAA2B,iE,GAAA,K,KAa3B,GAAkB,G,iiCD7B/B,qBACE,sBACE,oBAAW,+BAAoB,OAC/B,wBACE,uBAAY,+BAAS,EAAAvN,WACnB,mBAAU,iBAAM,OAClB,OACF,OACF,OACF,OAEA,wBACE,sBAkCA,4BAOF,OAEA,sBACE,uBACE,oBACE,4BAwBA,mBACE,2BAGA,4BAMA,4BAGF,OACF,OACF,OACF,Q,MAtF8B,iCAkCjB,gCAYG,8CAyBE,gCAGA,gCAMA,mC,mPC5EX,G,2CC6BL,oBACE,mBACE,YAAG,Q,oBAAgD,OACrD,OACA,gBACE,WACE,sBACE,kBACE,qBAA0C,S,qBAA8C,OACxF,sBACE,uBAA2B,SAA6B,OAC1D,OACF,OACA,mBACE,sBAA0C,S,qBAA0C,OACpF,sBACE,uBAA2B,SAAgC,OAC7D,OACF,OACA,mBACE,sBAA0C,S,qBAA4C,OACtF,sBACE,uBAA2B,S,gBAAsD,OACnF,OACF,OACA,sBACE,sBAA0C,S,qBAA+C,OACzF,sBACE,uBAA0B,SAAoC,OAChE,OACF,OACA,sBACE,sBAA0C,S,qBAA6C,OACvF,sBACE,uBAA0B,SAAkC,OAC9D,OACF,OACA,sBACE,sBAA0C,S,qBAAwC,OAClF,sBACE,uBAA0B,SAA6B,OACzD,OACF,OACF,OACF,OACF,OACF,Q,oBA5CO,4DAGW,mCAGkC,kEAEb,iGAIa,8DAEb,oGAIa,gEAEb,4HAIa,mEAEd,iGAIc,iEAEd,+FAIc,4DAEd,2F,wCA6BtC,wBAA0D,wDACxD,oBAAY,Q,oBAA2C,OACzD,O,wBAFwH,uCAC1G,0D,wCAEd,wBAA0D,yDACxD,oBAAY,Q,oBAA0C,OACxD,O,MADc,yD,0BALhB,uBACE,+BAGA,+BAGF,Q,oBAN8E,qDAGC,wDC/G/E,MAAMkP,GAAiB,CACrB,CACE9D,KAAM,IAAI,IAA6B+D,SACvCC,SAAU,CACR,CACEhE,KAAM,GACN1M,UCcD,M,MAAM2Q,EAMX,YACUC,EACAC,EACAC,EACAzS,EACAG,EACAL,EACAG,EACAyS,EACAC,EACA5S,EACA6S,EACAC,GAXA,KAAAN,QACA,KAAAC,SACA,KAAAC,gBACA,KAAAzS,YACA,KAAAG,cACA,KAAAL,YACA,KAAAG,cACA,KAAAyS,UACA,KAAAC,SACA,KAAA5S,YACA,KAAA6S,YACA,KAAAC,YAjBF,KAAA/X,KAAO,IAAInE,EAAA,EAoBnB,WACEc,KAAK2I,OAAS3I,KAAK4I,aACnB5I,KAAKqD,KAAKlE,IAAIa,KAAKqb,YACnBxB,QAAQC,IAAI9Z,KAAK6J,WAGX,aACN,MAAMlB,EAAS3I,KAAKwI,YAAYK,MAAM,CACpCyS,WAAY,CAAC,IACbC,MAAO,CAAC,MAGV,OADAvb,KAAKkJ,kBAAkBP,GAChBA,EAGD,kBAAkBQ,GACxBnJ,KAAKuI,UAAUa,IAAI,uBAAuB9J,UAAW+J,IAInD,GAHArJ,KAAKsJ,kBAAoB,CACvBT,MAAO,IAEJM,EAGL,IAAK,MAAMI,KAAOpE,OAAOqE,KAAKL,EAAKM,cAWvC,WAEE,OADAzJ,KAAK6J,UAAY,IAAI,IACd7J,KAAK8a,MAAMU,SAASlc,UAAWmc,IACpCzb,KAAK6J,UAAU6R,GAAKD,EAAOrS,IAAI,IAA6BuR,UAC5D3a,KAAK2b,QAAQ3b,KAAK6J,UAAU6R,MAIhC,UACE1b,KAAKib,QAAQW,OAGf,QAAQC,GACN7b,KAAKuI,UACFa,IAAI,kBACJrF,KACC,OAAA+X,EAAA,UAAUzS,GACD,OAAA9E,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAASgH,MAIf,OAAAyS,EAAA,UAAUnS,IACRA,EAAQC,UACD5J,KAAKgb,cACTe,kBAAkBF,GAClB9X,KACC,OAAAC,EAAA,GAAKiG,IACHjK,KAAK6J,UAAYI,EACjBjK,KAAKgc,gBAGRjY,KACC,OAAAC,EAAA,GACGiG,IACCN,EAAQpD,WAET7G,IACCiK,EAAQpD,gBAMnBjH,YAGL,a,QACEU,KAAK2I,OAAOS,IAAI,cAAcuB,SAA+B,QAAvB,EAAC3K,KAAK6J,UAAUC,eAAO,eAAEmS,YAC/Djc,KAAK2I,OAAOS,IAAI,SAASuB,SAA+B,QAAvB,EAAC3K,KAAK6J,UAAUC,eAAO,eAAEoS,OAG5D,gBACElc,KAAK+a,OAAOoB,SAAS,CAAC,GAAG,IAA6BC,QAAQpc,KAAK6J,UAAU6R,OAG/E,SACE1b,KAAKuI,UACFa,IAAI,kBACJrF,KACC,OAAA+X,EAAA,UAAUzS,GACD,OAAA9E,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAASgH,MAIf,OAAAyS,EAAA,UAAUnS,IACRA,EAAQC,UACD5J,KAAKgb,cAAcqB,YAAYrc,KAAK6J,WAAW9F,KACpD,OAAA+X,EAAA,UAAS,CAACQ,EAAqBrY,KAC7B4V,QAAQC,IAAIwC,GACLtc,KAAKqI,UAAUqB,OAAO,CAC3BQ,UAAW,GACXqS,eAAgB,CACdrC,GAAIla,KAAK6J,UACTyP,iBAAkBgD,EAAMhD,iBACxBD,YAAaiD,EAAMjD,YACnBmD,UAAWF,EAAME,UACjBC,QAASH,EAAMG,QACflD,UAAW+C,EAAM/C,eAIvB,OAAAuC,EAAA,UAAU5C,IACRvP,EAAQpD,UACR2S,EAAMtP,UACCsP,EAAM3O,qBAKpBjL,UAAWyF,IACNA,EAAIC,OACN6U,QAAQC,IAAI/U,GACZ/E,KAAK6J,UAAY1E,OAAOC,OAAO,IAAI,IAAaL,EAAIC,SAK5D,UACE,OAAOhF,KAAKgb,cACT0B,eAAe1c,KAAK6J,WACpB9F,KAAK,OAAAe,EAAA,GAAK6X,GAAyB3c,KAAKkb,OAAO0B,KAAKD,EAAUE,QAAS,qBACvEvd,YAGL,OACE,OAAAiF,EAAA,GACEvE,KAAKqI,UAAUqB,OAAO,CACpBQ,UAAW,EACXG,iBAAiB,EACjBC,UAAU,EACVF,SAAU,cACVmS,eAAgB,CACd1S,UAAW7J,KAAK6J,UAAY1E,OAAOC,OAAO,GAAIpF,KAAK6J,WAAa,SAGpEvK,UAAW4Z,IACX,OAAA3U,EAAA,GAAK2U,EAAM3O,gBAAgBjL,UAAWyF,IAChCA,GAAOA,EAAIC,OACbhF,KAAK6J,UAAY9E,EAAIC,QAGzBkU,EAAMtP,YAIV,QACE,MAAMkB,EAAO,GACb,OAAAvG,EAAA,GACEvE,KAAKsI,UAAUoB,OAAO,CACpBW,iBAAiB,EACjBU,OAAQ,CACN,CACE+R,YAAa,cACb9R,KAAM,aACNhD,KAAM,QAER,CACE8U,YAAa,oBACb9R,KAAM,UACNhD,KAAM,YAKXjE,KACC,OAAA+X,EAAA,UAAU7Q,GACD,OAAAC,EAAA,GAAS,CACdlL,KAAKuI,UAAUa,IAAI,2BAA2BrF,KAC5C,OAAAC,EAAA,GAAKqF,IACH4B,EAAME,OAAS9B,KAGnBrJ,KAAKuI,UAAUa,IAAI,iBAAiBrF,KAClC,OAAAC,EAAA,GAAKqF,IACHyB,EAAKvI,KAAK,CACR6I,KAAM/B,EACNgC,KAAM,SACNC,QAAS,YAIftL,KAAKuI,UAAUa,IAAI,yBAAyBrF,KAC1C,OAAAC,EAAA,GAAKqF,IACHyB,EAAKvI,KAAK,CACR6I,KAAM/B,EACNiC,QAAUtG,GACHA,EAAK+X,WAIN/c,KAAK6J,UAAUC,QAAQC,cAAgB/E,EAAK+X,YAC9C/c,KAAKob,UAAU1V,iBAAiB,iDAAiD1F,KAAK6J,UAAUC,QAAQC,kBACjG,QAET/J,KAAKuI,UACFa,IAAI,kBACJrF,KACC,OAAA+X,EAAA,UAAUkB,GACD,OAAAzY,EAAA,GACLvE,KAAK0I,YAAYgB,OAAO,CACtBrH,QAAS2a,MAIf,OAAAlB,EAAA,UAAUnS,IACRA,EAAQC,UACR5J,KAAK6J,UAAUC,QAAQmS,WAAajX,EAAK+X,WACzC/c,KAAK6J,UAAUC,QAAQoS,MAAQlX,EAAKiY,QAC7Bjd,KAAKgb,cACTkC,aAAald,KAAK6J,WAClB9F,KACC,OAAAC,EAAA,GAAKe,IACH/E,KAAK6J,UAAY9E,KAGpBhB,KACC,OAAAC,EAAA,GACGiG,IACCN,EAAQpD,WAET7G,IACCM,KAAK6J,UAAUC,QAAQmS,WAAa,GACpCjc,KAAK6J,UAAUC,QAAQoS,MAAQ,GAC/BvS,EAAQpD,UACRsT,QAAQC,IAAIpa,GACZM,KAAKob,UAAU1V,iBAAiBhG,IACzB,QAMlBJ,aA7CDU,KAAKob,UAAU1V,iBAAiB,8BACzB,UAiDhB3B,KACD,OAAAC,EAAA,GAAI,KACFiH,EAAMM,QAAUT,EAChBG,EAAMrB,eAKbtK,YAGL,a,QACE,MAA+D,eAAjC,QAAvB,EAAc,QAAd,EAAAU,KAAK6J,iBAAS,eAAEC,eAAO,eAAEqT,OAAOC,qBAGzC,oB,MACE,SAAIpd,KAAK6J,aAA2B,QAAlB,EAAI7J,KAAK6J,iBAAS,eAAEC,WAC7B9J,KAAK2I,OAAO0U,S,6CArSZxC,GAAiB,+H,uBAAjBA,EAAiB,88BF1B9B,uBACE,wBACE,wBACE,uBAAY,+BAAS,EAAAtU,YACnB,qBACF,OACF,OACA,oBACE,Q,oBAA2C,aAC3C,qBAA8B,S,qBAA0E,OAC1G,OACF,OACF,OACA,yBACE,qBACE,cAAI,SAA0B,OAC9B,sBAA4B,SAAyB,OACvD,OAEA,qBACE,oBACE,aAAG,S,qBAAgD,OACrD,OACA,iBACE,uBACE,mBACE,sBAA0C,S,qBAA2C,OACrF,sBAA0C,SAAsB,OAClE,OACA,mBACE,sBAA0C,S,qBAAiD,OAC3F,sBAA0C,SAA8B,OAC1E,OACA,mBACE,sBAA0C,S,qBAA6C,OACvF,sBAA0C,S,gBAA+C,OAC3F,OACA,mBACE,sBAA0C,S,qBAAmD,OAC7F,sBAA0C,S,gBAA4D,OACxG,OACF,OACF,OACF,OAEA,+BAgDA,qBACE,oBACE,aAAG,S,qBAAmD,OACxD,OACA,iBACE,uBACE,mBACE,mBACE,uBAAwB,oDAAmC,EAAA+W,UAAY,EAAAC,WACrE,qBAAY,S,qBAAgD,OAC5D,wBACE,uBACF,OACF,OACF,OACF,OACF,OACF,OACF,OACF,OACA,iC,MAzGM,8DAC8B,sHAM5B,6DACwB,4DAKvB,6DAK2C,+DACA,gEAGA,qEACA,wEAGA,iEACA,2FAGA,uEACA,wGAMjB,gEAkD1B,gEAOiB,oEAEkC,+EAS3B,sC,0eEvF1B,GDbCC,UAAW,WAUZ,a,MAAMC,G,8BAAAA,I,oDAAAA,IAA8B,SAHhC,CAAC,IAAaC,SAAShD,KACtB,O,GAEL,G,iBEZA,a,MAAMiD,G,8BAAAA,I,oDAAAA,IAAwB,SAJ1B,CAAC,IAAc,KAAa,Q,GAIhC,GCCA,S,MAAMC,G,8BAAAA,I,oDAAAA,IAAiC,SAJnC,CAAC,IAAc,KAAa,IAAqB,IAAa,O,GAIlE,GCFA,S,MAAMC,G,8BAAAA,I,oDAAAA,IAAyB,SAJ3B,CAAC,IAAc,S,GAInB,GCuBA,S,MAAMC,G,8BAAAA,I,oDAAAA,IAAuB,SAfzB,CACP,IACA,IACA,IACA,IACA,KACA,IACA,GACA,KACA,GACA,O,GAKG,I,oCC5BPxf,EAAQuC,UAHR,SAAmBrB,GACf,QAASA,GAAoC,mBAApBA,EAAMF,WAAkD,mBAAfE,EAAMue,O,oCCD5E,IAAIC,EAAa,EAAQ,QASzB,SAASC,EAAcC,GACnB,OAAmB,IAAfA,EAAIpe,OACGke,EAAWG,SAEH,IAAfD,EAAIpe,OACGoe,EAAI,GAER,SAAe1f,GAClB,OAAO0f,EAAIE,OAAO,SAAUC,EAAMhO,GAAM,OAAOA,EAAGgO,IAAU7f,IATpEF,EAAQyF,KAPR,WAEI,IADA,IAAIma,EAAM,GACDI,EAAK,EAAGA,EAAKC,UAAUze,OAAQwe,IACpCJ,EAAII,GAAMC,UAAUD,GAExB,OAAOL,EAAcC,IAczB5f,EAAQ2f,cAAgBA,G,kCCpBxB,IAAIO,EAAuB,EAAQ,QAC/BC,EAAoB,EAAQ,QAC5BC,EAAkB,EAAQ,QAC1BC,EAAqB,EAAQ,QAC7BC,EAAwB,EAAQ,QAChCte,EAAc,EAAQ,QACtBD,EAAgB,EAAQ,QACxBwe,EAAe,EAAQ,QAkB3BvgB,EAAQwgB,UAjBR,SAAmBtgB,EAAOM,GACtB,GAAa,MAATN,EAAe,CACf,GAAIogB,EAAsBG,oBAAoBvgB,GAC1C,OAAOggB,EAAqB3f,mBAAmBL,EAAOM,GAErD,GAAIwB,EAAYO,UAAUrC,GAC3B,OAAOigB,EAAkBO,gBAAgBxgB,EAAOM,GAE/C,GAAIuB,EAAcM,YAAYnC,GAC/B,OAAOkgB,EAAgB9e,cAAcpB,EAAOM,GAE3C,GAAI+f,EAAatgB,WAAWC,IAA2B,iBAAVA,EAC9C,OAAOmgB,EAAmBM,iBAAiBzgB,EAAOM,GAG1D,MAAM,IAAImC,WAAqB,OAAVzC,UAAyBA,GAASA,GAAS,wB,kCCxBpE,IAAI0gB,EAAalf,MAAQA,KAAKkf,WAAc,WACxC,IAAIC,EAAgB,SAAUC,EAAGrH,GAI7B,OAHAoH,EAAgBha,OAAOka,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUH,EAAGrH,GAAKqH,EAAEE,UAAYvH,IACvE,SAAUqH,EAAGrH,GAAK,IAAK,IAAIyH,KAAKzH,EAAOA,EAAE0H,eAAeD,KAAIJ,EAAEI,GAAKzH,EAAEyH,MACpDJ,EAAGrH,IAE5B,OAAO,SAAUqH,EAAGrH,GAEhB,SAAS2H,IAAO1f,KAAK2f,YAAcP,EADnCD,EAAcC,EAAGrH,GAEjBqH,EAAEpO,UAAkB,OAAN+G,EAAa5S,OAAOuE,OAAOqO,IAAM2H,EAAG1O,UAAY+G,EAAE/G,UAAW,IAAI0O,IAV3C,GAcxCE,EAAe,EAAQ,QACvBC,EAAa,EAAQ,QACrBlhB,EAAiB,EAAQ,QACzBmhB,EAAiB,EAAQ,QACzBC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5B3e,EAAc,SAAU4e,GAExB,SAAS5e,EAAW6e,EAAmBzgB,EAAOE,GAC1C,IAAIwgB,EAAQF,EAAOG,KAAKpgB,OAASA,KAKjC,OAJAmgB,EAAME,eAAiB,KACvBF,EAAMG,iBAAkB,EACxBH,EAAMI,oBAAqB,EAC3BJ,EAAMK,WAAY,EACVjC,UAAUze,QACd,KAAK,EACDqgB,EAAM7e,YAAcue,EAAWY,MAC/B,MACJ,KAAK,EACD,IAAKP,EAAmB,CACpBC,EAAM7e,YAAcue,EAAWY,MAC/B,MAEJ,GAAiC,iBAAtBP,EAAgC,CACnCA,aAA6B7e,GAC7B8e,EAAMI,mBAAqBL,EAAkBK,mBAC7CJ,EAAM7e,YAAc4e,EACpBA,EAAkB/gB,IAAIghB,KAGtBA,EAAMI,oBAAqB,EAC3BJ,EAAM7e,YAAc,IAAIof,EAAeP,EAAOD,IAElD,MAER,QACIC,EAAMI,oBAAqB,EAC3BJ,EAAM7e,YAAc,IAAIof,EAAeP,EAAOD,EAAmBzgB,EAAOE,GAGhF,OAAOwgB,EAoDX,OArFAjB,EAAU7d,EAAY4e,GAmCtB5e,EAAW2P,UAAU8O,EAAea,cAAgB,WAAc,OAAO3gB,MACzEqB,EAAWqI,OAAS,SAAUnK,EAAME,EAAOE,GACvC,IAAIX,EAAa,IAAIqC,EAAW9B,EAAME,EAAOE,GAE7C,OADAX,EAAWuhB,oBAAqB,EACzBvhB,GAEXqC,EAAW2P,UAAUzR,KAAO,SAAUC,GAC7BQ,KAAKwgB,WACNxgB,KAAK4gB,MAAMphB,IAGnB6B,EAAW2P,UAAUvR,MAAQ,SAAUC,GAC9BM,KAAKwgB,YACNxgB,KAAKwgB,WAAY,EACjBxgB,KAAK6gB,OAAOnhB,KAGpB2B,EAAW2P,UAAUrR,SAAW,WACvBK,KAAKwgB,YACNxgB,KAAKwgB,WAAY,EACjBxgB,KAAK8gB,cAGbzf,EAAW2P,UAAU7O,YAAc,WAC3BnC,KAAKD,SAGTC,KAAKwgB,WAAY,EACjBP,EAAOjP,UAAU7O,YAAYie,KAAKpgB,QAEtCqB,EAAW2P,UAAU4P,MAAQ,SAAUphB,GACnCQ,KAAKsB,YAAY/B,KAAKC,IAE1B6B,EAAW2P,UAAU6P,OAAS,SAAUnhB,GACpCM,KAAKsB,YAAY7B,MAAMC,GACvBM,KAAKmC,eAETd,EAAW2P,UAAU8P,UAAY,WAC7B9gB,KAAKsB,YAAY3B,WACjBK,KAAKmC,eAETd,EAAW2P,UAAU+P,uBAAyB,WAC1C,IAAIC,EAAmBhhB,KAAKghB,iBAM5B,OALAhhB,KAAKghB,iBAAmB,KACxBhhB,KAAKmC,cACLnC,KAAKD,QAAS,EACdC,KAAKwgB,WAAY,EACjBxgB,KAAKghB,iBAAmBA,EACjBhhB,MAEJqB,EAtFM,CAuFf1C,EAAeO,cACjBZ,EAAQ+C,WAAaA,EACrB,IAAIqf,EAAkB,SAAUT,GAE5B,SAASS,EAAeO,EAAmBC,EAAgBzhB,EAAOE,GAC9D,IAEIJ,EAFA4gB,EAAQF,EAAOG,KAAKpgB,OAASA,KACjCmgB,EAAMc,kBAAoBA,EAE1B,IAAIE,EAAUhB,EAoBd,OAnBIP,EAAawB,WAAWF,GACxB3hB,EAAO2hB,EAEFA,IACL3hB,EAAO2hB,EAAe3hB,KACtBE,EAAQyhB,EAAezhB,MACvBE,EAAWuhB,EAAevhB,SACtBuhB,IAAmBrB,EAAWY,QAC9BU,EAAUhc,OAAOuE,OAAOwX,GACpBtB,EAAawB,WAAWD,EAAQhf,cAChCge,EAAMhhB,IAAIgiB,EAAQhf,YAAYkf,KAAKF,IAEvCA,EAAQhf,YAAcge,EAAMhe,YAAYkf,KAAKlB,KAGrDA,EAAMmB,SAAWH,EACjBhB,EAAMS,MAAQrhB,EACd4gB,EAAMU,OAASphB,EACf0gB,EAAMW,UAAYnhB,EACXwgB,EA0GX,OAnIAjB,EAAUwB,EAAgBT,GA2B1BS,EAAe1P,UAAUzR,KAAO,SAAUC,GACtC,IAAKQ,KAAKwgB,WAAaxgB,KAAK4gB,MAAO,CAC/B,IAAIK,EAAoBjhB,KAAKihB,kBACxBlB,EAASwB,OAAOC,uCAA0CP,EAAkBV,mBAGxEvgB,KAAKyhB,gBAAgBR,EAAmBjhB,KAAK4gB,MAAOphB,IACzDQ,KAAKmC,cAHLnC,KAAK0hB,aAAa1hB,KAAK4gB,MAAOphB,KAO1CkhB,EAAe1P,UAAUvR,MAAQ,SAAUC,GACvC,IAAKM,KAAKwgB,UAAW,CACjB,IAAIS,EAAoBjhB,KAAKihB,kBACzBO,EAAwCzB,EAASwB,OAAOC,sCAC5D,GAAIxhB,KAAK6gB,OACAW,GAA0CP,EAAkBV,oBAK7DvgB,KAAKyhB,gBAAgBR,EAAmBjhB,KAAK6gB,OAAQnhB,GACrDM,KAAKmC,gBALLnC,KAAK0hB,aAAa1hB,KAAK6gB,OAAQnhB,GAC/BM,KAAKmC,oBAOR,GAAK8e,EAAkBV,mBAQpBiB,GACAP,EAAkBZ,eAAiB3gB,EACnCuhB,EAAkBX,iBAAkB,GAGpCN,EAAkB2B,gBAAgBjiB,GAEtCM,KAAKmC,kBAfuC,CAE5C,GADAnC,KAAKmC,cACDqf,EACA,MAAM9hB,EAEVsgB,EAAkB2B,gBAAgBjiB,MAc9CghB,EAAe1P,UAAUrR,SAAW,WAChC,IAAIwgB,EAAQngB,KACZ,IAAKA,KAAKwgB,UAAW,CACjB,IAAIS,EAAoBjhB,KAAKihB,kBAC7B,GAAIjhB,KAAK8gB,UAAW,CAChB,IAAIc,EAAkB,WAAc,OAAOzB,EAAMW,UAAUV,KAAKD,EAAMmB,WACjEvB,EAASwB,OAAOC,uCAA0CP,EAAkBV,oBAK7EvgB,KAAKyhB,gBAAgBR,EAAmBW,GACxC5hB,KAAKmC,gBALLnC,KAAK0hB,aAAaE,GAClB5hB,KAAKmC,oBAQTnC,KAAKmC,gBAIjBue,EAAe1P,UAAU0Q,aAAe,SAAUrR,EAAI7Q,GAClD,IACI6Q,EAAG+P,KAAKpgB,KAAKshB,SAAU9hB,GAE3B,MAAOE,GAEH,GADAM,KAAKmC,cACD4d,EAASwB,OAAOC,sCAChB,MAAM9hB,EAGNsgB,EAAkB2B,gBAAgBjiB,KAI9CghB,EAAe1P,UAAUyQ,gBAAkB,SAAUI,EAAQxR,EAAI7Q,GAC7D,IAAKugB,EAASwB,OAAOC,sCACjB,MAAM,IAAI5c,MAAM,YAEpB,IACIyL,EAAG+P,KAAKpgB,KAAKshB,SAAU9hB,GAE3B,MAAOE,GACH,OAAIqgB,EAASwB,OAAOC,uCAChBK,EAAOxB,eAAiB3gB,EACxBmiB,EAAOvB,iBAAkB,GAClB,IAGPN,EAAkB2B,gBAAgBjiB,IAC3B,GAGf,OAAO,GAEXghB,EAAe1P,UAAU8Q,aAAe,WACpC,IAAIb,EAAoBjhB,KAAKihB,kBAC7BjhB,KAAKshB,SAAW,KAChBthB,KAAKihB,kBAAoB,KACzBA,EAAkB9e,eAEfue,EApIU,CAqInBrf,GACF/C,EAAQoiB,eAAiBA,G,kCC/OzBpiB,EAAQ0C,SAHR,SAAkB4F,GACd,OAAa,OAANA,GAA2B,iBAANA,I,kCCDhC,IAAImZ,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAChC1hB,EAAQmiB,MAAQ,CACZ1gB,QAAQ,EACRR,KAAM,SAAUC,KAChBC,MAAO,SAAUC,GACb,GAAIqgB,EAASwB,OAAOC,sCAChB,MAAM9hB,EAGNsgB,EAAkB2B,gBAAgBjiB,IAG1CC,SAAU,e,kCCbd,IAAIf,EAAe,EAAQ,QAI3BN,EAAQygB,oBAHR,SAA6BvgB,GACzB,OAAOA,GAAmD,mBAAnCA,EAAMI,EAAaS,c,kCCU9Cf,EAAQyjB,oBAZsB,WAC1B,SAASC,EAAwBC,GAM7B,OALArd,MAAMwb,KAAKpgB,MACXA,KAAKqC,QAAU4f,EACXA,EAAOniB,OAAS,4CAA8CmiB,EAAOnd,IAAI,SAAUpF,EAAKG,GAAK,OAAOA,EAAI,EAAI,KAAOH,EAAIiX,aAAeuL,KAAK,QAAU,GACzJliB,KAAKgL,KAAO,sBACZhL,KAAKiiB,OAASA,EACPjiB,KAGX,OADAgiB,EAAwBhR,UAAY7L,OAAOuE,OAAO9E,MAAMoM,WACjDgR,EAVmB,I,oCCA9B,IAAItjB,EAAe,EAAQ,QACvBC,EAAiB,EAAQ,QACzBN,EAAa,EAAQ,QA0CzBC,EAAQ2gB,iBAzCR,SAA0BzgB,EAAOM,GAC7B,IAAKN,EACD,MAAM,IAAIoG,MAAM,2BAEpB,OAAO,IAAIlG,EAAaK,WAAW,SAAUC,GACzC,IACIP,EADAQ,EAAM,IAAIN,EAAeO,aAiC7B,OA/BAD,EAAIE,IAAI,WACAV,GAAuC,mBAApBA,EAAS0jB,QAC5B1jB,EAAS0jB,WAGjBljB,EAAIE,IAAIL,EAAUM,SAAS,WACvBX,EAAWD,EAAMH,EAAWI,YAC5BQ,EAAIE,IAAIL,EAAUM,SAAS,WACvB,IAAIJ,EAAWe,OAAf,CAGA,IAAIP,EACA4iB,EACJ,IACI,IAAI3hB,EAAShC,EAASc,OACtBC,EAAQiB,EAAOjB,MACf4iB,EAAO3hB,EAAO2hB,KAElB,MAAO1iB,GAEH,YADAV,EAAWS,MAAMC,GAGjB0iB,EACApjB,EAAWW,YAGXX,EAAWO,KAAKC,GAChBQ,KAAKZ,mBAIVH,M,kCCtCfX,EAAQqjB,gBAHR,SAAyBjiB,GACrB8D,WAAW,WAAc,MAAM9D,GAAQ,K,kCCD3CpB,EAAQsC,iBAAmB,SAAUyhB,GAAS,OAAO,SAAUrjB,GAC3D,IAAK,IAAIa,EAAI,EAAGyiB,EAAMD,EAAMviB,OAAQD,EAAIyiB,IAAQtjB,EAAWe,OAAQF,IAC/Db,EAAWO,KAAK8iB,EAAMxiB,IAE1Bb,EAAWW,c,kCCJf,IAAI4iB,EAAmB,EAAQ,QAC3BC,EAAiB,EAAQ,QACzB5jB,EAAe,EAAQ,QACvB6jB,EAAS,EAAQ,QACjB1C,EAAW,EAAQ,QAqGvB,SAAS2C,EAAeC,GAIpB,GAHKA,IACDA,EAAc5C,EAASwB,OAAOqB,SAAWA,UAExCD,EACD,MAAM,IAAI/d,MAAM,yBAEpB,OAAO+d,EARXrkB,EAAQS,WAnGU,WACd,SAASA,EAAWO,GAChBU,KAAK6iB,WAAY,EACbvjB,IACAU,KAAK8iB,WAAaxjB,GA6F1B,OA1FAP,EAAWiS,UAAU1M,KAAO,SAAUye,GAClC,IAAI1jB,EAAa,IAAIN,EAGrB,OAFAM,EAAW+B,OAASpB,KACpBX,EAAW0jB,SAAWA,EACf1jB,GAEXN,EAAWiS,UAAU1R,UAAY,SAAU4hB,EAAgBzhB,EAAOE,GAC9D,IAAIojB,EAAW/iB,KAAK+iB,SAChBC,EAAOR,EAAeS,aAAa/B,EAAgBzhB,EAAOE,GAS9D,GAPIqjB,EAAK7jB,IADL4jB,EACSA,EAAS3C,KAAK4C,EAAMhjB,KAAKoB,QAGzBpB,KAAKoB,QAAW2e,EAASwB,OAAOC,wCAA0CwB,EAAKzC,mBACpFvgB,KAAK8iB,WAAWE,GAChBhjB,KAAKkjB,cAAcF,IAEvBjD,EAASwB,OAAOC,uCACZwB,EAAKzC,qBACLyC,EAAKzC,oBAAqB,EACtByC,EAAK1C,iBACL,MAAM0C,EAAK3C,eAIvB,OAAO2C,GAEXjkB,EAAWiS,UAAUkS,cAAgB,SAAUF,GAC3C,IACI,OAAOhjB,KAAK8iB,WAAWE,GAE3B,MAAOtjB,GACCqgB,EAASwB,OAAOC,wCAChBwB,EAAK1C,iBAAkB,EACvB0C,EAAK3C,eAAiB3gB,GAEtB6iB,EAAiBY,eAAeH,GAChCA,EAAKvjB,MAAMC,GAGXma,QAAQuJ,KAAK1jB,KAIzBX,EAAWiS,UAAUrK,QAAU,SAAUpH,EAAMojB,GAC3C,IAAIxC,EAAQngB,KAEZ,OAAO,IADP2iB,EAAcD,EAAeC,IACN,SAAUU,EAASC,GACtC,IAAIC,EACJA,EAAepD,EAAM7gB,UAAU,SAAUE,GACrC,IACID,EAAKC,GAET,MAAOE,GACH4jB,EAAO5jB,GACH6jB,GACAA,EAAaphB,gBAGtBmhB,EAAQD,MAGnBtkB,EAAWiS,UAAU8R,WAAa,SAAU9jB,GACxC,IAAIoC,EAASpB,KAAKoB,OAClB,OAAOA,GAAUA,EAAO9B,UAAUN,IAEtCD,EAAWiS,UAAUpS,EAAaS,YAAc,WAC5C,OAAOW,MAEXjB,EAAWiS,UAAUjN,KAAO,WAExB,IADA,IAAIyf,EAAa,GACRlF,EAAK,EAAGA,EAAKC,UAAUze,OAAQwe,IACpCkF,EAAWlF,GAAMC,UAAUD,GAE/B,OAA0B,IAAtBkF,EAAW1jB,OACJE,KAEJyiB,EAAOxE,cAAcuF,EAArBf,CAAiCziB,OAE5CjB,EAAWiS,UAAUyS,UAAY,SAAUd,GACvC,IAAIxC,EAAQngB,KAEZ,OAAO,IADP2iB,EAAcD,EAAeC,IACN,SAAUU,EAASC,GACtC,IAAI9jB,EACJ2gB,EAAM7gB,UAAU,SAAUsH,GAAK,OAAOpH,EAAQoH,GAAM,SAAUlH,GAAO,OAAO4jB,EAAO5jB,IAAS,WAAc,OAAO2jB,EAAQ7jB,QAGjIT,EAAW2K,OAAS,SAAUpK,GAC1B,OAAO,IAAIP,EAAWO,IAEnBP,EAjGM,I,kCCNjB,IAAImgB,EAAalf,MAAQA,KAAKkf,WAAc,WACxC,IAAIC,EAAgB,SAAUC,EAAGrH,GAI7B,OAHAoH,EAAgBha,OAAOka,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUH,EAAGrH,GAAKqH,EAAEE,UAAYvH,IACvE,SAAUqH,EAAGrH,GAAK,IAAK,IAAIyH,KAAKzH,EAAOA,EAAE0H,eAAeD,KAAIJ,EAAEI,GAAKzH,EAAEyH,MACpDJ,EAAGrH,IAE5B,OAAO,SAAUqH,EAAGrH,GAEhB,SAAS2H,IAAO1f,KAAK2f,YAAcP,EADnCD,EAAcC,EAAGrH,GAEjBqH,EAAEpO,UAAkB,OAAN+G,EAAa5S,OAAOuE,OAAOqO,IAAM2H,EAAG1O,UAAY+G,EAAE/G,UAAW,IAAI0O,IAV3C,GAcxCgE,EAAQ,EAAQ,QAChBC,EAAS,EAAQ,QACjBC,EAAmB,EAAQ,QAC/B,SAAS9H,EAAS+H,EAASC,EAAgBC,GAEvC,YADmB,IAAfA,IAAyBA,EAAaC,OAAOC,mBACnB,mBAAnBH,EACA,SAAU1iB,GAAU,OAAOA,EAAO2C,KAAK+X,EAAS,SAAUoI,EAAGrkB,GAAK,OAAO8jB,EAAOpf,KAAKsf,EAAQK,EAAGrkB,IAAIkE,KAAK2f,EAAM5e,IAAI,SAAUiT,EAAGoM,GAAM,OAAOL,EAAeI,EAAGnM,EAAGlY,EAAGskB,OAAaJ,MAE1J,iBAAnBD,IACZC,EAAaD,GAEV,SAAU1iB,GAAU,OAAOA,EAAOkD,KAAK,IAAI8f,EAAiBP,EAASE,MAEhFzlB,EAAQwd,SAAWA,EACnB,IAAIsI,EAAoB,WACpB,SAASA,EAAiBP,EAASE,QACZ,IAAfA,IAAyBA,EAAaC,OAAOC,mBACjDjkB,KAAK6jB,QAAUA,EACf7jB,KAAK+jB,WAAaA,EAKtB,OAHAK,EAAiBpT,UAAUoP,KAAO,SAAUiE,EAAUjjB,GAClD,OAAOA,EAAO9B,UAAU,IAAIglB,EAAmBD,EAAUrkB,KAAK6jB,QAAS7jB,KAAK+jB,cAEzEK,EATY,GAWvB9lB,EAAQ8lB,iBAAmBA,EAC3B,IAAIE,EAAsB,SAAUrE,GAEhC,SAASqE,EAAmBhjB,EAAauiB,EAASE,QAC3B,IAAfA,IAAyBA,EAAaC,OAAOC,mBACjD,IAAI9D,EAAQF,EAAOG,KAAKpgB,KAAMsB,IAAgBtB,KAO9C,OANAmgB,EAAM0D,QAAUA,EAChB1D,EAAM4D,WAAaA,EACnB5D,EAAMoE,cAAe,EACrBpE,EAAMqE,OAAS,GACfrE,EAAM1e,OAAS,EACf0e,EAAMsE,MAAQ,EACPtE,EAoDX,OA9DAjB,EAAUoF,EAAoBrE,GAY9BqE,EAAmBtT,UAAU4P,MAAQ,SAAUphB,GACvCQ,KAAKyB,OAASzB,KAAK+jB,WACnB/jB,KAAK0kB,SAASllB,GAGdQ,KAAKwkB,OAAOjiB,KAAK/C,IAGzB8kB,EAAmBtT,UAAU0T,SAAW,SAAUllB,GAC9C,IAAIiB,EACAgkB,EAAQzkB,KAAKykB,QACjB,IACIhkB,EAAST,KAAK6jB,QAAQrkB,EAAOilB,GAEjC,MAAO/kB,GAEH,YADAM,KAAKsB,YAAY7B,MAAMC,GAG3BM,KAAKyB,SACLzB,KAAK2kB,UAAUlkB,IAEnB6jB,EAAmBtT,UAAU2T,UAAY,SAAUC,GAC/C,IAAIC,EAAkB,IAAIjB,EAAiBkB,sBAAsB9kB,MAC7DsB,EAActB,KAAKsB,YACvBA,EAAYnC,IAAI0lB,GAChB,IAAIE,EAAoBnB,EAAiBoB,eAAeJ,EAAKC,GACzDE,IAAsBF,GACtBvjB,EAAYnC,IAAI4lB,IAGxBT,EAAmBtT,UAAU8P,UAAY,WACrC9gB,KAAKukB,cAAe,EACA,IAAhBvkB,KAAKyB,QAAuC,IAAvBzB,KAAKwkB,OAAO1kB,QACjCE,KAAKsB,YAAY3B,WAErBK,KAAKmC,eAETmiB,EAAmBtT,UAAUiU,WAAa,SAAUC,GAChDllB,KAAKsB,YAAY/B,KAAK2lB,IAE1BZ,EAAmBtT,UAAUmU,eAAiB,WAC1C,IAAIX,EAASxkB,KAAKwkB,OAClBxkB,KAAKyB,SACD+iB,EAAO1kB,OAAS,EAChBE,KAAK4gB,MAAM4D,EAAO1iB,SAEG,IAAhB9B,KAAKyB,QAAgBzB,KAAKukB,cAC/BvkB,KAAKsB,YAAY3B,YAGlB2kB,EA/Dc,CAgEvBV,EAAiBwB,uBACnB9mB,EAAQgmB,mBAAqBA,EAC7BhmB,EAAQ+mB,QAAUvJ,G,kCCzGlB,SAASwJ,IACL,MAAsB,mBAAXC,QAA0BA,OAAO9mB,SAGrC8mB,OAAO9mB,SAFH,aAIfH,EAAQgnB,kBAAoBA,EAC5BhnB,EAAQG,SAAW6mB,IACnBhnB,EAAQknB,WAAalnB,EAAQG,U,oCCR7B,IAAIgnB,EAAe,EAAQ,QACvB3F,EAAiB,EAAQ,QACzBD,EAAa,EAAQ,QAezBvhB,EAAQ2kB,aAdR,SAAsByC,EAAgBjmB,EAAOE,GACzC,GAAI+lB,EAAgB,CAChB,GAAIA,aAA0BD,EAAapkB,WACvC,OAAOqkB,EAEX,GAAIA,EAAe5F,EAAea,cAC9B,OAAO+E,EAAe5F,EAAea,gBAG7C,OAAK+E,GAAmBjmB,GAAUE,EAG3B,IAAI8lB,EAAapkB,WAAWqkB,EAAgBjmB,EAAOE,GAF/C,IAAI8lB,EAAapkB,WAAWwe,EAAWY,S,kCCbtD,IAAIT,EAAoB,EAAQ,QAChC1hB,EAAQwC,mBAAqB,SAAU6kB,GAAW,OAAO,SAAU3mB,GAQ/D,OAPA2mB,EAAQ5H,KAAK,SAAUve,GACdR,EAAWe,SACZf,EAAWO,KAAKC,GAChBR,EAAWW,aAEhB,SAAUD,GAAO,OAAOV,EAAWS,MAAMC,KACvCqe,KAAK,KAAMiC,EAAkB2B,iBAC3B3iB,K,kCCTX,IAAIN,EAAe,EAAQ,QACvBknB,EAAgB,EAAQ,QACxBC,EAAc,EAAQ,QAY1BvnB,EAAQiG,KAXR,SAAc/F,EAAOM,GACjB,OAAKA,EAOM+mB,EAAY/G,UAAUtgB,EAAOM,GANhCN,aAAiBE,EAAaK,WACvBP,EAEJ,IAAIE,EAAaK,WAAW6mB,EAAcplB,YAAYhC,M,kCCRrEF,EAAQwnB,QAAU,WAAe,OAAOvG,MAAMuG,SAAW,SAAWlf,GAAK,OAAOA,GAAyB,iBAAbA,EAAE9G,QAA5E,I,kCCAlB,IAAIimB,GAAsD,EAC1DznB,EAAQijB,OAAS,CACbqB,aAASvL,EACT,0CAA0C7X,GACtC,GAAIA,EAAO,CACP,IAAIC,EAAQ,IAAImF,MAChBiV,QAAQuJ,KAAK,gGAAkG3jB,EAAMumB,YAEhHD,GACLlM,QAAQC,IAAI,wDAEhBiM,EAAsDvmB,GAE1D,4CACI,OAAOumB,K,kCCdf,IAAIrnB,EAAe,EAAQ,QACvBC,EAAiB,EAAQ,QAe7BL,EAAQ0gB,gBAdR,SAAyBxgB,EAAOM,GAC5B,OAAO,IAAIJ,EAAaK,WAAW,SAAUC,GACzC,IAAIC,EAAM,IAAIN,EAAeO,aAS7B,OARAD,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOZ,EAAMuf,KAAK,SAAUve,GACjEP,EAAIE,IAAIL,EAAUM,SAAS,WACvBJ,EAAWO,KAAKC,GAChBP,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOJ,EAAWW,kBAEhE,SAAUD,GACTT,EAAIE,IAAIL,EAAUM,SAAS,WAAc,OAAOJ,EAAWS,MAAMC,WAE9DT,M,kCCbf,IAAIL,EAAe,EAAQ,QAC3BN,EAAQoC,sBAAwB,SAAUulB,GAAO,OAAO,SAAUjnB,GAC9D,IAAIknB,EAAMD,EAAIrnB,EAAaS,cAC3B,GAA6B,mBAAlB6mB,EAAI5mB,UACX,MAAM,IAAI2B,UAAU,kEAGpB,OAAOilB,EAAI5mB,UAAUN,M,oCCP7BV,EAAQqiB,aAAe,WACnB,MAAyB,mBAAX4E,OACRA,OAAO,gBACP,kBAAoBtjB,KAAKkkB,SAHZ,GAKvB7nB,EAAQ8nB,eAAiB9nB,EAAQqiB,c,kCCLjC,IAAItiB,EAAa,EAAQ,QACzBC,EAAQyC,oBAAsB,SAAUslB,GAAY,OAAO,SAAUrnB,GAEjE,IADA,IAAIP,EAAW4nB,EAAShoB,EAAWI,cAChC,CACC,IAAI6nB,OAAO,EACX,IACIA,EAAO7nB,EAASc,OAEpB,MAAOG,GAEH,OADAV,EAAWS,MAAMC,GACVV,EAEX,GAAIsnB,EAAKlE,KAAM,CACXpjB,EAAWW,WACX,MAGJ,GADAX,EAAWO,KAAK+mB,EAAK9mB,OACjBR,EAAWe,OACX,MAUR,MAP+B,mBAApBtB,EAAS0jB,QAChBnjB,EAAWG,IAAI,WACPV,EAAS0jB,QACT1jB,EAAS0jB,WAIdnjB,K,kCCzBXV,EAAQ8iB,WAHR,SAAoBxa,GAChB,MAAoB,mBAANA,I,kCCFlB,IAAIsY,EAAalf,MAAQA,KAAKkf,WAAc,WACxC,IAAIC,EAAgB,SAAUC,EAAGrH,GAI7B,OAHAoH,EAAgBha,OAAOka,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUH,EAAGrH,GAAKqH,EAAEE,UAAYvH,IACvE,SAAUqH,EAAGrH,GAAK,IAAK,IAAIyH,KAAKzH,EAAOA,EAAE0H,eAAeD,KAAIJ,EAAEI,GAAKzH,EAAEyH,MACpDJ,EAAGrH,IAE5B,OAAO,SAAUqH,EAAGrH,GAEhB,SAAS2H,IAAO1f,KAAK2f,YAAcP,EADnCD,EAAcC,EAAGrH,GAEjBqH,EAAEpO,UAAkB,OAAN+G,EAAa5S,OAAOuE,OAAOqO,IAAM2H,EAAG1O,UAAY+G,EAAE/G,UAAW,IAAI0O,IAV3C,GAcxC+F,EAAe,EAAQ,QAS3BnnB,EAAQwG,IARR,SAAa+e,EAAS0C,GAClB,OAAO,SAAsBnlB,GACzB,GAAuB,mBAAZyiB,EACP,MAAM,IAAI5iB,UAAU,8DAExB,OAAOG,EAAOkD,KAAK,IAAIkiB,EAAY3C,EAAS0C,MAIpD,IAAIC,EAAe,WACf,SAASA,EAAY3C,EAAS0C,GAC1BvmB,KAAK6jB,QAAUA,EACf7jB,KAAKumB,QAAUA,EAKnB,OAHAC,EAAYxV,UAAUoP,KAAO,SAAUphB,EAAYoC,GAC/C,OAAOA,EAAO9B,UAAU,IAAImnB,EAAcznB,EAAYgB,KAAK6jB,QAAS7jB,KAAKumB,WAEtEC,EARO,GAUlBloB,EAAQkoB,YAAcA,EACtB,IAAIC,EAAiB,SAAUxG,GAE3B,SAASwG,EAAcnlB,EAAauiB,EAAS0C,GACzC,IAAIpG,EAAQF,EAAOG,KAAKpgB,KAAMsB,IAAgBtB,KAI9C,OAHAmgB,EAAM0D,QAAUA,EAChB1D,EAAMuG,MAAQ,EACdvG,EAAMoG,QAAUA,GAAWpG,EACpBA,EAaX,OAnBAjB,EAAUuH,EAAexG,GAQzBwG,EAAczV,UAAU4P,MAAQ,SAAUphB,GACtC,IAAIiB,EACJ,IACIA,EAAST,KAAK6jB,QAAQzD,KAAKpgB,KAAKumB,QAAS/mB,EAAOQ,KAAK0mB,SAEzD,MAAOhnB,GAEH,YADAM,KAAKsB,YAAY7B,MAAMC,GAG3BM,KAAKsB,YAAY/B,KAAKkB,IAEnBgmB,EApBS,CAqBlBhB,EAAapkB,a,kCCxDf,IAAI6d,EAAalf,MAAQA,KAAKkf,WAAc,WACxC,IAAIC,EAAgB,SAAUC,EAAGrH,GAI7B,OAHAoH,EAAgBha,OAAOka,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUH,EAAGrH,GAAKqH,EAAEE,UAAYvH,IACvE,SAAUqH,EAAGrH,GAAK,IAAK,IAAIyH,KAAKzH,EAAOA,EAAE0H,eAAeD,KAAIJ,EAAEI,GAAKzH,EAAEyH,MACpDJ,EAAGrH,IAE5B,OAAO,SAAUqH,EAAGrH,GAEhB,SAAS2H,IAAO1f,KAAK2f,YAAcP,EADnCD,EAAcC,EAAGrH,GAEjBqH,EAAEpO,UAAkB,OAAN+G,EAAa5S,OAAOuE,OAAOqO,IAAM2H,EAAG1O,UAAY+G,EAAE/G,UAAW,IAAI0O,IAV3C,GAcxC+F,EAAe,EAAQ,QACvB/mB,EAAe,EAAQ,QACvBknB,EAAgB,EAAQ,QACxBd,EAAyB,SAAU7E,GAEnC,SAAS6E,EAAsBjD,GAC3B,IAAI1B,EAAQF,EAAOG,KAAKpgB,OAASA,KAEjC,OADAmgB,EAAM0B,OAASA,EACR1B,EAaX,OAjBAjB,EAAU4F,EAAuB7E,GAMjC6E,EAAsB9T,UAAU4P,MAAQ,SAAUphB,GAC9CQ,KAAK6hB,OAAOoD,WAAWzlB,IAE3BslB,EAAsB9T,UAAU6P,OAAS,SAAUphB,GAC/CO,KAAK6hB,OAAO8E,YAAYlnB,GACxBO,KAAKmC,eAET2iB,EAAsB9T,UAAU8P,UAAY,WACxC9gB,KAAK6hB,OAAOsD,iBACZnlB,KAAKmC,eAEF2iB,EAlBiB,CAmB1BW,EAAapkB,YACf/C,EAAQwmB,sBAAwBA,EAChC,IAAI8B,EAA0B,SAAU3G,GAEpC,SAAS2G,EAAuB/E,EAAQgF,EAAYC,GAChD,IAAI3G,EAAQF,EAAOG,KAAKpgB,OAASA,KAIjC,OAHAmgB,EAAM0B,OAASA,EACf1B,EAAM0G,WAAaA,EACnB1G,EAAM2G,WAAaA,EACZ3G,EAaX,OAnBAjB,EAAU0H,EAAwB3G,GAQlC2G,EAAuB5V,UAAU4P,MAAQ,SAAUphB,GAC/CQ,KAAK6hB,OAAOoD,WAAWjlB,KAAK6mB,WAAYrnB,EAAOQ,KAAK8mB,WAAY9mB,OAEpE4mB,EAAuB5V,UAAU6P,OAAS,SAAUphB,GAChDO,KAAK6hB,OAAO8E,YAAYlnB,GACxBO,KAAKmC,eAETykB,EAAuB5V,UAAU8P,UAAY,WACzC9gB,KAAK6hB,OAAOsD,eAAenlB,MAC3BA,KAAKmC,eAEFykB,EApBkB,CAqB3BnB,EAAapkB,YACf/C,EAAQsoB,uBAAyBA,EACjC,IAAIxB,EAAyB,SAAUnF,GAEnC,SAASmF,IACL,OAAkB,OAAXnF,GAAmBA,EAAOtU,MAAM3L,KAAMue,YAAcve,KAW/D,OAbAkf,EAAUkG,EAAuBnF,GAIjCmF,EAAsBpU,UAAUiU,WAAa,SAAUC,GACnDllB,KAAKsB,YAAY/B,KAAK2lB,IAE1BE,EAAsBpU,UAAU2V,YAAc,SAAUjnB,GACpDM,KAAKsB,YAAY7B,MAAMC,IAE3B0lB,EAAsBpU,UAAUmU,eAAiB,WAC7CnlB,KAAKsB,YAAY3B,YAEdylB,EAdiB,CAe1BK,EAAapkB,YACf/C,EAAQ8mB,sBAAwBA,EAChC,IAAI2B,EAA0B,SAAU9G,GAEpC,SAAS8G,IACL,OAAkB,OAAX9G,GAAmBA,EAAOtU,MAAM3L,KAAMue,YAAcve,KAW/D,OAbAkf,EAAU6H,EAAwB9G,GAIlC8G,EAAuB/V,UAAUiU,WAAa,SAAU+B,EAAa9B,EAAY+B,EAAatC,GAC1F3kB,KAAKsB,YAAY/B,KAAK2lB,IAE1B6B,EAAuB/V,UAAU2V,YAAc,SAAUlnB,GACrDO,KAAKsB,YAAY7B,MAAMA,IAE3BsnB,EAAuB/V,UAAUmU,eAAiB,SAAUR,GACxD3kB,KAAKsB,YAAY3B,YAEdonB,EAdkB,CAe3BtB,EAAapkB,YACf/C,EAAQyoB,uBAAyBA,EAUjCzoB,EAAQ0mB,eATR,SAAwBvkB,EAAQokB,GAC5B,IAAIA,EAAgB9kB,OAGpB,OAAIU,aAAkB/B,EAAaK,WACxB0B,EAAOnB,UAAUulB,GAErBe,EAAcplB,YAAYC,EAA1BmlB,CAAkCf,K,kCCrG7CvmB,EAAQqC,YAAc,SAAWiG,GAAK,OAAOA,GAAyB,iBAAbA,EAAE9G,QAAoC,mBAAN8G,I,kCCGzFtI,EAAQ6f,SAHR,SAAkBvX,GACd,OAAOA,I,kCCDX,IAAI6e,EAAe,EAAQ,QAgB3BnnB,EAAQ6kB,eAfR,SAAwBkB,GACpB,KAAOA,GAAU,CACb,IAAyC/iB,EAAhC+iB,EAAiD/iB,YAC1D,GADS+iB,EAAwBtkB,QAAxBskB,EAA6E7D,UAElF,OAAO,EAGP6D,EADK/iB,GAAeA,aAAuBmkB,EAAapkB,WAC7CC,EAGA,KAGnB,OAAO,I,oCCdX,IAAI4lB,EAAY,EAAQ,QACpB3mB,EAAa,EAAQ,QACrBqf,EAAe,EAAQ,QACvBuH,EAAwB,EAAQ,QAoIpC,SAASC,EAA4BnF,GACjC,OAAOA,EAAO7D,OAAO,SAAUiJ,EAAM3nB,GAAO,OAAO2nB,EAAKC,OAAQ5nB,aAAeynB,EAAsBpF,oBAAuBriB,EAAIuiB,OAASviB,IAAS,IAFtJpB,EAAQY,aAlIY,WAChB,SAASA,EAAaiD,GAClBnC,KAAKD,QAAS,EACdC,KAAKghB,iBAAmB,KACxBhhB,KAAKunB,eAAiB,KAClBplB,IACAnC,KAAKwnB,kBAAmB,EACxBxnB,KAAK8hB,aAAe3f,GAqHN,IAAUse,EAIhC,OAtHAvhB,EAAa8R,UAAU7O,YAAc,WACjC,IAAI8f,EACJ,IAAIjiB,KAAKD,OAAT,CAGA,IAAI0nB,EAAKznB,KAAMghB,EAAmByG,EAAGzG,iBAAkBwG,EAAmBC,EAAGD,iBAAkB1F,EAAe2F,EAAG3F,aAAcyF,EAAiBE,EAAGF,eAInJ,GAHAvnB,KAAKD,QAAS,EACdC,KAAKghB,iBAAmB,KACxBhhB,KAAKunB,eAAiB,KAClBvG,aAA4B9hB,EAC5B8hB,EAAiBlZ,OAAO9H,WAEvB,GAAyB,OAArBghB,EACL,IAAK,IAAIyD,EAAQ,EAAGA,EAAQzD,EAAiBlhB,SAAU2kB,EACpCzD,EAAiByD,GACvB3c,OAAO9H,MAGxB,GAAI4f,EAAawB,WAAWU,GAAe,CACnC0F,IACAxnB,KAAK8hB,kBAAezK,GAExB,IACIyK,EAAa1B,KAAKpgB,MAEtB,MAAOiK,GACHgY,EAAShY,aAAakd,EAAsBpF,oBAAsBqF,EAA4Bnd,EAAEgY,QAAU,CAAChY,IAGnH,GAAIid,EAAUpB,QAAQyB,GAClB,CAAI9C,GAAS,EAEb,IAFA,IACInC,EAAMiF,EAAeznB,SAChB2kB,EAAQnC,GAAK,CAClB,IAAIrjB,EAAMsoB,EAAe9C,GACzB,GAAIlkB,EAAWS,SAAS/B,GACpB,IACIA,EAAIkD,cAER,MAAO8H,GACHgY,EAASA,GAAU,GACfhY,aAAakd,EAAsBpF,oBACnCE,EAASA,EAAOqF,OAAOF,EAA4Bnd,EAAEgY,SAGrDA,EAAO1f,KAAK0H,KAMhC,GAAIgY,EACA,MAAM,IAAIkF,EAAsBpF,oBAAoBE,KAG5D/iB,EAAa8R,UAAU7R,IAAM,SAAUuoB,GACnC,IAAInE,EAAemE,EACnB,IAAKA,EACD,OAAOxoB,EAAayoB,MAExB,cAAeD,GACX,IAAK,WACDnE,EAAe,IAAIrkB,EAAawoB,GACpC,IAAK,SACD,GAAInE,IAAiBvjB,MAAQujB,EAAaxjB,QAA8C,mBAA7BwjB,EAAaphB,YACpE,OAAOohB,EAEN,GAAIvjB,KAAKD,OAEV,OADAwjB,EAAaphB,cACNohB,EAEN,KAAMA,aAAwBrkB,GAAe,CAC9C,IAAI0oB,EAAMrE,GACVA,EAAe,IAAIrkB,GACNqoB,eAAiB,CAACK,GAEnC,MACJ,QACI,MAAM,IAAIhjB,MAAM,yBAA2B8iB,EAAW,2BAG9D,IAAI1G,EAAmBuC,EAAavC,iBACpC,GAAyB,OAArBA,EACAuC,EAAavC,iBAAmBhhB,UAE/B,GAAIghB,aAA4B9hB,EAAc,CAC/C,GAAI8hB,IAAqBhhB,KACrB,OAAOujB,EAEXA,EAAavC,iBAAmB,CAACA,EAAkBhhB,UAElD,KAAwC,IAApCghB,EAAiB6G,QAAQ7nB,MAI9B,OAAOujB,EAHPvC,EAAiBze,KAAKvC,MAK1B,IAAI8nB,EAAgB9nB,KAAKunB,eAOzB,OANsB,OAAlBO,EACA9nB,KAAKunB,eAAiB,CAAChE,GAGvBuE,EAAcvlB,KAAKghB,GAEhBA,GAEXrkB,EAAa8R,UAAUlJ,OAAS,SAAUyb,GACtC,IAAIuE,EAAgB9nB,KAAKunB,eACzB,GAAIO,EAAe,CACf,IAAIC,EAAoBD,EAAcD,QAAQtE,IACnB,IAAvBwE,GACAD,EAAcE,OAAOD,EAAmB,KAIpD7oB,EAAayoB,QAAmBlH,EAG9B,IAAIvhB,GAFIa,QAAS,EACR0gB,GAEJvhB,EAhIQ,I,kCCJnBZ,EAAQe,WAAa,WAAe,MAAyB,mBAAXkmB,QAAyBA,OAAOlmB,YAAc,eAA3E","file":"11.3f8a5a1c048bccadd78e.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterator_1 = require(\"../symbol/iterator\");\nfunction isIterable(input) {\n    return input && typeof input[iterator_1.iterator] === 'function';\n}\nexports.isIterable = isIterable;\n//# sourceMappingURL=isIterable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar Subscription_1 = require(\"../Subscription\");\nvar observable_1 = require(\"../symbol/observable\");\nfunction scheduleObservable(input, scheduler) {\n    return new Observable_1.Observable(function (subscriber) {\n        var sub = new Subscription_1.Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[observable_1.observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\nexports.scheduleObservable = scheduleObservable;\n//# sourceMappingURL=scheduleObservable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar Subscription_1 = require(\"../Subscription\");\nfunction scheduleArray(input, scheduler) {\n    return new Observable_1.Observable(function (subscriber) {\n        var sub = new Subscription_1.Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\nexports.scheduleArray = scheduleArray;\n//# sourceMappingURL=scheduleArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar subscribeToArray_1 = require(\"./subscribeToArray\");\nvar subscribeToPromise_1 = require(\"./subscribeToPromise\");\nvar subscribeToIterable_1 = require(\"./subscribeToIterable\");\nvar subscribeToObservable_1 = require(\"./subscribeToObservable\");\nvar isArrayLike_1 = require(\"./isArrayLike\");\nvar isPromise_1 = require(\"./isPromise\");\nvar isObject_1 = require(\"./isObject\");\nvar iterator_1 = require(\"../symbol/iterator\");\nvar observable_1 = require(\"../symbol/observable\");\nexports.subscribeTo = function (result) {\n    if (!!result && typeof result[observable_1.observable] === 'function') {\n        return subscribeToObservable_1.subscribeToObservable(result);\n    }\n    else if (isArrayLike_1.isArrayLike(result)) {\n        return subscribeToArray_1.subscribeToArray(result);\n    }\n    else if (isPromise_1.isPromise(result)) {\n        return subscribeToPromise_1.subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[iterator_1.iterator] === 'function') {\n        return subscribeToIterable_1.subscribeToIterable(result);\n    }\n    else {\n        var value = isObject_1.isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map","import { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function delay(delay, scheduler = async) {\n    const absoluteDelay = isDate(delay);\n    const delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return (source) => source.lift(new DelayOperator(delayFor, scheduler));\n}\nclass DelayOperator {\n    constructor(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    }\n}\nclass DelaySubscriber extends Subscriber {\n    constructor(destination, delay, scheduler) {\n        super(destination);\n        this.delay = delay;\n        this.scheduler = scheduler;\n        this.queue = [];\n        this.active = false;\n        this.errored = false;\n    }\n    static dispatch(state) {\n        const source = state.source;\n        const queue = source.queue;\n        const scheduler = state.scheduler;\n        const destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            const delay = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    }\n    _schedule(scheduler) {\n        this.active = true;\n        const destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    }\n    scheduleNotification(notification) {\n        if (this.errored === true) {\n            return;\n        }\n        const scheduler = this.scheduler;\n        const message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    }\n    _next(value) {\n        this.scheduleNotification(Notification.createNext(value));\n    }\n    _error(err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    }\n    _complete() {\n        this.scheduleNotification(Notification.createComplete());\n        this.unsubscribe();\n    }\n}\nclass DelayMessage {\n    constructor(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n}\n//# sourceMappingURL=delay.js.map","// import { VehModel } from 'src/app/models/veh-model.class';\r\nimport * as moment from 'moment';\r\nimport { Vehicle } from 'src/app/models/common/vehicle.model';\r\n\r\nexport class KeyScan {\r\n  // modelObj: VehModel;\r\n  model: string;\r\n  keyscanDT = moment();\r\n  chassis: string;\r\n  regNum: string;\r\n  veh: Vehicle;\r\n\r\n  //   static fromTD(td: Testdrive): KeyScan {\r\n  //     const rv = new KeyScan();\r\n  //     // rv.modelObj = td.model;\r\n  //     rv.model = td.modelId;\r\n  //     rv.keyscanDT = td.keyscanDT;\r\n  //     rv.chassis = td.fullChassis;\r\n  //     rv.regNum = td.regNum;\r\n  //     return rv;\r\n  //   }\r\n}\r\n","import { AfterViewInit, Component, ElementRef, EventEmitter, OnDestroy, OnInit, Output } from '@angular/core';\r\nimport { ScreenOrientation } from '@ionic-enterprise/screen-orientation/ngx';\r\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\r\nimport { PopoverController } from '@ionic/angular';\r\nimport { from, of, Subscription } from 'rxjs';\r\nimport { delay, distinctUntilChanged, flatMap, map, switchMap, tap } from 'rxjs/operators';\r\nimport { KeyScan } from 'src/app/models/common/key-scan.model';\r\nimport { environment } from 'src/environments/environment';\r\nimport { ErrorService } from '../../../services/common/error/error.service';\r\n\r\n@Component({\r\n  selector: 'app-key-scanner',\r\n  templateUrl: './key-scanner.component.html',\r\n  styleUrls: ['./key-scanner.component.scss'],\r\n})\r\nexport class KeyScannerComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  constructor(\r\n    private qr: QRScanner,\r\n    private el: ElementRef,\r\n    private pop: PopoverController,\r\n    private err: ErrorService,\r\n    private orientation: ScreenOrientation\r\n  ) {}\r\n\r\n  @Output() scan = new EventEmitter<KeyScan>();\r\n  private subs = new Subscription();\r\n  private backdropBg;\r\n  private backdropOpacity;\r\n  private origBg;\r\n\r\n  ngOnInit() {\r\n    try {\r\n      this.lockScreenIfPopover();\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    try {\r\n      setTimeout(() => this.showCamera(), 400);\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    try {\r\n      this.subs.unsubscribe();\r\n      this.qr.destroy();\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  showCamera() {\r\n    try {\r\n      const qrScan = environment.emulator\r\n        ? of('{\"chassis\":\"WBS2U720X07E37591\",\"model\":\"a0x9000000HFmvV\",\"regNum\":\"T/PLATE\"}').pipe(\r\n            //TODO: detect this in globals?\r\n            tap((_) => this.hideBackground()),\r\n            delay(1000)\r\n          )\r\n        : from(this.qr.show()).pipe(\r\n            switchMap((status: QRScannerStatus) => {\r\n              if (status.showing) {\r\n                this.hideBackground();\r\n                return this.qr.scan();\r\n              } else {\r\n                throw new Error('Error showing camera');\r\n              }\r\n            })\r\n          );\r\n      const qrSub = qrScan\r\n        .pipe(\r\n          distinctUntilChanged(),\r\n          map((res) => {\r\n            const data = JSON.parse(res);\r\n            const scan: KeyScan = Object.assign(new KeyScan(), data);\r\n            if (!scan.model || !scan.chassis) {\r\n              throw new Error('Invalid QR code');\r\n            }\r\n            qrSub.unsubscribe();\r\n            this.showBackground();\r\n            this.qr.hide();\r\n            this.dismissPopover(scan);\r\n            return scan;\r\n          })\r\n        )\r\n        .subscribe(\r\n          () => {},\r\n          (err) => {\r\n            qrSub.unsubscribe();\r\n            this.showBackground();\r\n            this.qr.hide();\r\n            this.dismissPopover(null);\r\n            this.err.logError(err);\r\n            return this.err.presentServerErr(err);\r\n          }\r\n        );\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  close() {\r\n    try {\r\n      from(this.qr.pausePreview()).pipe(\r\n        flatMap((_) => {\r\n          return this.qr.hide();\r\n        })\r\n      );\r\n      this.showBackground();\r\n      this.dismissPopover(null);\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  reverseCamera() {\r\n    try {\r\n      from(this.qr.getStatus())\r\n        .pipe(\r\n          flatMap((status) => {\r\n            if (!status.scanning) {\r\n              return of(null);\r\n            }\r\n            const reverseCamera = status.currentCamera;\r\n            if (reverseCamera === 0) {\r\n              return this.qr.useCamera(1);\r\n            } else {\r\n              return this.qr.useCamera(0);\r\n            }\r\n          })\r\n        )\r\n        .subscribe(\r\n          (_) => {},\r\n          (err) => {\r\n            this.err.logError(err);\r\n            return this.err.presentServerErr(err);\r\n          }\r\n        );\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  toggleLight() {\r\n    try {\r\n      from(this.qr.getStatus())\r\n        .pipe(\r\n          flatMap((status) => {\r\n            if (!status.scanning || !status.canEnableLight) {\r\n              return of(null);\r\n            }\r\n            if (status.lightEnabled) {\r\n              return this.qr.disableLight();\r\n            } else {\r\n              return this.qr.enableLight();\r\n            }\r\n          })\r\n        )\r\n        .subscribe(\r\n          (_) => {},\r\n          (err) => {\r\n            this.err.logError(err);\r\n            return this.err.presentServerErr(err);\r\n          }\r\n        );\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  private async dismissPopover(modelSelection: KeyScan) {\r\n    const popover = await this.pop.getTop();\r\n    if (popover) {\r\n      await popover.dismiss(modelSelection);\r\n      this.orientation.unlock();\r\n    }\r\n    return;\r\n  }\r\n\r\n  private hideBackground() {\r\n    document.querySelectorAll('ion-app > :not(ion-popover)').forEach((x) => {\r\n      x.classList.add('blurBg');\r\n    });\r\n    const popover = document.querySelector('ion-popover') as HTMLElement;\r\n    if (popover) {\r\n      this.origBg = popover.style.getPropertyValue('--background');\r\n      popover.style.setProperty('--background', 'transparent');\r\n      const popoverBg = popover.querySelector('ion-backdrop') as HTMLElement;\r\n      const popoverParent = this.el.nativeElement.offsetParent;\r\n      const offsetTop = popoverParent.offsetTop;\r\n      const offsetBottom = offsetTop + popoverParent.offsetHeight;\r\n      this.backdropBg = popoverBg.style.background;\r\n      this.backdropOpacity = popoverBg.style.opacity;\r\n      // tslint:disable-next-line:max-line-length\r\n      popoverBg.style.background = `linear-gradient(to bottom, var(--ion-color-primary) 0, var(--ion-color-primary) ${offsetTop}px,transparent ${offsetTop}px, transparent ${offsetBottom}px, var(--ion-color-primary) ${offsetBottom}px, var(--ion-color-primary) 100vh) center/80vw 100vh no-repeat, linear-gradient(to bottom, var(--ion-color-primary) 0, var(--ion-color-primary) 100vh) left/10vw 100vh no-repeat, linear-gradient(to bottom, var(--ion-color-primary) 0, var(--ion-color-primary) 100vh) right/10vw 100vh no-repeat`;\r\n      popoverBg.style.opacity = '1';\r\n    }\r\n  }\r\n\r\n  private showBackground() {\r\n    document.querySelectorAll('ion-app > :not(ion-popover)').forEach((x) => {\r\n      x.classList.remove('blurBg');\r\n    });\r\n    const popover = document.querySelector('ion-popover') as HTMLElement;\r\n    if (popover) {\r\n      if (this.origBg) {\r\n        popover.style.setProperty('--background', this.origBg);\r\n      }\r\n      const popoverBg = popover.querySelector('ion-backdrop') as HTMLElement;\r\n      if (popoverBg) {\r\n        popoverBg.style.background = this.backdropBg;\r\n        popoverBg.style.opacity = this.backdropOpacity;\r\n      }\r\n    }\r\n  }\r\n\r\n  private async lockScreenIfPopover() {\r\n    const popover = await this.pop.getTop();\r\n    if (popover) {\r\n      this.orientation.lock(this.orientation.type);\r\n    }\r\n    return;\r\n  }\r\n}\r\n","<ion-grid no-padding>\r\n  <ion-row class=\"transparent ion-align-items-start ion-justify-content-end\">\r\n    <ion-col size=\"3\">\r\n      <ion-fab-button size=\"small\" color=\"light\" (click)=\"close()\">\r\n        <ion-icon name=\"close\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-col>\r\n  </ion-row>\r\n  <ion-row class=\"transparent ion-align-items-end ion-justify-content-center\">\r\n    <ion-col size=\"3\">\r\n      <ion-fab-button size=\"small\" color=\"secondary\" (click)=\"toggleLight()\">\r\n        <ion-icon name=\"flash\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-col>\r\n    <ion-col size=\"3\">\r\n      <ion-fab-button size=\"small\" color=\"secondary\" (click)=\"reverseCamera()\">\r\n        <ion-icon name=\"camera-reverse-outline\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-grid>\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Testdrive } from 'src/app/models/common/testdrive.model';\r\nimport { ModalController, AlertController, PopoverController, LoadingController } from '@ionic/angular';\r\nimport { from, forkJoin } from 'rxjs';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { tap, mergeMap, map } from 'rxjs/operators';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\r\nimport { KeyScannerComponent } from 'src/app/components/common/key-scanner/key-scanner.component';\r\nimport { CommonTestdriveService } from 'src/app/services/common/testdrive/testdrive.service';\r\n\r\n@Component({\r\n  selector: 'app-scan-testdrive',\r\n  templateUrl: './scan-testdrive.component.html',\r\n  styleUrls: ['./scan-testdrive.component.scss'],\r\n})\r\nexport class ScanTestdriveComponent implements OnInit {\r\n  @Input() testdrive: Testdrive;\r\n  tdForm: FormGroup;\r\n  formErrorMessages: FormErrorMessages;\r\n\r\n  constructor(\r\n    private modalCtrl: ModalController,\r\n    private alertCtrl: AlertController,\r\n    private translate: TranslateService,\r\n    private formBuilder: FormBuilder,\r\n    private popover: PopoverController,\r\n    private tdService: CommonTestdriveService,\r\n    private loadingCtrl: LoadingController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.tdForm = this.initTdForm();\r\n  }\r\n\r\n  private initTdForm(): FormGroup {\r\n    const tdForm = this.formBuilder.group({\r\n      regNo: ['', [Validators.required]],\r\n      variantName: ['', [Validators.required]],\r\n      mileageStart: ['', [Validators.required]],\r\n    });\r\n    this.initErrorMessages(tdForm);\r\n    return tdForm;\r\n  }\r\n\r\n  private initErrorMessages(form: FormGroup) {\r\n    this.translate.get('Error_CannotBeEmpty').subscribe((lang) => {\r\n      this.formErrorMessages = {\r\n        group: {},\r\n      };\r\n      if (!form) {\r\n        return;\r\n      }\r\n      for (const key of Object.keys(form.controls)) {\r\n        switch (key) {\r\n          case 'regNo':\r\n          case 'variantName':\r\n          case 'mileageStart':\r\n            this.formErrorMessages[key] = {\r\n              required: lang,\r\n            };\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  apply() {\r\n    this.translate\r\n      .get('Common_Loading')\r\n      .pipe(\r\n        mergeMap((lang) => {\r\n          return from(\r\n            this.loadingCtrl.create({\r\n              message: lang,\r\n            })\r\n          );\r\n        }),\r\n        mergeMap((loading) => {\r\n          loading.present();\r\n          this.testdrive.Vehicle.MileageStart = this.tdForm.get('mileageStart').value;\r\n          return this.tdService\r\n            .startTestdrive(this.testdrive)\r\n            .pipe(\r\n              tap((e) => {\r\n                this.testdrive = e;\r\n              })\r\n            )\r\n            .pipe(\r\n              tap(\r\n                (e) => {\r\n                  loading.dismiss();\r\n                  this.modalCtrl.dismiss(this.testdrive);\r\n                },\r\n                (err) => {\r\n                  loading.dismiss();\r\n                }\r\n              )\r\n            );\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  cancel() {\r\n    this.modalCtrl.dismiss();\r\n  }\r\n\r\n  qrScanner() {\r\n    from(\r\n      this.popover.create({\r\n        component: KeyScannerComponent,\r\n        showBackdrop: true,\r\n        cssClass: 'full-popover',\r\n        backdropDismiss: false,\r\n        animated: false,\r\n      })\r\n    )\r\n      .pipe(\r\n        tap((popover) => popover.present()),\r\n        mergeMap((popover) => popover.onDidDismiss()),\r\n        map((popoverData) => {\r\n          if (!popoverData || !popoverData.data) {\r\n            return;\r\n          }\r\n          this.translate\r\n            .get('Common_Loading')\r\n            .pipe(\r\n              mergeMap((lang) => {\r\n                return from(\r\n                  this.loadingCtrl.create({\r\n                    message: lang,\r\n                  })\r\n                );\r\n              }),\r\n              mergeMap((loading) => {\r\n                loading.present();\r\n                return this.tdService.getVehByRegNo(popoverData.data.regNum).pipe(\r\n                  tap((res) => {\r\n                    this.testdrive.Vehicle = res;\r\n                    this.tdForm.get('regNo').setValue(res.RegNum);\r\n                    this.tdForm.get('variantName').setValue(res.ShortDesc);\r\n                    this.tdForm.get('mileageStart').setValue(res.MileageStart);\r\n                    this.loadingCtrl.dismiss();\r\n                  })\r\n                );\r\n              })\r\n            )\r\n            .subscribe();\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  search() {\r\n    const btns = [];\r\n    from(\r\n      this.alertCtrl.create({\r\n        backdropDismiss: false,\r\n        inputs: [\r\n          {\r\n            name: 'regNo',\r\n            type: 'text',\r\n          },\r\n        ],\r\n      })\r\n    )\r\n      .pipe(\r\n        mergeMap((alert) => {\r\n          return forkJoin([\r\n            this.translate.get('ViewTestdrivePage_EnterRegistrationNumber').pipe(\r\n              tap((lang) => {\r\n                alert.header = lang;\r\n              })\r\n            ),\r\n            this.translate.get('Common_Cancel').pipe(\r\n              tap((lang) => {\r\n                btns.push({\r\n                  text: lang,\r\n                  role: 'cancel',\r\n                  handler: () => {},\r\n                });\r\n              })\r\n            ),\r\n            this.translate.get('Common_Search').pipe(\r\n              tap((lang) => {\r\n                btns.push({\r\n                  text: lang,\r\n                  handler: (data) => {\r\n                    this.translate\r\n                      .get('Common_Loading')\r\n                      .pipe(\r\n                        mergeMap((lang) => {\r\n                          return from(\r\n                            this.loadingCtrl.create({\r\n                              message: lang,\r\n                            })\r\n                          );\r\n                        }),\r\n                        mergeMap((loading) => {\r\n                          loading.present();\r\n                          return this.tdService.getVehByRegNo(data.regNo).pipe(\r\n                            tap((res) => {\r\n                              this.testdrive.Vehicle = res;\r\n                              this.tdForm.get('regNo').setValue(res.RegNum);\r\n                              this.tdForm.get('variantName').setValue(res.ShortDesc);\r\n                              this.tdForm.get('mileageStart').setValue(res.MileageStart);\r\n                              this.loadingCtrl.dismiss();\r\n                            })\r\n                          );\r\n                        })\r\n                      )\r\n                      .subscribe();\r\n                  },\r\n                });\r\n              })\r\n            ),\r\n          ]).pipe(\r\n            tap(() => {\r\n              alert.buttons = btns;\r\n              alert.present();\r\n            })\r\n          );\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\">\r\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{ 'ViewTestdrivePage_Testdrive' | translate }}<br />\r\n      <ion-text class=\"sub-header\">\r\n        {{ 'TestdrivePage_OpportunityID' | translate }}:\r\n        {{ testdrive?.OpportunityId }}\r\n      </ion-text>\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content class=\"ion-padding\">\r\n  <section class=\"ion-text-center ion-margin-bottom\">\r\n    <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" class=\"ion-margin-bottom\" (click)=\"qrScanner()\">\r\n      {{ 'ViewTestdrivePage_Scan' | translate }}\r\n    </ion-button>\r\n    <ion-label class=\"ion-margin-top ion-margin-bottom\">\r\n      <b>{{ 'ViewTestdrivePage_OR' | translate }}</b>\r\n    </ion-label>\r\n    <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" class=\"ion-margin-top\" (click)=\"search()\">\r\n      {{ 'ViewTestdrivePage_SearchRegistrationNo' | translate }}\r\n    </ion-button>\r\n  </section>\r\n  <section class=\"ion-margin-top\">\r\n    <ng-container [formGroup]=\"tdForm\">\r\n      <ion-item lines=\"none\">\r\n        <ion-input [disabled]=\"true\" formControlName=\"regNo\" placeholder=\"{{ 'ViewTestdrivePage_RegistrationNumber' | translate }}\"></ion-input>\r\n      </ion-item>\r\n      <app-item-err [control]=\"tdForm.controls?.regNo\" [messages]=\"formErrorMessages.regNo\"></app-item-err>\r\n      <ion-item lines=\"none\" class=\"ion-margin-top\">\r\n        <ion-input [disabled]=\"true\" formControlName=\"variantName\" placeholder=\" {{ 'ViewTestdrivePage_VariantName' | translate }}\"></ion-input>\r\n      </ion-item>\r\n      <app-item-err [control]=\"tdForm.controls?.variantName\" [messages]=\"formErrorMessages.variantName\"></app-item-err>\r\n      <ion-item lines=\"none\" class=\"ion-margin-top\">\r\n        <ion-input formControlName=\"mileageStart\" placeholder=\" {{ 'ViewTestdrivePage_MileageStart' | translate }}\"></ion-input>\r\n      </ion-item>\r\n      <app-item-err [control]=\"tdForm.controls?.mileageStart\" [messages]=\"formErrorMessages.mileageStart\"></app-item-err>\r\n    </ng-container>\r\n  </section>\r\n</ion-content>\r\n<ion-footer class=\"ion-padding\">\r\n  <ion-button fill=\"solid\" expand=\"block\" color=\"primary\" [disabled]=\"tdForm.invalid\" (click)=\"apply()\">\r\n    {{ 'ViewTestdrivePage_Start' | translate }}\r\n  </ion-button>\r\n</ion-footer>\r\n","/*!\n * Signature Pad v3.0.0-beta.4 | https://github.com/szimek/signature_pad\n * (c) 2020 Szymon Nowak | Released under the MIT license\n */\n\nclass Point {\n    constructor(x, y, time) {\n        this.x = x;\n        this.y = y;\n        this.time = time || Date.now();\n    }\n    distanceTo(start) {\n        return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));\n    }\n    equals(other) {\n        return this.x === other.x && this.y === other.y && this.time === other.time;\n    }\n    velocityFrom(start) {\n        return this.time !== start.time\n            ? this.distanceTo(start) / (this.time - start.time)\n            : 0;\n    }\n}\n\nclass Bezier {\n    constructor(startPoint, control2, control1, endPoint, startWidth, endWidth) {\n        this.startPoint = startPoint;\n        this.control2 = control2;\n        this.control1 = control1;\n        this.endPoint = endPoint;\n        this.startWidth = startWidth;\n        this.endWidth = endWidth;\n    }\n    static fromPoints(points, widths) {\n        const c2 = this.calculateControlPoints(points[0], points[1], points[2]).c2;\n        const c3 = this.calculateControlPoints(points[1], points[2], points[3]).c1;\n        return new Bezier(points[1], c2, c3, points[2], widths.start, widths.end);\n    }\n    static calculateControlPoints(s1, s2, s3) {\n        const dx1 = s1.x - s2.x;\n        const dy1 = s1.y - s2.y;\n        const dx2 = s2.x - s3.x;\n        const dy2 = s2.y - s3.y;\n        const m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\n        const m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\n        const l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n        const l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n        const dxm = m1.x - m2.x;\n        const dym = m1.y - m2.y;\n        const k = l2 / (l1 + l2);\n        const cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n        const tx = s2.x - cm.x;\n        const ty = s2.y - cm.y;\n        return {\n            c1: new Point(m1.x + tx, m1.y + ty),\n            c2: new Point(m2.x + tx, m2.y + ty),\n        };\n    }\n    length() {\n        const steps = 10;\n        let length = 0;\n        let px;\n        let py;\n        for (let i = 0; i <= steps; i += 1) {\n            const t = i / steps;\n            const cx = this.point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);\n            const cy = this.point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);\n            if (i > 0) {\n                const xdiff = cx - px;\n                const ydiff = cy - py;\n                length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n            }\n            px = cx;\n            py = cy;\n        }\n        return length;\n    }\n    point(t, start, c1, c2, end) {\n        return (start * (1.0 - t) * (1.0 - t) * (1.0 - t))\n            + (3.0 * c1 * (1.0 - t) * (1.0 - t) * t)\n            + (3.0 * c2 * (1.0 - t) * t * t)\n            + (end * t * t * t);\n    }\n}\n\nfunction throttle(fn, wait = 250) {\n    let previous = 0;\n    let timeout = null;\n    let result;\n    let storedContext;\n    let storedArgs;\n    const later = () => {\n        previous = Date.now();\n        timeout = null;\n        result = fn.apply(storedContext, storedArgs);\n        if (!timeout) {\n            storedContext = null;\n            storedArgs = [];\n        }\n    };\n    return function wrapper(...args) {\n        const now = Date.now();\n        const remaining = wait - (now - previous);\n        storedContext = this;\n        storedArgs = args;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = fn.apply(storedContext, storedArgs);\n            if (!timeout) {\n                storedContext = null;\n                storedArgs = [];\n            }\n        }\n        else if (!timeout) {\n            timeout = window.setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\nclass SignaturePad {\n    constructor(canvas, options = {}) {\n        this.canvas = canvas;\n        this.options = options;\n        this._handleMouseDown = (event) => {\n            if (event.which === 1) {\n                this._mouseButtonDown = true;\n                this._strokeBegin(event);\n            }\n        };\n        this._handleMouseMove = (event) => {\n            if (this._mouseButtonDown) {\n                this._strokeMoveUpdate(event);\n            }\n        };\n        this._handleMouseUp = (event) => {\n            if (event.which === 1 && this._mouseButtonDown) {\n                this._mouseButtonDown = false;\n                this._strokeEnd(event);\n            }\n        };\n        this._handleTouchStart = (event) => {\n            event.preventDefault();\n            if (event.targetTouches.length === 1) {\n                const touch = event.changedTouches[0];\n                this._strokeBegin(touch);\n            }\n        };\n        this._handleTouchMove = (event) => {\n            event.preventDefault();\n            const touch = event.targetTouches[0];\n            this._strokeMoveUpdate(touch);\n        };\n        this._handleTouchEnd = (event) => {\n            const wasCanvasTouched = event.target === this.canvas;\n            if (wasCanvasTouched) {\n                event.preventDefault();\n                const touch = event.changedTouches[0];\n                this._strokeEnd(touch);\n            }\n        };\n        this.velocityFilterWeight = options.velocityFilterWeight || 0.7;\n        this.minWidth = options.minWidth || 0.5;\n        this.maxWidth = options.maxWidth || 2.5;\n        this.throttle = ('throttle' in options ? options.throttle : 16);\n        this.minDistance = ('minDistance' in options\n            ? options.minDistance\n            : 5);\n        this.dotSize =\n            options.dotSize ||\n                function dotSize() {\n                    return (this.minWidth + this.maxWidth) / 2;\n                };\n        this.penColor = options.penColor || 'black';\n        this.backgroundColor = options.backgroundColor || 'rgba(0,0,0,0)';\n        this.onBegin = options.onBegin;\n        this.onEnd = options.onEnd;\n        this._strokeMoveUpdate = this.throttle\n            ? throttle(SignaturePad.prototype._strokeUpdate, this.throttle)\n            : SignaturePad.prototype._strokeUpdate;\n        this._ctx = canvas.getContext('2d');\n        this.clear();\n        this.on();\n    }\n    clear() {\n        const { _ctx: ctx, canvas } = this;\n        ctx.fillStyle = this.backgroundColor;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        this._data = [];\n        this._reset();\n        this._isEmpty = true;\n    }\n    fromDataURL(dataUrl, options = {}, callback) {\n        const image = new Image();\n        const ratio = options.ratio || window.devicePixelRatio || 1;\n        const width = options.width || this.canvas.width / ratio;\n        const height = options.height || this.canvas.height / ratio;\n        this._reset();\n        image.onload = () => {\n            this._ctx.drawImage(image, 0, 0, width, height);\n            if (callback) {\n                callback();\n            }\n        };\n        image.onerror = (error) => {\n            if (callback) {\n                callback(error);\n            }\n        };\n        image.src = dataUrl;\n        this._isEmpty = false;\n    }\n    toDataURL(type = 'image/png', encoderOptions) {\n        switch (type) {\n            case 'image/svg+xml':\n                return this._toSVG();\n            default:\n                return this.canvas.toDataURL(type, encoderOptions);\n        }\n    }\n    on() {\n        this.canvas.style.touchAction = 'none';\n        this.canvas.style.msTouchAction = 'none';\n        if (window.PointerEvent) {\n            this._handlePointerEvents();\n        }\n        else {\n            this._handleMouseEvents();\n            if ('ontouchstart' in window) {\n                this._handleTouchEvents();\n            }\n        }\n    }\n    off() {\n        this.canvas.style.touchAction = 'auto';\n        this.canvas.style.msTouchAction = 'auto';\n        this.canvas.removeEventListener('pointerdown', this._handleMouseDown);\n        this.canvas.removeEventListener('pointermove', this._handleMouseMove);\n        document.removeEventListener('pointerup', this._handleMouseUp);\n        this.canvas.removeEventListener('mousedown', this._handleMouseDown);\n        this.canvas.removeEventListener('mousemove', this._handleMouseMove);\n        document.removeEventListener('mouseup', this._handleMouseUp);\n        this.canvas.removeEventListener('touchstart', this._handleTouchStart);\n        this.canvas.removeEventListener('touchmove', this._handleTouchMove);\n        this.canvas.removeEventListener('touchend', this._handleTouchEnd);\n    }\n    isEmpty() {\n        return this._isEmpty;\n    }\n    fromData(pointGroups) {\n        this.clear();\n        this._fromData(pointGroups, ({ color, curve }) => this._drawCurve({ color, curve }), ({ color, point }) => this._drawDot({ color, point }));\n        this._data = pointGroups;\n    }\n    toData() {\n        return this._data;\n    }\n    _strokeBegin(event) {\n        const newPointGroup = {\n            color: this.penColor,\n            points: [],\n        };\n        if (typeof this.onBegin === 'function') {\n            this.onBegin(event);\n        }\n        this._data.push(newPointGroup);\n        this._reset();\n        this._strokeUpdate(event);\n    }\n    _strokeUpdate(event) {\n        if (this._data.length === 0) {\n            this._strokeBegin(event);\n            return;\n        }\n        const x = event.clientX;\n        const y = event.clientY;\n        const point = this._createPoint(x, y);\n        const lastPointGroup = this._data[this._data.length - 1];\n        const lastPoints = lastPointGroup.points;\n        const lastPoint = lastPoints.length > 0 && lastPoints[lastPoints.length - 1];\n        const isLastPointTooClose = lastPoint\n            ? point.distanceTo(lastPoint) <= this.minDistance\n            : false;\n        const color = lastPointGroup.color;\n        if (!lastPoint || !(lastPoint && isLastPointTooClose)) {\n            const curve = this._addPoint(point);\n            if (!lastPoint) {\n                this._drawDot({ color, point });\n            }\n            else if (curve) {\n                this._drawCurve({ color, curve });\n            }\n            lastPoints.push({\n                time: point.time,\n                x: point.x,\n                y: point.y,\n            });\n        }\n    }\n    _strokeEnd(event) {\n        this._strokeUpdate(event);\n        if (typeof this.onEnd === 'function') {\n            this.onEnd(event);\n        }\n    }\n    _handlePointerEvents() {\n        this._mouseButtonDown = false;\n        this.canvas.addEventListener('pointerdown', this._handleMouseDown);\n        this.canvas.addEventListener('pointermove', this._handleMouseMove);\n        document.addEventListener('pointerup', this._handleMouseUp);\n    }\n    _handleMouseEvents() {\n        this._mouseButtonDown = false;\n        this.canvas.addEventListener('mousedown', this._handleMouseDown);\n        this.canvas.addEventListener('mousemove', this._handleMouseMove);\n        document.addEventListener('mouseup', this._handleMouseUp);\n    }\n    _handleTouchEvents() {\n        this.canvas.addEventListener('touchstart', this._handleTouchStart);\n        this.canvas.addEventListener('touchmove', this._handleTouchMove);\n        this.canvas.addEventListener('touchend', this._handleTouchEnd);\n    }\n    _reset() {\n        this._lastPoints = [];\n        this._lastVelocity = 0;\n        this._lastWidth = (this.minWidth + this.maxWidth) / 2;\n        this._ctx.fillStyle = this.penColor;\n    }\n    _createPoint(x, y) {\n        const rect = this.canvas.getBoundingClientRect();\n        return new Point(x - rect.left, y - rect.top, new Date().getTime());\n    }\n    _addPoint(point) {\n        const { _lastPoints } = this;\n        _lastPoints.push(point);\n        if (_lastPoints.length > 2) {\n            if (_lastPoints.length === 3) {\n                _lastPoints.unshift(_lastPoints[0]);\n            }\n            const widths = this._calculateCurveWidths(_lastPoints[1], _lastPoints[2]);\n            const curve = Bezier.fromPoints(_lastPoints, widths);\n            _lastPoints.shift();\n            return curve;\n        }\n        return null;\n    }\n    _calculateCurveWidths(startPoint, endPoint) {\n        const velocity = this.velocityFilterWeight * endPoint.velocityFrom(startPoint) +\n            (1 - this.velocityFilterWeight) * this._lastVelocity;\n        const newWidth = this._strokeWidth(velocity);\n        const widths = {\n            end: newWidth,\n            start: this._lastWidth,\n        };\n        this._lastVelocity = velocity;\n        this._lastWidth = newWidth;\n        return widths;\n    }\n    _strokeWidth(velocity) {\n        return Math.max(this.maxWidth / (velocity + 1), this.minWidth);\n    }\n    _drawCurveSegment(x, y, width) {\n        const ctx = this._ctx;\n        ctx.moveTo(x, y);\n        ctx.arc(x, y, width, 0, 2 * Math.PI, false);\n        this._isEmpty = false;\n    }\n    _drawCurve({ color, curve }) {\n        const ctx = this._ctx;\n        const widthDelta = curve.endWidth - curve.startWidth;\n        const drawSteps = Math.floor(curve.length()) * 2;\n        ctx.beginPath();\n        ctx.fillStyle = color;\n        for (let i = 0; i < drawSteps; i += 1) {\n            const t = i / drawSteps;\n            const tt = t * t;\n            const ttt = tt * t;\n            const u = 1 - t;\n            const uu = u * u;\n            const uuu = uu * u;\n            let x = uuu * curve.startPoint.x;\n            x += 3 * uu * t * curve.control1.x;\n            x += 3 * u * tt * curve.control2.x;\n            x += ttt * curve.endPoint.x;\n            let y = uuu * curve.startPoint.y;\n            y += 3 * uu * t * curve.control1.y;\n            y += 3 * u * tt * curve.control2.y;\n            y += ttt * curve.endPoint.y;\n            const width = Math.min(curve.startWidth + ttt * widthDelta, this.maxWidth);\n            this._drawCurveSegment(x, y, width);\n        }\n        ctx.closePath();\n        ctx.fill();\n    }\n    _drawDot({ color, point, }) {\n        const ctx = this._ctx;\n        const width = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n        ctx.beginPath();\n        this._drawCurveSegment(point.x, point.y, width);\n        ctx.closePath();\n        ctx.fillStyle = color;\n        ctx.fill();\n    }\n    _fromData(pointGroups, drawCurve, drawDot) {\n        for (const group of pointGroups) {\n            const { color, points } = group;\n            if (points.length > 1) {\n                for (let j = 0; j < points.length; j += 1) {\n                    const basicPoint = points[j];\n                    const point = new Point(basicPoint.x, basicPoint.y, basicPoint.time);\n                    this.penColor = color;\n                    if (j === 0) {\n                        this._reset();\n                    }\n                    const curve = this._addPoint(point);\n                    if (curve) {\n                        drawCurve({ color, curve });\n                    }\n                }\n            }\n            else {\n                this._reset();\n                drawDot({\n                    color,\n                    point: points[0],\n                });\n            }\n        }\n    }\n    _toSVG() {\n        const pointGroups = this._data;\n        const ratio = Math.max(window.devicePixelRatio || 1, 1);\n        const minX = 0;\n        const minY = 0;\n        const maxX = this.canvas.width / ratio;\n        const maxY = this.canvas.height / ratio;\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', this.canvas.width.toString());\n        svg.setAttribute('height', this.canvas.height.toString());\n        this._fromData(pointGroups, ({ color, curve }) => {\n            const path = document.createElement('path');\n            if (!isNaN(curve.control1.x) &&\n                !isNaN(curve.control1.y) &&\n                !isNaN(curve.control2.x) &&\n                !isNaN(curve.control2.y)) {\n                const attr = `M ${curve.startPoint.x.toFixed(3)},${curve.startPoint.y.toFixed(3)} ` +\n                    `C ${curve.control1.x.toFixed(3)},${curve.control1.y.toFixed(3)} ` +\n                    `${curve.control2.x.toFixed(3)},${curve.control2.y.toFixed(3)} ` +\n                    `${curve.endPoint.x.toFixed(3)},${curve.endPoint.y.toFixed(3)}`;\n                path.setAttribute('d', attr);\n                path.setAttribute('stroke-width', (curve.endWidth * 2.25).toFixed(3));\n                path.setAttribute('stroke', color);\n                path.setAttribute('fill', 'none');\n                path.setAttribute('stroke-linecap', 'round');\n                svg.appendChild(path);\n            }\n        }, ({ color, point }) => {\n            const circle = document.createElement('circle');\n            const dotSize = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n            circle.setAttribute('r', dotSize.toString());\n            circle.setAttribute('cx', point.x.toString());\n            circle.setAttribute('cy', point.y.toString());\n            circle.setAttribute('fill', color);\n            svg.appendChild(circle);\n        });\n        const prefix = 'data:image/svg+xml;base64,';\n        const header = '<svg' +\n            ' xmlns=\"http://www.w3.org/2000/svg\"' +\n            ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' +\n            ` viewBox=\"${minX} ${minY} ${maxX} ${maxY}\"` +\n            ` width=\"${maxX}\"` +\n            ` height=\"${maxY}\"` +\n            '>';\n        let body = svg.innerHTML;\n        if (body === undefined) {\n            const dummy = document.createElement('dummy');\n            const nodes = svg.childNodes;\n            dummy.innerHTML = '';\n            for (let i = 0; i < nodes.length; i += 1) {\n                dummy.appendChild(nodes[i].cloneNode(true));\n            }\n            body = dummy.innerHTML;\n        }\n        const footer = '</svg>';\n        const data = header + body + footer;\n        return prefix + btoa(data);\n    }\n}\n\nexport default SignaturePad;\n//# sourceMappingURL=signature_pad.js.map\n","<ion-grid no-padding>\r\n  <ion-row>\r\n    <ion-col>\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title>{{ sigTitle }}</ion-card-title>\r\n          <ion-card-subtitle>Kindly sign within the box below</ion-card-subtitle>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <canvas></canvas>\r\n        </ion-card-content>\r\n        <ion-grid>\r\n          <ion-row>\r\n            <ion-col *ngIf=\"showClear\" size=\"6\">\r\n              <ion-button fill=\"solid\" expand=\"block\" color=\"light\" (click)=\"clear()\">CLEAR</ion-button>\r\n            </ion-col>\r\n            <ion-col *ngIf=\"showConfirm\" size=\"6\">\r\n              <ion-button expand=\"block\" fill=\"solid\" color=\"secondary\" strong=\"true\" (click)=\"sign()\">CONFIRM </ion-button>\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n      </ion-card>\r\n    </ion-col>\r\n  </ion-row>\r\n</ion-grid>\r\n","import { Component, OnInit, ViewChild, Input, Output, EventEmitter, AfterViewInit, ViewChildren, QueryList, OnDestroy, ElementRef } from '@angular/core';\r\nimport SignaturePad from 'signature_pad';\r\nimport { PopoverController } from '@ionic/angular';\r\nimport { ErrorService } from '../../../services/common/error/error.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-signature',\r\n  templateUrl: './signature.component.html',\r\n  styleUrls: ['./signature.component.scss'],\r\n})\r\nexport class SignatureComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  signature: SignaturePad;\r\n\r\n  @Output()\r\n  sigBlob = new EventEmitter<Blob>();\r\n\r\n  @Input()\r\n  sigTitle: string;\r\n\r\n  @Input()\r\n  showConfirm: boolean;\r\n\r\n  @Input()\r\n  showClear: boolean;\r\n\r\n  private sub = new Subscription();\r\n  constructor(private el: ElementRef, private pop: PopoverController, private err: ErrorService) {}\r\n\r\n  ngOnInit() {\r\n    try {\r\n      this.sigTitle = this.sigTitle ? this.sigTitle : 'Signature';\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    try {\r\n      this.sub.unsubscribe();\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    try {\r\n      this.signature = new SignaturePad(this.el.nativeElement.querySelector('canvas'));\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    try {\r\n      this.signature.clear();\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  sign() {\r\n    try {\r\n      const b = this.getSigBlob();\r\n      this.sigBlob.emit(b);\r\n      this.dismissPopover(b);\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  private getSigBlob(): Blob {\r\n    const base64ImgData = this.signature.toDataURL();\r\n    return this.convertBase64ToBlob(base64ImgData.split(',')[1], 'image/png');\r\n  }\r\n\r\n  private async dismissPopover(b: Blob) {\r\n    const popover = await this.pop.getTop();\r\n    if (popover) {\r\n      await popover.dismiss(b);\r\n    }\r\n    return;\r\n  }\r\n\r\n  private convertBase64ToBlob(data: string, formatType: string): Blob {\r\n    const byteString = atob(data);\r\n    const ab = new ArrayBuffer(byteString.length);\r\n    const ia = new Uint8Array(ab);\r\n    for (let i = 0; i < byteString.length; i++) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n    return new Blob([ab], { type: formatType });\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>Terms and Conditions</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"cancel()\">\r\n        <ion-text>Cancel</ion-text>\r\n      </ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content slot=\"fixed\">\r\n  <div class=\"vertical-grow\" *ngIf=\"!showSign\">\r\n    <div>\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-subtitle>Test Drive T&C</ion-card-subtitle>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <div [innerHTML]=\"tdTerms\" class=\"termsWrapper\"></div>\r\n        </ion-card-content>\r\n      </ion-card>\r\n    </div>\r\n    <div *ngIf=\"needsPDPA\">\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-subtitle>PDPA</ion-card-subtitle>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <div class=\"termsWrapper\" [innerHTML]=\"pdpaTerms\"></div>\r\n        </ion-card-content>\r\n      </ion-card>\r\n    </div>\r\n  </div>\r\n  <!-- <ion-grid *ngIf=\"!showSign\">\r\n      <ion-row>\r\n        <ion-col>\r\n          \r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row>\r\n        <ion-col>\r\n          \r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid> -->\r\n  <ion-grid *ngIf=\"showSign\">\r\n    <ion-row>\r\n      <ion-col>\r\n        <app-signature sigTitle=\"Test Drive Signature\" (sigBlob)=\"saveSignature($event)\" [showClear]=\"true\"></app-signature>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ion-content>\r\n\r\n<ion-footer>\r\n  <ion-toolbar>\r\n    <ion-grid>\r\n      <ion-row *ngIf=\"!showSign && needsPDPA\">\r\n        <ion-col>\r\n          <form [formGroup]=\"pdpaForm\">\r\n            <ion-grid no-padding>\r\n              <ion-row>\r\n                <ion-col size=\"1\">\r\n                  <ion-checkbox formControlName=\"dataConsent\" class=\"resetLineHeight\"></ion-checkbox>\r\n                </ion-col>\r\n                <ion-col size=\"11\">\r\n                  <ion-label>{{ dataConsent }}</ion-label>\r\n                </ion-col>\r\n              </ion-row>\r\n              <ion-row>\r\n                <ion-col size=\"1\">\r\n                  <ion-checkbox formControlName=\"marketingConsent\" class=\"resetLineHeight\"></ion-checkbox>\r\n                </ion-col>\r\n                <ion-col size=\"11\">\r\n                  <ion-label>{{ marketingConsent }}</ion-label>\r\n                </ion-col>\r\n              </ion-row>\r\n            </ion-grid>\r\n          </form>\r\n        </ion-col>\r\n      </ion-row>\r\n      <ion-row>\r\n        <ion-col *ngIf=\"showSign\">\r\n          <ion-button [disabled]=\"isSaving\" type=\"button\" expand=\"block\" fill=\"solid\" color=\"light\" (click)=\"cancelSign()\">Cancel</ion-button>\r\n        </ion-col>\r\n        <ion-col *ngIf=\"showSign\">\r\n          <ion-button type=\"button\" *ngIf=\"!isSaving\" expand=\"block\" strong=\"true\" fill=\"solid\" color=\"secondary\" (click)=\"sigElem?.sign()\">Confirm</ion-button>\r\n          <ion-button type=\"button\" *ngIf=\"isSaving\" expand=\"block\" strong=\"true\" fill=\"solid\" color=\"secondary\" disabled>\r\n            <ion-spinner></ion-spinner>\r\n          </ion-button>\r\n        </ion-col>\r\n        <ion-col *ngIf=\"!showSign\">\r\n          <ion-button type=\"button\" expand=\"block\" fill=\"solid\" color=\"secondary\" (click)=\"sign()\">Sign</ion-button>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid>\r\n  </ion-toolbar>\r\n</ion-footer>\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ModalController, PopoverController } from '@ionic/angular';\r\nimport { Observable } from 'rxjs';\r\nimport { mergeMap } from 'rxjs/operators';\r\nimport { Testdrive } from 'src/app/models/common/testdrive.model';\r\nimport { ErrorService } from 'src/app/services/common/error/error.service';\r\nimport { PDFSignService } from 'src/app/services/common/pdf-sign/pdfsign.service';\r\nimport { CommonTestdriveService } from 'src/app/services/common/testdrive/testdrive.service';\r\nimport { SignatureComponent } from '../signature/signature.component';\r\n\r\n@Component({\r\n  selector: 'app-test-drive-indemnity',\r\n  templateUrl: './test-drive-indemnity.component.html',\r\n  styleUrls: ['./test-drive-indemnity.component.scss'],\r\n})\r\nexport class TestDriveIndemnityComponent implements OnInit {\r\n  td: Testdrive;\r\n  pdpaForm: FormGroup;\r\n  marketingConsent: string;\r\n  dataConsent: string;\r\n  pdpaTerms: string;\r\n  tdTerms: string;\r\n  needsPDPA: boolean;\r\n  pdfBlob: Blob;\r\n  sigImg: Blob;\r\n  showSign: boolean;\r\n  isSaving = false;\r\n\r\n  @ViewChild(SignatureComponent) sigElem;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private tdService: CommonTestdriveService,\r\n    private popover: PopoverController,\r\n    private pdfSign: PDFSignService,\r\n    private modal: ModalController,\r\n    private err: ErrorService\r\n  ) {\r\n    try {\r\n      this.pdpaForm = this.fb.group({\r\n        dataConsent: [false],\r\n        marketingConsent: [false],\r\n      });\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.needsPDPA) {\r\n      this.pdpaForm.controls['dataConsent'].setValidators([Validators.requiredTrue]);\r\n    }\r\n  }\r\n\r\n  saveSignature(evt) {\r\n    if (!evt) {\r\n      return;\r\n    }\r\n    this.isSaving = true;\r\n    const height = this.needsPDPA ? 740 : 690;\r\n    this.getPDFBlob()\r\n      .pipe(\r\n        mergeMap((pdfBlob) => {\r\n          console.log(pdfBlob);\r\n          return this.pdfSign.signPDF(90, height, 0, 200, 40, pdfBlob, evt);\r\n        }),\r\n        mergeMap((signedPDF) => {\r\n          console.log(signedPDF);\r\n          return this.tdService.saveSignedPDF(\r\n            this.td,\r\n            signedPDF,\r\n            !this.needsPDPA || this.pdpaForm.get('dataConsent').value,\r\n            !this.needsPDPA || this.pdpaForm.get('marketingConsent').value\r\n          );\r\n        })\r\n      )\r\n      .subscribe((res) => {\r\n        this.td = res;\r\n        this.isSaving = false;\r\n        this.modal.dismiss(res);\r\n      });\r\n  }\r\n\r\n  sign() {\r\n    try {\r\n      if (!this.pdpaForm.valid) {\r\n        Object.values(this.pdpaForm.controls).forEach((ctrl) => {\r\n          ctrl.markAsTouched({ onlySelf: true });\r\n        });\r\n        return;\r\n      }\r\n      this.showSign = true;\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  cancelSign() {\r\n    try {\r\n      this.showSign = false;\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    try {\r\n      this.modal.dismiss();\r\n    } catch (err) {\r\n      this.err.logError(err);\r\n      this.err.presentServerErr(err);\r\n    }\r\n  }\r\n\r\n  private getPDFBlob(): Observable<Blob> {\r\n    return this.tdService.getBlankTDPDF(\r\n      this.td,\r\n      !this.needsPDPA || this.pdpaForm.get('marketingConsent').value,\r\n      !this.needsPDPA || this.pdpaForm.get('dataConsent').value\r\n    );\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"dismiss()\">\r\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{\"ViewTestdrivePage_Testdrive\"|translate}}<br />\r\n      <ion-text class=\"sub-header\"> {{\"TestdrivePage_OpportunityID\"|translate}}: {{testdrive?.OpportunityId}} </ion-text>\r\n    </ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content class=\"ion-padding\">\r\n  <section class=\"ion-text-center\">\r\n    <h2>{{testdrive?.ContactName}}</h2>\r\n    <ion-text class=\"sub-title\">{{testdrive?.SourceName}}</ion-text>\r\n  </section>\r\n  <!-- CONTACT DETAILS -->\r\n  <section class=\"ion-margin-top\">\r\n    <ion-text>\r\n      <b>{{\"ViewTestdrivePage_ContactDetails\"|translate}}</b>\r\n    </ion-text>\r\n    <div class=\"ion-margin-top\">\r\n      <ion-grid class=\"ion-no-margin\">\r\n        <ion-row>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_IDNumber\"|translate}} </ion-col>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{testdrive?.DocNum}} </ion-col>\r\n        </ion-row>\r\n        <ion-row>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_DrivingLicense\"|translate}} </ion-col>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{testdrive?.DrivingLicense}} </ion-col>\r\n        </ion-row>\r\n        <ion-row>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_ExpiryDate\"|translate}} </ion-col>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{ testdrive?.ExpiryDate | date: \"dd MMM y\" }} </ion-col>\r\n        </ion-row>\r\n        <ion-row>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_PlannedStartDate\"|translate}} </ion-col>\r\n          <ion-col size=\"6\" class=\"ion-text-start\"> {{ testdrive?.PlannedStartDate | date: \"dd MMM y h:mm a\" }} </ion-col>\r\n        </ion-row>\r\n      </ion-grid>\r\n    </div>\r\n  </section>\r\n  <!-- VEHICLE DETAILS -->\r\n  <section class=\"ion-margin-top\" *ngIf=\"testdrive?.Vehicle\">\r\n    <ion-text>\r\n      <b>{{\"ViewTestdrivePage_VehicleDetails\"|translate}}</b>\r\n    </ion-text>\r\n    <div class=\"ion-margin-top\">\r\n      <ng-container [formGroup]=\"tdForm\">\r\n        <ion-grid class=\"ion-no-margin\">\r\n          <ion-row>\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_VariantName\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\" color=\"primary\">\r\n              <ion-text color=\"primary\"> {{testdrive?.Vehicle?.Name}} </ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row>\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_Chassis\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\" color=\"primary\">\r\n              <ion-text color=\"primary\"> {{testdrive?.Vehicle?.Chassis}} </ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row>\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_StartTime\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\">\r\n              <ion-text color=\"primary\"> {{ testdrive?.Vehicle?.StartTime | date: \"hh:mm a\" }} </ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row class=\"ion-align-items-center\">\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_MileageStart\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\">\r\n              <ion-text color=\"primary\">{{testdrive?.Vehicle?.MileageStart}}</ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row class=\"ion-align-items-center\">\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_MileageEnd\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\">\r\n              <ion-text color=\"primary\">{{testdrive?.Vehicle?.MileageEnd}}</ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n          <ion-row class=\"ion-align-items-center\">\r\n            <ion-col size=\"6\" class=\"ion-text-start\"> {{\"ViewTestdrivePage_Notes\"|translate}} </ion-col>\r\n            <ion-col size=\"6\" class=\"ion-text-start\">\r\n              <ion-text color=\"primary\">{{testdrive?.Vehicle?.Notes}}</ion-text>\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n      </ng-container>\r\n    </div>\r\n  </section>\r\n  <!-- ADDITIONAL DETAILS -->\r\n  <section class=\"ion-margin-top\">\r\n    <ion-text>\r\n      <b>{{\"ViewTestdrivePage_AdditionalDetails\"|translate}}</b>\r\n    </ion-text>\r\n    <div class=\"ion-margin-top\">\r\n      <ion-grid class=\"ion-no-margin ion-no-padding\">\r\n        <ion-row>\r\n          <ion-col>\r\n            <ion-item button detail (click)=\"this.testdrive.IsSigned ? printTD() : signTD()\">\r\n              <ion-label> {{\"ViewTestdrivePage_IndemnityForm\"|translate}} </ion-label>\r\n              <ion-label class=\"ion-text-end\">\r\n                <ion-icon class=\"done-icon\" color=\"primary\" [name]=\"this.testdrive.IsSigned ? 'checkmark-circle' : 'ellipse-outline'\"></ion-icon>\r\n              </ion-label>\r\n            </ion-item>\r\n          </ion-col>\r\n        </ion-row>\r\n      </ion-grid>\r\n    </div>\r\n  </section>\r\n</ion-content>\r\n<ion-footer class=\"ion-padding\" *ngIf=\"showFooter()\">\r\n  <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" (click)=\"scan()\" *ngIf=\"this.testdrive.Status == 'SCHEDULED'\" [disabled]=\"!this.testdrive.IsSigned\">\r\n    <ion-label> {{ \"ViewTestdrivePage_Next\" | translate }} </ion-label>\r\n  </ion-button>\r\n  <ion-button fill=\"outline\" expand=\"block\" color=\"primary\" (click)=\"endTd()\" *ngIf=\"this.testdrive.Status == 'VEHICLE OUT'\">\r\n    <ion-label> {{ \"ViewTestdrivePage_End\" | translate }} </ion-label>\r\n  </ion-button>\r\n</ion-footer>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ViewTestdrivePage } from './view-testdrive.page';\r\nimport { ViewTestdrivePageRoutingKeys } from './view-testdrive-routing.keys';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: `:${ViewTestdrivePageRoutingKeys.PARAM_ID}`,\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: ViewTestdrivePage,\r\n        pathMatch: 'full',\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ViewTestdrivePageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Subscription, from, forkJoin } from 'rxjs';\r\nimport { Testdrive } from 'src/app/models/common/testdrive.model';\r\nimport { ViewTestdrivePageRoutingKeys } from './view-testdrive-routing.keys';\r\nimport { EditTestdrivePageRoutingKeys } from '../edit-testdrive/edit-testdrive-routing.keys';\r\nimport { CommonTestdriveService } from 'src/app/services/common/testdrive/testdrive.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { mergeMap } from 'rxjs/internal/operators/mergeMap';\r\nimport { tap, map } from 'rxjs/operators';\r\nimport { AlertController, LoadingController, ModalController, NavController, ToastController } from '@ionic/angular';\r\nimport { ScanTestdriveComponent } from './scan-testdrive/scan-testdrive.component';\r\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\r\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\r\nimport { TestDriveIndemnityComponent } from 'src/app/components/common/test-drive-indemnity/test-drive-indemnity.component';\r\nimport { TestDriveTNC } from 'src/app/models/common/test-drive-tnc.model';\r\nimport { KeyScannerComponent } from 'src/app/components/common/key-scanner/key-scanner.component';\r\nimport { FileEntry } from '@ionic-native/file/ngx';\r\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\r\nimport { ErrorService } from 'src/app/services/common/error/error.service';\r\n\r\n@Component({\r\n  selector: 'app-view-testdrive',\r\n  templateUrl: './view-testdrive.page.html',\r\n  styleUrls: ['./view-testdrive.page.scss'],\r\n})\r\nexport class ViewTestdrivePage implements OnInit {\r\n  private subs = new Subscription();\r\n  testdrive: Testdrive;\r\n  tdForm: FormGroup;\r\n  formErrorMessages: FormErrorMessages;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private testdriveSrvc: CommonTestdriveService,\r\n    private translate: TranslateService,\r\n    private loadingCtrl: LoadingController,\r\n    private modalCtrl: ModalController,\r\n    private formBuilder: FormBuilder,\r\n    private navCtrl: NavController,\r\n    private opener: FileOpener,\r\n    private alertCtrl: AlertController,\r\n    private toastCtrl: ToastController,\r\n    private errorSrvc: ErrorService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.tdForm = this.initTdForm();\r\n    this.subs.add(this.parseURL());\r\n    console.log(this.testdrive);\r\n  }\r\n\r\n  private initTdForm(): FormGroup {\r\n    const tdForm = this.formBuilder.group({\r\n      mileageEnd: [''],\r\n      notes: [''],\r\n    });\r\n    this.initErrorMessages(tdForm);\r\n    return tdForm;\r\n  }\r\n\r\n  private initErrorMessages(form: FormGroup) {\r\n    this.translate.get('Error_CannotBeEmpty').subscribe((lang) => {\r\n      this.formErrorMessages = {\r\n        group: {},\r\n      };\r\n      if (!form) {\r\n        return;\r\n      }\r\n      for (const key of Object.keys(form.controls)) {\r\n        switch (key) {\r\n          case 'mileageEnd':\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  parseURL() {\r\n    this.testdrive = new Testdrive();\r\n    return this.route.paramMap.subscribe((params) => {\r\n      this.testdrive.Id = params.get(ViewTestdrivePageRoutingKeys.PARAM_ID);\r\n      this.getData(this.testdrive.Id);\r\n    });\r\n  }\r\n\r\n  dismiss() {\r\n    this.navCtrl.back();\r\n  }\r\n\r\n  getData(testdriveId: string) {\r\n    this.translate\r\n      .get('Common_Loading')\r\n      .pipe(\r\n        mergeMap((lang) => {\r\n          return from(\r\n            this.loadingCtrl.create({\r\n              message: lang,\r\n            })\r\n          );\r\n        }),\r\n        mergeMap((loading) => {\r\n          loading.present();\r\n          return this.testdriveSrvc\r\n            .getTestdrivesById(testdriveId)\r\n            .pipe(\r\n              tap((e) => {\r\n                this.testdrive = e;\r\n                this.updateForm();\r\n              })\r\n            )\r\n            .pipe(\r\n              tap(\r\n                (e) => {\r\n                  loading.dismiss();\r\n                },\r\n                (err) => {\r\n                  loading.dismiss();\r\n                }\r\n              )\r\n            );\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  updateForm() {\r\n    this.tdForm.get('mileageEnd').setValue(this.testdrive.Vehicle?.MileageEnd);\r\n    this.tdForm.get('notes').setValue(this.testdrive.Vehicle?.Notes);\r\n  }\r\n\r\n  editTestdrive() {\r\n    this.router.navigate([`${EditTestdrivePageRoutingKeys.BASE}/${this.testdrive.Id}`]);\r\n  }\r\n\r\n  signTD() {\r\n    this.translate\r\n      .get('Common_Loading')\r\n      .pipe(\r\n        mergeMap((lang) => {\r\n          return from(\r\n            this.loadingCtrl.create({\r\n              message: lang,\r\n            })\r\n          );\r\n        }),\r\n        mergeMap((loading) => {\r\n          loading.present();\r\n          return this.testdriveSrvc.getTNCTerms(this.testdrive).pipe(\r\n            mergeMap((terms: TestDriveTNC, _) => {\r\n              console.log(terms);\r\n              return this.modalCtrl.create({\r\n                component: TestDriveIndemnityComponent,\r\n                componentProps: {\r\n                  td: this.testdrive,\r\n                  marketingConsent: terms.marketingConsent,\r\n                  dataConsent: terms.dataConsent,\r\n                  pdpaTerms: terms.pdpaTerms,\r\n                  tdTerms: terms.tdTerms,\r\n                  needsPDPA: terms.needsPDPA,\r\n                },\r\n              });\r\n            }),\r\n            mergeMap((modal) => {\r\n              loading.dismiss();\r\n              modal.present();\r\n              return modal.onDidDismiss();\r\n            })\r\n          );\r\n        })\r\n      )\r\n      .subscribe((res) => {\r\n        if (res.data) {\r\n          console.log(res);\r\n          this.testdrive = Object.assign(new Testdrive(), res.data);\r\n        }\r\n      });\r\n  }\r\n\r\n  printTD() {\r\n    return this.testdriveSrvc\r\n      .getSignedTDPDF(this.testdrive)\r\n      .pipe(map((fileEntry: FileEntry) => this.opener.open(fileEntry.toURL(), 'application/pdf')))\r\n      .subscribe();\r\n  }\r\n\r\n  scan() {\r\n    from(\r\n      this.modalCtrl.create({\r\n        component: ScanTestdriveComponent,\r\n        backdropDismiss: false,\r\n        animated: true,\r\n        cssClass: 'full-screen',\r\n        componentProps: {\r\n          testdrive: this.testdrive ? Object.assign({}, this.testdrive) : null,\r\n        },\r\n      })\r\n    ).subscribe((modal) => {\r\n      from(modal.onDidDismiss()).subscribe((res: any) => {\r\n        if (res && res.data) {\r\n          this.testdrive = res.data;\r\n        }\r\n      });\r\n      modal.present();\r\n    });\r\n  }\r\n\r\n  endTd() {\r\n    const btns = [];\r\n    from(\r\n      this.alertCtrl.create({\r\n        backdropDismiss: false,\r\n        inputs: [\r\n          {\r\n            placeholder: 'End Mileage',\r\n            name: 'endMileage',\r\n            type: 'text',\r\n          },\r\n          {\r\n            placeholder: 'Customer Comments',\r\n            name: 'remarks',\r\n            type: 'text',\r\n          },\r\n        ],\r\n      })\r\n    )\r\n      .pipe(\r\n        mergeMap((alert) => {\r\n          return forkJoin([\r\n            this.translate.get('ViewTestdrivePage_EndTD').pipe(\r\n              tap((lang) => {\r\n                alert.header = lang;\r\n              })\r\n            ),\r\n            this.translate.get('Common_Cancel').pipe(\r\n              tap((lang) => {\r\n                btns.push({\r\n                  text: lang,\r\n                  role: 'cancel',\r\n                  handler: () => {},\r\n                });\r\n              })\r\n            ),\r\n            this.translate.get('ViewTestdrivePage_End').pipe(\r\n              tap((lang) => {\r\n                btns.push({\r\n                  text: lang,\r\n                  handler: (data) => {\r\n                    if (!data.endMileage) {\r\n                      this.errorSrvc.presentServerErr('Please key in the mileage');\r\n                      return false;\r\n                    }\r\n                    if (this.testdrive.Vehicle.MileageStart >= data.endMileage) {\r\n                      this.errorSrvc.presentServerErr(`Mileage must be higher than starting mileage (${this.testdrive.Vehicle.MileageStart})`);\r\n                      return false;\r\n                    }\r\n                    this.translate\r\n                      .get('Common_Loading')\r\n                      .pipe(\r\n                        mergeMap((loadLang) => {\r\n                          return from(\r\n                            this.loadingCtrl.create({\r\n                              message: loadLang,\r\n                            })\r\n                          );\r\n                        }),\r\n                        mergeMap((loading) => {\r\n                          loading.present();\r\n                          this.testdrive.Vehicle.MileageEnd = data.endMileage;\r\n                          this.testdrive.Vehicle.Notes = data.remarks;\r\n                          return this.testdriveSrvc\r\n                            .endTestdrive(this.testdrive)\r\n                            .pipe(\r\n                              tap((res) => {\r\n                                this.testdrive = res;\r\n                              })\r\n                            )\r\n                            .pipe(\r\n                              tap(\r\n                                (e) => {\r\n                                  loading.dismiss();\r\n                                },\r\n                                (err) => {\r\n                                  this.testdrive.Vehicle.MileageEnd = '';\r\n                                  this.testdrive.Vehicle.Notes = '';\r\n                                  loading.dismiss();\r\n                                  console.log(err);\r\n                                  this.errorSrvc.presentServerErr(err);\r\n                                  return false;\r\n                                }\r\n                              )\r\n                            );\r\n                        })\r\n                      )\r\n                      .subscribe();\r\n                  },\r\n                });\r\n              })\r\n            ),\r\n          ]).pipe(\r\n            tap(() => {\r\n              alert.buttons = btns;\r\n              alert.present();\r\n            })\r\n          );\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  showFooter() {\r\n    return this.testdrive?.Vehicle?.Status.toLocaleLowerCase() === 'completed' ? false : true;\r\n  }\r\n\r\n  disableNextButton() {\r\n    if (this.testdrive && this.testdrive?.Vehicle) {\r\n      return this.tdForm.invalid;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { SignatureComponent } from './signature.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, IonicModule, TranslateModule],\r\n  declarations: [SignatureComponent],\r\n  exports: [SignatureComponent],\r\n})\r\nexport class SignatureComponentModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { TestDriveIndemnityComponent } from './test-drive-indemnity.component';\r\nimport { SignatureComponentModule } from '../signature/signature.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, IonicModule, ReactiveFormsModule, FormsModule, SignatureComponentModule],\r\n  declarations: [TestDriveIndemnityComponent],\r\n  exports: [TestDriveIndemnityComponent],\r\n})\r\nexport class TestDriveIndemnityComponentModule {}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { KeyScannerComponent } from './key-scanner.component';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, IonicModule],\r\n  declarations: [KeyScannerComponent],\r\n  exports: [KeyScannerComponent],\r\n})\r\nexport class KeyScannerComponentModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ViewTestdrivePageRoutingModule } from './view-testdrive-routing.module';\r\n\r\nimport { ViewTestdrivePage } from './view-testdrive.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ScanTestdriveComponent } from './scan-testdrive/scan-testdrive.component';\r\nimport { ItemErrComponentModule } from 'src/app/components/common/item-err/item-err.module';\r\nimport { TestDriveIndemnityComponent } from 'src/app/components/common/test-drive-indemnity/test-drive-indemnity.component';\r\nimport { TestDriveIndemnityComponentModule } from 'src/app/components/common/test-drive-indemnity/test-drive-indemnity.module';\r\nimport { KeyScannerComponentModule } from 'src/app/components/common/key-scanner/key-scanner.module';\r\nimport { KeyScannerComponent } from 'src/app/components/common/key-scanner/key-scanner.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TranslateModule,\r\n    IonicModule,\r\n    TranslateModule,\r\n    ViewTestdrivePageRoutingModule,\r\n    ItemErrComponentModule,\r\n    TestDriveIndemnityComponentModule,\r\n    KeyScannerComponentModule,\r\n  ],\r\n  declarations: [ViewTestdrivePage, ScanTestdriveComponent],\r\n  entryComponents: [TestDriveIndemnityComponent, KeyScannerComponent],\r\n})\r\nexport class ViewTestdrivePageModule {}\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\nexports.isPromise = isPromise;\n//# sourceMappingURL=isPromise.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar identity_1 = require(\"./identity\");\nfunction pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexports.pipe = pipe;\nfunction pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity_1.identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\nexports.pipeFromArray = pipeFromArray;\n//# sourceMappingURL=pipe.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scheduleObservable_1 = require(\"./scheduleObservable\");\nvar schedulePromise_1 = require(\"./schedulePromise\");\nvar scheduleArray_1 = require(\"./scheduleArray\");\nvar scheduleIterable_1 = require(\"./scheduleIterable\");\nvar isInteropObservable_1 = require(\"../util/isInteropObservable\");\nvar isPromise_1 = require(\"../util/isPromise\");\nvar isArrayLike_1 = require(\"../util/isArrayLike\");\nvar isIterable_1 = require(\"../util/isIterable\");\nfunction scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable_1.isInteropObservable(input)) {\n            return scheduleObservable_1.scheduleObservable(input, scheduler);\n        }\n        else if (isPromise_1.isPromise(input)) {\n            return schedulePromise_1.schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike_1.isArrayLike(input)) {\n            return scheduleArray_1.scheduleArray(input, scheduler);\n        }\n        else if (isIterable_1.isIterable(input) || typeof input === 'string') {\n            return scheduleIterable_1.scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\nexports.scheduled = scheduled;\n//# sourceMappingURL=scheduled.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isFunction_1 = require(\"./util/isFunction\");\nvar Observer_1 = require(\"./Observer\");\nvar Subscription_1 = require(\"./Subscription\");\nvar rxSubscriber_1 = require(\"../internal/symbol/rxSubscriber\");\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== Observer_1.empty) {\n                context = Object.create(observerOrNext);\n                if (isFunction_1.isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config_1.config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError_1.hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError_1.hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config_1.config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError_1.hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexports.SafeSubscriber = SafeSubscriber;\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(x) {\n    return x !== null && typeof x === 'object';\n}\nexports.isObject = isObject;\n//# sourceMappingURL=isObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar config_1 = require(\"./config\");\nvar hostReportError_1 = require(\"./util/hostReportError\");\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError_1.hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar observable_1 = require(\"../symbol/observable\");\nfunction isInteropObservable(input) {\n    return input && typeof input[observable_1.observable] === 'function';\n}\nexports.isInteropObservable = isInteropObservable;\n//# sourceMappingURL=isInteropObservable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar UnsubscriptionErrorImpl = (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexports.UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar Subscription_1 = require(\"../Subscription\");\nvar iterator_1 = require(\"../symbol/iterator\");\nfunction scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable_1.Observable(function (subscriber) {\n        var sub = new Subscription_1.Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[iterator_1.iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\nexports.scheduleIterable = scheduleIterable;\n//# sourceMappingURL=scheduleIterable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\nexports.hostReportError = hostReportError;\n//# sourceMappingURL=hostReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.subscribeToArray = function (array) { return function (subscriber) {\n    for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n        subscriber.next(array[i]);\n    }\n    subscriber.complete();\n}; };\n//# sourceMappingURL=subscribeToArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar canReportError_1 = require(\"./util/canReportError\");\nvar toSubscriber_1 = require(\"./util/toSubscriber\");\nvar observable_1 = require(\"./symbol/observable\");\nvar pipe_1 = require(\"./util/pipe\");\nvar config_1 = require(\"./config\");\nvar Observable = (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config_1.config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config_1.config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError_1.canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[observable_1.observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipe_1.pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config_1.config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar map_1 = require(\"./map\");\nvar from_1 = require(\"../observable/from\");\nvar innerSubscribe_1 = require(\"../innerSubscribe\");\nfunction mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from_1.from(project(a, i)).pipe(map_1.map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nexports.mergeMap = mergeMap;\nvar MergeMapOperator = (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexports.MergeMapOperator = MergeMapOperator;\nvar MergeMapSubscriber = (function (_super) {\n    __extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish) {\n        var innerSubscriber = new innerSubscribe_1.SimpleInnerSubscriber(this);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        var innerSubscription = innerSubscribe_1.innerSubscribe(ish, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            destination.add(innerSubscription);\n        }\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (innerValue) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function () {\n        var buffer = this.buffer;\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(innerSubscribe_1.SimpleOuterSubscriber));\nexports.MergeMapSubscriber = MergeMapSubscriber;\nexports.flatMap = mergeMap;\n//# sourceMappingURL=mergeMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexports.getSymbolIterator = getSymbolIterator;\nexports.iterator = getSymbolIterator();\nexports.$$iterator = exports.iterator;\n//# sourceMappingURL=iterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nvar rxSubscriber_1 = require(\"../symbol/rxSubscriber\");\nvar Observer_1 = require(\"../Observer\");\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar hostReportError_1 = require(\"./hostReportError\");\nexports.subscribeToPromise = function (promise) { return function (subscriber) {\n    promise.then(function (value) {\n        if (!subscriber.closed) {\n            subscriber.next(value);\n            subscriber.complete();\n        }\n    }, function (err) { return subscriber.error(err); })\n        .then(null, hostReportError_1.hostReportError);\n    return subscriber;\n}; };\n//# sourceMappingURL=subscribeToPromise.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar subscribeTo_1 = require(\"../util/subscribeTo\");\nvar scheduled_1 = require(\"../scheduled/scheduled\");\nfunction from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable_1.Observable) {\n            return input;\n        }\n        return new Observable_1.Observable(subscribeTo_1.subscribeTo(input));\n    }\n    else {\n        return scheduled_1.scheduled(input, scheduler);\n    }\n}\nexports.from = from;\n//# sourceMappingURL=from.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArray = (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexports.config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = new Error();\n            console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Observable_1 = require(\"../Observable\");\nvar Subscription_1 = require(\"../Subscription\");\nfunction schedulePromise(input, scheduler) {\n    return new Observable_1.Observable(function (subscriber) {\n        var sub = new Subscription_1.Subscription();\n        sub.add(scheduler.schedule(function () { return input.then(function (value) {\n            sub.add(scheduler.schedule(function () {\n                subscriber.next(value);\n                sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n            }));\n        }, function (err) {\n            sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n        }); }));\n        return sub;\n    });\n}\nexports.schedulePromise = schedulePromise;\n//# sourceMappingURL=schedulePromise.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar observable_1 = require(\"../symbol/observable\");\nexports.subscribeToObservable = function (obj) { return function (subscriber) {\n    var obs = obj[observable_1.observable]();\n    if (typeof obs.subscribe !== 'function') {\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    }\n    else {\n        return obs.subscribe(subscriber);\n    }\n}; };\n//# sourceMappingURL=subscribeToObservable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rxSubscriber = (function () {\n    return typeof Symbol === 'function'\n        ? Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + Math.random();\n})();\nexports.$$rxSubscriber = exports.rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar iterator_1 = require(\"../symbol/iterator\");\nexports.subscribeToIterable = function (iterable) { return function (subscriber) {\n    var iterator = iterable[iterator_1.iterator]();\n    do {\n        var item = void 0;\n        try {\n            item = iterator.next();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return subscriber;\n        }\n        if (item.done) {\n            subscriber.complete();\n            break;\n        }\n        subscriber.next(item.value);\n        if (subscriber.closed) {\n            break;\n        }\n    } while (true);\n    if (typeof iterator.return === 'function') {\n        subscriber.add(function () {\n            if (iterator.return) {\n                iterator.return();\n            }\n        });\n    }\n    return subscriber;\n}; };\n//# sourceMappingURL=subscribeToIterable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\nexports.isFunction = isFunction;\n//# sourceMappingURL=isFunction.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nexports.map = map;\nvar MapOperator = (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexports.MapOperator = MapOperator;\nvar MapSubscriber = (function (_super) {\n    __extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=map.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"./Subscriber\");\nvar Observable_1 = require(\"./Observable\");\nvar subscribeTo_1 = require(\"./util/subscribeTo\");\nvar SimpleInnerSubscriber = (function (_super) {\n    __extends(SimpleInnerSubscriber, _super);\n    function SimpleInnerSubscriber(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        return _this;\n    }\n    SimpleInnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(value);\n    };\n    SimpleInnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error);\n        this.unsubscribe();\n    };\n    SimpleInnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete();\n        this.unsubscribe();\n    };\n    return SimpleInnerSubscriber;\n}(Subscriber_1.Subscriber));\nexports.SimpleInnerSubscriber = SimpleInnerSubscriber;\nvar ComplexInnerSubscriber = (function (_super) {\n    __extends(ComplexInnerSubscriber, _super);\n    function ComplexInnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        return _this;\n    }\n    ComplexInnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this);\n    };\n    ComplexInnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error);\n        this.unsubscribe();\n    };\n    ComplexInnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return ComplexInnerSubscriber;\n}(Subscriber_1.Subscriber));\nexports.ComplexInnerSubscriber = ComplexInnerSubscriber;\nvar SimpleOuterSubscriber = (function (_super) {\n    __extends(SimpleOuterSubscriber, _super);\n    function SimpleOuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SimpleOuterSubscriber.prototype.notifyNext = function (innerValue) {\n        this.destination.next(innerValue);\n    };\n    SimpleOuterSubscriber.prototype.notifyError = function (err) {\n        this.destination.error(err);\n    };\n    SimpleOuterSubscriber.prototype.notifyComplete = function () {\n        this.destination.complete();\n    };\n    return SimpleOuterSubscriber;\n}(Subscriber_1.Subscriber));\nexports.SimpleOuterSubscriber = SimpleOuterSubscriber;\nvar ComplexOuterSubscriber = (function (_super) {\n    __extends(ComplexOuterSubscriber, _super);\n    function ComplexOuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ComplexOuterSubscriber.prototype.notifyNext = function (_outerValue, innerValue, _outerIndex, _innerSub) {\n        this.destination.next(innerValue);\n    };\n    ComplexOuterSubscriber.prototype.notifyError = function (error) {\n        this.destination.error(error);\n    };\n    ComplexOuterSubscriber.prototype.notifyComplete = function (_innerSub) {\n        this.destination.complete();\n    };\n    return ComplexOuterSubscriber;\n}(Subscriber_1.Subscriber));\nexports.ComplexOuterSubscriber = ComplexOuterSubscriber;\nfunction innerSubscribe(result, innerSubscriber) {\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable_1.Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo_1.subscribeTo(result)(innerSubscriber);\n}\nexports.innerSubscribe = innerSubscribe;\n//# sourceMappingURL=innerSubscribe.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction identity(x) {\n    return x;\n}\nexports.identity = identity;\n//# sourceMappingURL=identity.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Subscriber_1 = require(\"../Subscriber\");\nfunction canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber_1.Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\nexports.canReportError = canReportError;\n//# sourceMappingURL=canReportError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isArray_1 = require(\"./util/isArray\");\nvar isObject_1 = require(\"./util/isObject\");\nvar isFunction_1 = require(\"./util/isFunction\");\nvar UnsubscriptionError_1 = require(\"./util/UnsubscriptionError\");\nvar Subscription = (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._ctorUnsubscribe = true;\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _ctorUnsubscribe = _a._ctorUnsubscribe, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            if (_ctorUnsubscribe) {\n                this._unsubscribe = undefined;\n            }\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError_1.UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError_1.UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.observable = (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map"],"sourceRoot":"webpack:///"}