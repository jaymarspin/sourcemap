(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7/N5":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n("nQkn"),i=n("fXoL"),r=n("7zc5");let c=(()=>{class t{constructor(t,e){this.offerAPI=t,this.errorSrvc=e}getOffers(t,e){const n=t||"";try{return this.offerAPI.getOffers(n,e)}catch(o){this.errorSrvc.presentServerErr(o)}}getOffersByKeyword(t,e){try{return this.offerAPI.getOffersByKeyword(t,e)}catch(n){this.errorSrvc.presentServerErr(n)}}getOfferById(t){try{if(t&&t.trim())return this.offerAPI.getOfferById(t)}catch(e){this.errorSrvc.presentServerErr(e)}}}return t.\u0275fac=function(e){return new(e||t)(i.Rb(o.h),i.Rb(r.a))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},YMQt:function(t,e,n){"use strict";n.r(e),n.d(e,"OffersPageModule",function(){return I});var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),a=n("quSY"),b=n("Cfvw"),s=n("t6w/"),l=n("YgLt"),f=n("k+n7"),d=n("5+tZ"),p=n("vkgz"),u=n("fXoL"),g=n("sYmb");let h=(()=>{class t{constructor(t){this.modalCtrl=t}ngOnInit(){this.filterObj||this.reset()}getData(){}reset(){this.filterObj={offerStatus:"all"}}apply(){this.modalCtrl.dismiss(this.filterObj)}cancel(){this.modalCtrl.dismiss()}getUpcomingIcon(){return"upcoming"===this.filterObj.offerStatus?"assets/icon/opportunity/upcoming.svg":"assets/icon/opportunity/upcoming-disabled.svg"}updateOfferStatus(t){this.filterObj.offerStatus="active"===t?"active":"rejected"===t?"rejected":"all"===t?"all":"accepted"}}return t.\u0275fac=function(e){return new(e||t)(u.Ib(r.nb))},t.\u0275cmp=u.Cb({type:t,selectors:[["app-filter-offer"]],inputs:{filterObj:"filterObj"},decls:57,vars:36,consts:[[1,"ion-no-border"],["color","primary","mode","ios"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],[1,"ion-padding"],[1,"ion-no-margin","ion-no-padding"],["size","12"],[1,"ion-text-center","ion-padding-top"],[1,"header-btn",3,"click"],["name","apps",3,"color"],[1,"mat-small"],["name","play",3,"color"],["name","checkmark",3,"color"],["name","close",3,"color"],["fill","solid","expand","block","color","primary",3,"click"]],template:function(t,e){1&t&&(u.Nb(0,"ion-header",0),u.Nb(1,"ion-toolbar",1),u.Nb(2,"ion-buttons",2),u.Nb(3,"ion-button",3),u.Vb("click",function(){return e.cancel()}),u.Jb(4,"ion-icon",4),u.Mb(),u.Mb(),u.Nb(5,"ion-buttons",5),u.Nb(6,"ion-button",3),u.Vb("click",function(){return e.reset()}),u.xc(7),u.ac(8,"translate"),u.Mb(),u.Mb(),u.Nb(9,"ion-title"),u.xc(10),u.ac(11,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Nb(12,"ion-content"),u.Nb(13,"div",6),u.Nb(14,"ion-grid",7),u.Nb(15,"ion-row"),u.Nb(16,"ion-col",8),u.Nb(17,"ion-label"),u.xc(18),u.ac(19,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Nb(20,"ion-row",9),u.Nb(21,"ion-col"),u.Nb(22,"div",10),u.Vb("click",function(){return e.updateOfferStatus("all")}),u.Nb(23,"span"),u.Jb(24,"ion-icon",11),u.Mb(),u.Nb(25,"div"),u.Nb(26,"ion-label",12),u.xc(27),u.ac(28,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(29,"ion-col"),u.Nb(30,"div",10),u.Vb("click",function(){return e.updateOfferStatus("active")}),u.Nb(31,"span"),u.Jb(32,"ion-icon",13),u.Mb(),u.Nb(33,"div"),u.Nb(34,"ion-label",12),u.xc(35),u.ac(36,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(37,"ion-col"),u.Nb(38,"div",10),u.Vb("click",function(){return e.updateOfferStatus("accepted")}),u.Nb(39,"span"),u.Jb(40,"ion-icon",14),u.Mb(),u.Nb(41,"div"),u.Nb(42,"ion-label",12),u.xc(43),u.ac(44,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(45,"ion-col"),u.Nb(46,"div",10),u.Vb("click",function(){return e.updateOfferStatus("rejected")}),u.Nb(47,"span"),u.Jb(48,"ion-icon",15),u.Mb(),u.Nb(49,"div"),u.Nb(50,"ion-label",12),u.xc(51),u.ac(52,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(53,"ion-footer",6),u.Nb(54,"ion-button",16),u.Vb("click",function(){return e.apply()}),u.xc(55),u.ac(56,"translate"),u.Mb(),u.Mb()),2&t&&(u.xb(7),u.zc(" ",u.bc(8,20,"OffersFilter_Reset")," "),u.xb(3),u.yc(u.bc(11,22,"OffersFilter_Filter")),u.xb(8),u.zc(" ",u.bc(19,24,"OffersFilter_OfferStatus")," "),u.xb(4),u.Ab("activated","all"===e.filterObj.offerStatus),u.xb(2),u.gc("color","all"===e.filterObj.offerStatus?"primary":"medium"),u.xb(3),u.zc(" ",u.bc(28,26,"OffersFilter_All")," "),u.xb(3),u.Ab("activated","active"===e.filterObj.offerStatus),u.xb(2),u.gc("color","active"===e.filterObj.offerStatus?"primary":"medium"),u.xb(3),u.zc(" ",u.bc(36,28,"OffersFilter_Active")," "),u.xb(3),u.Ab("activated","accepted"===e.filterObj.offerStatus),u.xb(2),u.gc("color","accepted"===e.filterObj.offerStatus?"primary":"medium"),u.xb(3),u.zc(" ",u.bc(44,30,"OffersFilter_Accepted")," "),u.xb(3),u.Ab("activated","rejected"===e.filterObj.offerStatus),u.xb(2),u.gc("color","rejected"===e.filterObj.offerStatus?"primary":"medium"),u.xb(3),u.zc(" ",u.bc(52,32,"OffersFilter_Declined")," "),u.xb(4),u.zc(" ",u.bc(56,34,"Common_Apply")," "))},directives:[r.w,r.ib,r.i,r.h,r.x,r.hb,r.q,r.v,r.T,r.p,r.H,r.u],pipes:[g.c],styles:[".activated[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary)}.header-btn[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px;padding-top:5px;padding-bottom:5px;border-radius:10px}.header-btn[_ngcontent-%COMP%], .header-btn[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#eff8f8}ion-icon[_ngcontent-%COMP%]{font-size:25px}"]}),t})();var m=n("7/N5");function M(t,e){if(1&t&&(u.Nb(0,"ion-text",11),u.xc(1),u.ac(2,"translate"),u.Mb()),2&t){const t=u.Zb();u.xb(1),u.Ac(" ",u.bc(2,2,"TestdrivePage_OpportunityID"),": ",t.oppId," ")}}function O(t,e){if(1&t){const t=u.Ob();u.Nb(0,"ion-toolbar",12),u.Nb(1,"ion-searchbar",13),u.Vb("ngModelChange",function(e){return u.qc(t),u.Zb().searchInput=e})("ionChange",function(){return u.qc(t),u.Zb().search()})("ionCancel",function(){return u.qc(t),u.Zb().getOffers()})("ionClear",function(){return u.qc(t),u.Zb().getOffers()}),u.ac(2,"translate"),u.Mb(),u.Mb()}if(2&t){const t=u.Zb();u.xb(1),u.hc("placeholder",u.bc(2,2,"OffersPage_Search")),u.gc("ngModel",t.searchInput)}}function x(t,e){if(1&t){const t=u.Ob();u.Nb(0,"ion-toolbar",12),u.Nb(1,"div",14),u.Vb("click",function(){return u.qc(t),u.Zb().add()}),u.Jb(2,"ion-icon",15),u.Nb(3,"ion-label",16),u.xc(4),u.ac(5,"translate"),u.Mb(),u.Mb(),u.Mb()}2&t&&(u.xb(4),u.zc(" ",u.bc(5,1,"OffersPage_AddOffer")," "))}function N(t,e){if(1&t){const t=u.Ob();u.Nb(0,"div",17),u.Nb(1,"ion-grid",18),u.Nb(2,"ion-row"),u.Nb(3,"ion-col"),u.Nb(4,"div",19),u.Nb(5,"ion-label"),u.Nb(6,"b"),u.xc(7),u.Mb(),u.Mb(),u.Jb(8,"br"),u.Nb(9,"ion-label"),u.Nb(10,"b"),u.xc(11),u.Mb(),u.Mb(),u.Mb(),u.Nb(12,"div",20),u.Jb(13,"ion-icon",21),u.Mb(),u.Mb(),u.Nb(14,"ion-col",22),u.Nb(15,"ion-label"),u.xc(16),u.Mb(),u.Jb(17,"br"),u.Nb(18,"ion-label"),u.xc(19),u.ac(20,"date"),u.Mb(),u.Jb(21,"br"),u.Nb(22,"ion-label"),u.Nb(23,"a",5),u.Vb("click",function(){u.qc(t);const n=e.$implicit;return u.Zb().view(n)}),u.xc(24),u.ac(25,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&t){const t=e.$implicit;u.xb(7),u.yc(null==t?null:t.Status),u.xb(4),u.yc(null==t?null:t.ContactName),u.xb(5),u.yc(null==t?null:t.VariantName),u.xb(3),u.yc(u.cc(20,5,null==t?null:t.CreatedDate,"dd MMM y hh:mm a")),u.xb(5),u.zc(" ",u.bc(25,8,"OffersPage_ViewDetails")," ")}}const v=[{path:":"+s.a.PARAM_ID,children:[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,r){this.route=t,this.router=e,this.offerSrvc=n,this.translate=o,this.loadingCtrl=i,this.modalCtrl=r,this.subs=new a.a}ngOnInit(){this.subs.add(this.parseURL())}parseURL(){return this.route.paramMap.subscribe(t=>{this.oppId=t.get(s.a.PARAM_ID),this.oppId===s.a.PARAM_ID&&(this.oppId=""),this.getOffers(null)})}getOffers(t){this.translate.get("Common_Loading").pipe(Object(d.b)(t=>Object(b.a)(this.loadingCtrl.create({message:t}))),Object(d.b)(e=>(e.present(),this.offerSrvc.getOffers(this.oppId,t).pipe(Object(p.a)(t=>{this.offers=t,e.dismiss()},t=>{e.dismiss()}))))).subscribe()}goToOffer(t){this.router.navigate([`${s.a.BASE}/${this.oppId}/${l.a.BASE}/${t.Id}`])}getColor(t){return"accept"===t.Status.toLocaleLowerCase()?"accepted":"reject"===t.Status.toLocaleLowerCase()?"rejected":"pending"}add(){const t=new Object;t[l.a.STATE_OPPID]=this.oppId,this.router.navigate([`${s.a.BASE}/${this.oppId}/${l.a.BASE}/${l.a.PARAM_ID}`],{state:t})}view(t){this.router.navigate([`${s.a.BASE}/${this.oppId}/${f.a.BASE}/${t.Id}`])}showFilter(){Object(b.a)(this.modalCtrl.create({component:h,backdropDismiss:!1,animated:!0,cssClass:"full-screen",componentProps:{filterObj:this.filterObj?Object.assign({},this.filterObj):null}})).subscribe(t=>{Object(b.a)(t.onDidDismiss()).subscribe(t=>{t&&t.data&&(this.filterObj=t.data,console.log(this.filterObj),this.getOffers(this.filterObj))}),t.present()})}search(){this.translate.get("Common_Loading").pipe(Object(d.b)(t=>Object(b.a)(this.loadingCtrl.create({message:t}))),Object(d.b)(t=>(t.present(),this.offerSrvc.getOffersByKeyword(this.oppId,this.searchInput).pipe(Object(p.a)(e=>{this.offers=e,t.dismiss()},e=>{t.dismiss()}))))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(u.Ib(c.a),u.Ib(c.g),u.Ib(m.a),u.Ib(g.d),u.Ib(r.mb),u.Ib(r.nb))},t.\u0275cmp=u.Cb({type:t,selectors:[["app-offers"]],decls:17,vars:10,consts:[[1,"ion-no-border"],["color","primary","mode","ios"],["slot","start"],["defaultHref","",3,"text"],["slot","end"],[3,"click"],["slot","icon-only","name","funnel"],["class","sub-header",4,"ngIf"],["class","bg",4,"ngIf"],[1,"ion-padding-start","ion-padding-end","ion-padding-bottom"],["class","ion-margin-top ion-margin-bottom border-radius",4,"ngFor","ngForOf"],[1,"sub-header"],[1,"bg"],["search-icon","","debounce","500",1,"ion-margin-top","ion-no-padding","ion-padding-start","ion-padding-end",3,"ngModel","placeholder","ngModelChange","ionChange","ionCancel","ionClear"],[1,"border","ion-margin-start","ion-margin-end","ion-padding","ion-text-center",3,"click"],["name","add-circle","color","primary",1,"add-icon"],["color","primary"],[1,"ion-margin-top","ion-margin-bottom","border-radius"],[1,"ion-no-margin"],[1,"ion-margin-bottom"],[1,"bottom-icon"],["name","document"],[1,"ion-text-start"]],template:function(t,e){1&t&&(u.Nb(0,"ion-header",0),u.Nb(1,"ion-toolbar",1),u.Nb(2,"ion-buttons",2),u.Jb(3,"ion-back-button",3),u.ac(4,"translate"),u.Mb(),u.Nb(5,"ion-buttons",4),u.Nb(6,"ion-button",5),u.Vb("click",function(){return e.showFilter()}),u.Jb(7,"ion-icon",6),u.Mb(),u.Mb(),u.Nb(8,"ion-title"),u.xc(9),u.ac(10,"translate"),u.Jb(11,"br"),u.vc(12,M,3,4,"ion-text",7),u.Mb(),u.Mb(),u.vc(13,O,3,4,"ion-toolbar",8),u.vc(14,x,6,3,"ion-toolbar",8),u.Mb(),u.Nb(15,"ion-content",9),u.vc(16,N,26,10,"div",10),u.Mb()),2&t&&(u.xb(3),u.hc("text",u.bc(4,6,"Common_Back")),u.xb(6),u.zc(" ",u.bc(10,8,"OffersPage_Offers")," "),u.xb(3),u.gc("ngIf",e.oppId),u.xb(1),u.gc("ngIf",e.oppId),u.xb(1),u.gc("ngIf",e.oppId),u.xb(2),u.gc("ngForOf",e.offers))},directives:[r.w,r.ib,r.i,r.f,r.g,r.h,r.x,r.hb,o.m,r.q,o.l,r.fb,r.U,r.tb,i.h,i.j,r.H,r.v,r.T,r.p],pipes:[g.c,o.f],styles:[".bg[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-content-color)}.sub-header[_ngcontent-%COMP%]{font-size:12px}.add-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;vertical-align:middle;margin-top:-3px}.bottom-icon[_ngcontent-%COMP%]{bottom:0;position:absolute;font-size:20px}.border[_ngcontent-%COMP%]{border:3px dashed #cacaca}div[_ngcontent-%COMP%]{background:#fff}"]}),t})(),pathMatch:"full"},{path:""+l.a.BASE,loadChildren:()=>Promise.all([n.e(0),n.e(25)]).then(n.bind(null,"hyHv")).then(t=>t.EditOfferPageModule)},{path:""+f.a.BASE,loadChildren:()=>n.e(26).then(n.bind(null,"p+tS")).then(t=>t.ViewOfferPageModule)}]}];let y=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(v)],c.i]}),t})(),I=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)},imports:[[o.c,i.e,g.b,r.kb,y]]}),t})()},"k+n7":function(t,e,n){"use strict";n.d(e,"a",function(){return o});const o={BASE:"view-offer",PARAM_ID:"new"}}}]);
//# sourceMappingURL=13.bdec033a0223856c4960.js.map