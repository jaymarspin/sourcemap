{"version":3,"sources":["./src/app/components/common/contact-search/contact-search.component.ts","./src/app/components/common/contact-search/contact-search.component.html","./src/app/pages/new-leads/new-leads-routing.module.ts","./src/app/pages/new-leads/new-leads.page.ts","./src/app/pages/new-leads/new-leads.page.html","./src/app/components/common/contact-search/contact-search.module.ts","./src/app/pages/new-leads/new-leads.module.ts"],"names":["ContactSearchComponent","router","alertCtrl","translate","contactService","contact","this","form","get","value","trim","Name","MobileNo","btns","from","create","pipe","mergeMap","alert","forkJoin","tap","e","header","message","push","text","handler","addContact","importContact","of","subscribe","buttons","present","state","Object","STATE_CONTACT","STATE_VALIDATORS","oppId","navigate","BASE","PARAM_ID","reset","name","mobile","setValue","search","add","routes","path","OPPID","component","NewLeadsPage","formBuilder","validator","route","subs","Subscription","initContactForm","parseURL","paramMap","params","console","log","contactForm","group","required","initErrorMessages","setMobileValidator","formErrorMessages","key","keys","controls","NewLeadsPageRoutingModule","forChild","ContactSearchComponentModule","NewLeadsPageModule"],"mappings":"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","file":"24.f4041d7513339fcc4891.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { forkJoin, from, of } from 'rxjs';\r\nimport { mergeMap, tap } from 'rxjs/operators';\r\nimport { ContactModel } from 'src/app/models/common/contact.model';\r\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\r\nimport { EditContactPageRoutingKeys } from 'src/app/pages/contact/edit-contact/edit-contact-routing.keys';\r\nimport { TradeinUpdateProfilePageRoutingKeys } from 'src/app/pages/tradein/edit-tradein/update-profile/update-profile-routing.keys';\r\nimport { CommonContactService } from 'src/app/services/common/contact/contact.service';\r\n@Component({\r\n  selector: 'app-contact-search',\r\n  templateUrl: './contact-search.component.html',\r\n  styleUrls: ['./contact-search.component.scss'],\r\n})\r\nexport class ContactSearchComponent implements OnInit {\r\n  @Input() form: FormGroup;\r\n  @Input() messages: FormErrorMessages;\r\n  @Input() oppId: string;\r\n  contact: ContactModel = null;\r\n\r\n  constructor(private router: Router, private alertCtrl: AlertController, private translate: TranslateService, private contactService: CommonContactService) {}\r\n  ngOnInit() {}\r\n  search() {\r\n    if (!this.form.get('name').value.trim() && !this.form.get('mobile').value.trim()) {\r\n      this.contact = null;\r\n    } else {\r\n      this.contact = new ContactModel();\r\n      this.contact.Name = this.form.get('name').value;\r\n      this.contact.MobileNo = this.form.get('mobile').value;\r\n    }\r\n  }\r\n  add() {\r\n    const btns = [];\r\n    from(this.alertCtrl.create())\r\n      .pipe(\r\n        mergeMap((alert) => {\r\n          return forkJoin([\r\n            this.translate.get('ContactComponent_NewContact').pipe(\r\n              tap((e) => {\r\n                alert.header = e;\r\n              })\r\n            ),\r\n            this.translate.get('ContactComponent_NewContactMessage').pipe(\r\n              tap((e) => {\r\n                alert.message = e;\r\n              })\r\n            ),\r\n            this.translate.get('ContactComponent_CreateNew').pipe(\r\n              tap((e) => {\r\n                btns.push({\r\n                  text: e,\r\n                  handler: () => {\r\n                    this.addContact();\r\n                  },\r\n                });\r\n              })\r\n            ),\r\n            this.translate.get('ContactComponent_Import').pipe(\r\n              tap((e) => {\r\n                btns.push({\r\n                  text: e,\r\n                  handler: () => {\r\n                    this.importContact();\r\n                  },\r\n                });\r\n              })\r\n            ),\r\n          ]).pipe(\r\n            mergeMap((e) => {\r\n              return of(alert);\r\n            })\r\n          );\r\n        })\r\n      )\r\n      .subscribe((alert) => {\r\n        alert.buttons = btns;\r\n        alert.present();\r\n      });\r\n  }\r\n  addContact() {\r\n    const state = new Object();\r\n    const contact = new ContactModel();\r\n    contact.Name = this.form.get('name').value;\r\n    contact.MobileNo = this.form.get('mobile').value;\r\n    state[EditContactPageRoutingKeys.STATE_CONTACT] = contact;\r\n    state[EditContactPageRoutingKeys.STATE_VALIDATORS] = ['mobile', 'fullName', 'countryCode'];\r\n    const navigationExtras: NavigationExtras = {\r\n      state,\r\n    };\r\n    if (this.oppId === 'oppId') {\r\n      this.router.navigate([`${EditContactPageRoutingKeys.BASE}/${EditContactPageRoutingKeys.PARAM_ID}`], navigationExtras);\r\n    } else {\r\n      this.router.navigate([`${TradeinUpdateProfilePageRoutingKeys.BASE}/${this.oppId}/false`]);\r\n    }\r\n\r\n    this.form.reset({\r\n      name: '',\r\n      mobile: '',\r\n    });\r\n  }\r\n  importContact() {\r\n    this.contactService.importContact().subscribe((e) => {\r\n      this.form.get('name').setValue(e.Name);\r\n      this.form.get('mobile').setValue(e.MobileNo);\r\n    });\r\n  }\r\n}\r\n","<ng-container [formGroup]=\"form\">\r\n  <ion-grid class=\"ion-no-padding ht-100\">\r\n    <ion-row class=\"ion-padding white\">\r\n      <ion-col size=\"12\">\r\n        <ion-row class=\"ion-no-margin\">\r\n          <ion-col>\r\n            <ion-item lines=\"none\">\r\n              <ion-icon name=\"phone-portrait-outline\" slot=\"start\"></ion-icon>\r\n              <ion-input\r\n                formControlName=\"mobile\"\r\n                debounce=\"500\"\r\n                clearInput=\"true\"\r\n                (ionChange)=\"search()\"\r\n                placeholder=\"{{ 'ContactComponent_MobileNumber' | translate }}\"\r\n              ></ion-input>\r\n            </ion-item>\r\n            <app-item-err [control]=\"form.controls?.mobile\" [messages]=\"messages.mobile\"></app-item-err>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row>\r\n          <ion-col>\r\n            <ion-item lines=\"none\" class=\"ion-margin-top\">\r\n              <ion-icon name=\"person\" slot=\"start\"></ion-icon>\r\n              <ion-input\r\n                formControlName=\"name\"\r\n                debounce=\"500\"\r\n                (ionChange)=\"search()\"\r\n                clearInput=\"true\"\r\n                placeholder=\"{{ 'ContactComponent_ContactName' | translate }}\"\r\n              ></ion-input>\r\n            </ion-item>\r\n            <app-item-err [control]=\"form.controls?.name\" [messages]=\"messages.name\"></app-item-err>\r\n          </ion-col>\r\n        </ion-row>\r\n        <ion-row class=\"ion-margin-top\">\r\n          <ion-col>\r\n            <ion-button color=\"primary\" expand=\"block\" (click)=\"add()\">\r\n              {{ 'ContactComponent_AddNew' | translate }}\r\n            </ion-button>\r\n          </ion-col>\r\n        </ion-row>\r\n      </ion-col>\r\n    </ion-row>\r\n    <ion-row class=\"ion-no-padding ion-margin-top white flex\">\r\n      <ion-col size=\"12\">\r\n        <app-search-result [searchParam]=\"contact\" [isKeyword]=\"false\" [oppId]=\"oppId\"></app-search-result>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n</ng-container>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { NewLeadsRoutingKeys } from './new-leads-routing.keys';\r\nimport { NewLeadsPage } from './new-leads.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: `:${NewLeadsRoutingKeys.OPPID}`,\r\n    component: NewLeadsPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class NewLeadsPageRoutingModule {}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { IContactValidator } from 'src/app/interfaces/contact-validator.interface';\r\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\r\nimport { CONTACT_VALIDATOR_KEY } from 'src/app/service-providers/dynamic-key.provider';\r\nimport { NewLeadsRoutingKeys } from './new-leads-routing.keys';\r\n\r\n@Component({\r\n  selector: 'app-new-leads',\r\n  templateUrl: './new-leads.page.html',\r\n  styleUrls: ['./new-leads.page.scss'],\r\n})\r\nexport class NewLeadsPage implements OnInit {\r\n  form: FormGroup;\r\n  formErrorMessages: FormErrorMessages;\r\n  private subs = new Subscription();\r\n  oppId: string;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    @Inject(CONTACT_VALIDATOR_KEY) private validator: IContactValidator,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ) {\r\n    this.form = this.initContactForm();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subs.add(this.parseURL());\r\n  }\r\n\r\n  parseURL() {\r\n    return this.route.paramMap.subscribe((params) => {\r\n      console.log(params);\r\n      this.oppId = params.get(NewLeadsRoutingKeys.OPPID);\r\n    });\r\n  }\r\n\r\n  private initContactForm(): FormGroup {\r\n    let contactForm = this.formBuilder.group({\r\n      mobile: ['', [Validators.required]],\r\n      name: ['', [Validators.required]],\r\n    });\r\n    this.initErrorMessages(contactForm);\r\n    contactForm = this.validator.setMobileValidator(contactForm, this.formErrorMessages);\r\n    return contactForm;\r\n  }\r\n\r\n  private initErrorMessages(form: FormGroup) {\r\n    this.formErrorMessages = {\r\n      group: {},\r\n    };\r\n    if (!form) {\r\n      return;\r\n    }\r\n    for (const key of Object.keys(form.controls)) {\r\n      switch (key) {\r\n        case 'mobile':\r\n        case 'name':\r\n          this.formErrorMessages[key] = {\r\n            required: 'Cannot be empty.',\r\n          };\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar color=\"primary\" mode=\"ios\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"\" text=\"{{'Common_Back'|translate}}\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>{{\"NewLeadsPage_NewLeads\"|translate}}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n<ion-content>\r\n  <app-contact-search [form]=\"form\" [messages]=\"formErrorMessages\" [oppId]=\"oppId\"></app-contact-search>\r\n</ion-content>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ContactSearchComponent } from './contact-search.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { SearchResultComponentModule } from './search-result/search-result.module';\r\nimport { ItemErrComponentModule } from '../item-err/item-err.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, IonicModule, TranslateModule, FormsModule, ReactiveFormsModule, SearchResultComponentModule, ItemErrComponentModule],\r\n  declarations: [ContactSearchComponent],\r\n  exports: [ContactSearchComponent],\r\n  entryComponents: [ContactSearchComponent],\r\n})\r\nexport class ContactSearchComponentModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NewLeadsPageRoutingModule } from './new-leads-routing.module';\r\n\r\nimport { NewLeadsPage } from './new-leads.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ContactSearchComponentModule } from 'src/app/components/common/contact-search/contact-search.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, ReactiveFormsModule, TranslateModule, ContactSearchComponentModule, NewLeadsPageRoutingModule],\r\n  declarations: [NewLeadsPage],\r\n})\r\nexport class NewLeadsPageModule {}\r\n"],"sourceRoot":"webpack:///"}